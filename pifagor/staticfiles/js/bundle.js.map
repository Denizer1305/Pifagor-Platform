{
  "version": 3,
  "sources": ["modules/mobile-menu.js", "modules/animations.js", "modules/theme-switcher.js", "modules/ui.js", "modules/auth.js", "modules/attendance.js", "modules/progress.js", "modules/statistics.js", "modules/export.js", "pages/analitics-page.js", "pages/contact-pages.js", "pages/teachers-pages.js", "pages/admin/platform-users.js", "pages/admin/role-management.js", "pages/admin/subject-management.js", "pages/material-creation.js", "pages/material-browser.js", "pages/schedule-pages.js", "modules/chat.js", "pages/dashboard.js", "lib/utils.js", "modules/modal-manager.js", "modules/course-students.js", "modules/course-management.js", "modules/course-creation.js", "modules/course-detail-management.js", "modules/course-editor.js", "modules/courses.js", "pages/course-pages.js", "modules/toast.js", "modules/practic-execution.js", "modules/practic-review.js", "modules/practic-creation.js", "pages/practic-pages.js", "pages/test-pages.js", "pages/homework-pages.js", "modules/tests.js", "main.js"],
  "sourcesContent": ["export function initMobileMenu() {\n    console.log('Mobile menu initialized');\n    const burgerMenu = document.querySelector('.burger-menu');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const mobileOverlay = document.querySelector('.mobile-menu-overlay');\n    const closeButton = document.querySelector('.mobile-menu-close');\n    const mobileLinks = document.querySelectorAll('.mobile-nav-link');\n    \n    if (!burgerMenu || !mobileMenu) return;\n\n    const burgerIcon = burgerMenu.querySelector('i');\n    \n    function toggleMenu() {\n        const isExpanded = burgerMenu.getAttribute('aria-expanded') === 'true';\n        burgerMenu.setAttribute('aria-expanded', !isExpanded);\n        mobileMenu.classList.toggle('active');\n        mobileOverlay.classList.toggle('active');\n        document.body.style.overflow = !isExpanded ? 'hidden' : '';\n        \n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043A\u043E\u043D\u043A\u0443\n        if (!isExpanded) {\n            burgerIcon.classList.remove('fa-bars');\n            burgerIcon.classList.add('fa-times');\n        } else {\n            burgerIcon.classList.remove('fa-times');\n            burgerIcon.classList.add('fa-bars');\n        }\n    }\n    \n    function closeMenu() {\n        burgerMenu.setAttribute('aria-expanded', 'false');\n        mobileMenu.classList.remove('active');\n        mobileOverlay.classList.remove('active');\n        document.body.style.overflow = '';\n        \n        // \u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043C \u0438\u043A\u043E\u043D\u043A\u0443 \u043C\u0435\u043D\u044E\n        burgerIcon.classList.remove('fa-times');\n        burgerIcon.classList.add('fa-bars');\n    }\n    \n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0441\u043E\u0431\u044B\u0442\u0438\u0439\n    burgerMenu.addEventListener('click', toggleMenu);\n    if (closeButton) closeButton.addEventListener('click', closeMenu);\n    if (mobileOverlay) mobileOverlay.addEventListener('click', closeMenu);\n    \n    mobileLinks.forEach(link => {\n        link.addEventListener('click', closeMenu);\n    });\n    \n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E Escape\n    document.addEventListener('keydown', function(e) {\n        if (e.key === 'Escape') {\n            closeMenu();\n        }\n    });\n}", "// \u041C\u043E\u0434\u0443\u043B\u044C \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0439\nexport function initScrollAnimations() {\n    const fadeElements = document.querySelectorAll('.fade-in');\n    \n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('visible');\n            }\n        });\n    }, {\n        threshold: 0.1\n    });\n    \n    fadeElements.forEach(element => {\n        observer.observe(element);\n    });\n}\n\nexport function initHeaderScrollEffect() {\n    window.addEventListener('scroll', function() {\n        const header = document.querySelector('header');\n        if (header) {\n            if (window.scrollY > 50) {\n                header.classList.add('scrolled');\n            } else {\n                header.classList.remove('scrolled');\n            }\n        }\n    });\n}\n\nexport function initCommonAnimations() {\n    const fadeElements = document.querySelectorAll('.fade-in');\n    \n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('visible');\n            }\n        });\n    }, {\n        threshold: 0.1\n    });\n    \n    fadeElements.forEach(element => {\n        observer.observe(element);\n    });\n}\n\nexport function initCommonPracticeAnimations() {\n    const subjectCards = document.querySelectorAll('.subject-card');\n    \n    subjectCards.forEach(card => {\n        card.addEventListener('mouseenter', function() {\n            this.style.transform = 'translateY(-10px) scale(1.02)';\n        });\n        \n        card.addEventListener('mouseleave', function() {\n            this.style.transform = 'translateY(0) scale(1)';\n        });\n    });\n\n    const topicCards = document.querySelectorAll('.topic-card');\n    \n    topicCards.forEach(card => {\n        card.addEventListener('click', function(e) {\n            if (!e.target.classList.contains('btn')) {\n                const link = this.querySelector('.btn-practice');\n                if (link) {\n                    window.location.href = link.getAttribute('href');\n                }\n            }\n        });\n    });\n\n}\n\n// \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0437\u0430\u0434\u0430\u043D\u0438\u0439\nexport function initPracticeAnimations() {\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u0437\u0430\u0434\u0430\u043D\u0438\u0439\n    const practiceCards = document.querySelectorAll('.practice-card, .subject-card, .topic-card');\n    \n    practiceCards.forEach(card => {\n        card.addEventListener('mouseenter', function() {\n            this.style.transform = 'translateY(-5px) scale(1.02)';\n            this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';\n        });\n        \n        card.addEventListener('mouseleave', function() {\n            this.style.transform = 'translateY(0) scale(1)';\n            this.style.boxShadow = '';\n        });\n    });\n\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0432 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430\u0445 \u0437\u0430\u0434\u0430\u043D\u0438\u0439\n    const topicCards = document.querySelectorAll('.topic-card');\n    \n    topicCards.forEach(card => {\n        card.addEventListener('click', function(e) {\n            if (!e.target.classList.contains('btn')) {\n                const link = this.querySelector('.btn-practice');\n                if (link) {\n                    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u044E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0430\n                    this.style.transform = 'scale(0.95)';\n                    setTimeout(() => {\n                        window.location.href = link.getAttribute('href');\n                    }, 200);\n                }\n            }\n        });\n    });\n\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441\u0430 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F\n    const progressBars = document.querySelectorAll('.progress-bar');\n    \n    progressBars.forEach(bar => {\n        const width = bar.style.width || bar.getAttribute('data-width') || '0%';\n        setTimeout(() => {\n            bar.style.width = width;\n        }, 500);\n    });\n}\n\nexport function initPracticOverview() {\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0438\u043D\u0442\u0435\u0440\u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430\u043C \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u043E\u0432\n    const subjectCards = document.querySelectorAll('.subject-card');\n    \n    subjectCards.forEach(card => {\n        card.addEventListener('mouseenter', function() {\n            this.style.transform = 'translateY(-10px) scale(1.02)';\n        });\n        \n        card.addEventListener('mouseleave', function() {\n            this.style.transform = 'translateY(0) scale(1)';\n        });\n    });\n}\n\nexport function initPracticList() {\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0438\u043D\u0442\u0435\u0440\u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430\u043C \u0442\u0435\u043C\n    const topicCards = document.querySelectorAll('.topic-card');\n    \n    topicCards.forEach(card => {\n        card.addEventListener('click', function(e) {\n            // \u0418\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C \u043A\u043B\u0438\u043A\u0438 \u043F\u043E \u043A\u043D\u043E\u043F\u043A\u0430\u043C\n            if (!e.target.classList.contains('btn')) {\n                const link = this.querySelector('.btn-practice');\n                if (link) {\n                    window.location.href = link.getAttribute('href');\n                }\n            }\n        });\n    });\n}", "// \u041C\u043E\u0434\u0443\u043B\u044C \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0442\u0435\u043C\nexport function initThemeSwitcher() {\n    const themeButtons = document.querySelectorAll('.theme-btn');\n    \n    if (themeButtons.length === 0) return;\n    \n    // \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0439 \u0442\u0435\u043C\u044B\n    const savedTheme = localStorage.getItem('theme') || 'default';\n    setTheme(savedTheme);\n    \n    themeButtons.forEach(btn => {\n        btn.addEventListener('click', function() {\n            const theme = this.getAttribute('data-theme');\n            setTheme(theme);\n            \n            // \u041C\u0438\u043A\u0440\u043E\u0432\u0437\u0430\u0438\u043C\u043E\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435\n            this.style.transform = 'scale(0.9)';\n            setTimeout(() => {\n                this.style.transform = 'scale(1.1)';\n            }, 100);\n            setTimeout(() => {\n                this.style.transform = 'scale(1)';\n            }, 200);\n        });\n    });\n    \n    function setTheme(theme) {\n        // \u0423\u0434\u0430\u043B\u044F\u0435\u043C \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0443\u044E \u0442\u0435\u043C\u0443\n        const existingTheme = document.getElementById('dynamic-theme');\n        if (existingTheme) {\n            existingTheme.remove();\n        }\n        \n        // \u0421\u043E\u0437\u0434\u0430\u0435\u043C \u043D\u043E\u0432\u0443\u044E \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0442\u0435\u043C\u0443\n        const themeLink = document.createElement('link');\n        themeLink.id = 'dynamic-theme';\n        themeLink.rel = 'stylesheet';\n        themeLink.href = `/frontend/static/css/themes/${theme}.css`;\n        document.head.appendChild(themeLink);\n        \n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u0443\u044E \u043A\u043D\u043E\u043F\u043A\u0443\n        themeButtons.forEach(btn => {\n            btn.classList.remove('active');\n            if (btn.getAttribute('data-theme') === theme) {\n                btn.classList.add('active');\n            }\n        });\n        \n        // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u0432 localStorage\n        localStorage.setItem('theme', theme);\n        \n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u043C\u0435\u0442\u0430-\u0442\u0435\u0433 theme-color\n        updateThemeColor(theme);\n    }\n    \n    function updateThemeColor(theme) {\n        let themeColor = '#394458';\n        \n        switch(theme) {\n            case 'dark':\n                themeColor = '#1E293B';\n                break;\n            case 'high-contrast':\n                themeColor = '#000000';\n                break;\n        }\n        \n        let themeColorMeta = document.querySelector('meta[name=\"theme-color\"]');\n        if (!themeColorMeta) {\n            themeColorMeta = document.createElement('meta');\n            themeColorMeta.name = 'theme-color';\n            document.head.appendChild(themeColorMeta);\n        }\n        themeColorMeta.setAttribute('content', themeColor);\n    }\n}", "export function initSmoothScroll() {\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            e.preventDefault();\n            const targetId = this.getAttribute('href');\n            if(targetId === '#') return;\n            \n            const targetElement = document.querySelector(targetId);\n            if(targetElement) {\n                window.scrollTo({\n                    top: targetElement.offsetTop - 80,\n                    behavior: 'smooth'\n                });\n            }\n        });\n    });\n}\n\nexport function toggleElement(element, show, duration = 300) {\n    if (show) {\n        element.style.display = 'block';\n        setTimeout(() => {\n            element.style.opacity = '1';\n        }, 10);\n    } else {\n        element.style.opacity = '0';\n        setTimeout(() => {\n            element.style.display = 'none';\n        }, duration);\n    }\n}\n\nexport function initParticles() {\n    const particlesContainer = document.getElementById('particles');\n    if (!particlesContainer) return;\n\n    const particleCount = 30;\n    \n    for (let i = 0; i < particleCount; i++) {\n        const particle = document.createElement('div');\n        particle.classList.add('particle');\n        \n        // Random properties\n        const size = Math.random() * 5 + 2;\n        const posX = Math.random() * 100;\n        const delay = Math.random() * 15;\n        const duration = Math.random() * 10 + 10;\n        \n        particle.style.width = `${size}px`;\n        particle.style.height = `${size}px`;\n        particle.style.left = `${posX}%`;\n        particle.style.animationDelay = `${delay}s`;\n        particle.style.animationDuration = `${duration}s`;\n        \n        particlesContainer.appendChild(particle);\n    }\n}\n\n// \u041F\u043B\u0430\u0432\u043D\u0430\u044F \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430 \u0434\u043B\u044F \u044F\u043A\u043E\u0440\u043D\u044B\u0445 \u0441\u0441\u044B\u043B\u043E\u043A\nexport function initSmoothAnchorScroll() {\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            const href = this.getAttribute('href');\n            \n            // \u041F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u0435\u043C \u043F\u0443\u0441\u0442\u044B\u0435 \u044F\u043A\u043E\u0440\u044F \u0438 \u0442\u0435, \u0447\u0442\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044E\u0442\u0441\u044F \u0434\u043B\u044F \u0434\u0440\u0443\u0433\u0438\u0445 \u0446\u0435\u043B\u0435\u0439\n            if (href === '#' || href === '#!' || this.getAttribute('data-toggle')) {\n                return;\n            }\n            \n            e.preventDefault();\n            \n            const targetElement = document.querySelector(href);\n            if (targetElement) {\n                const headerHeight = document.querySelector('header')?.offsetHeight || 80;\n                const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n                \n                window.scrollTo({\n                    top: targetPosition,\n                    behavior: 'smooth'\n                });\n            }\n        });\n    });\n}\n\n// \u0423\u0442\u0438\u043B\u0438\u0442\u044B \u0434\u043B\u044F \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438\nexport function initFilterSystem(filterContainer) {\n    const filterItems = filterContainer.querySelectorAll('.filter-item');\n    let currentFilter = 'all';\n    \n    filterItems.forEach(item => {\n        item.addEventListener('click', function() {\n            const filterValue = this.getAttribute('data-filter');\n            \n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\n            filterItems.forEach(f => f.classList.remove('active'));\n            this.classList.add('active');\n            \n            currentFilter = filterValue;\n            applyFilter(currentFilter);\n        });\n    });\n    \n    function applyFilter(filter) {\n        // \u042D\u0442\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043F\u0435\u0440\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0430 \u0432 \u043A\u043E\u043D\u043A\u0440\u0435\u0442\u043D\u043E\u043C \u043C\u043E\u0434\u0443\u043B\u0435\n        console.log('Applying filter:', filter);\n    }\n    \n    return {\n        getCurrentFilter: () => currentFilter,\n        setFilterHandler: (handler) => { applyFilter = handler; }\n    };\n}\n\n// \u041F\u043E\u0438\u0441\u043A \u0441 \u0434\u0435\u0431\u0430\u0443\u043D\u0441\u0438\u043D\u0433\u043E\u043C\nexport function initSearchWithDebounce(searchInput, callback, delay = 300) {\n    let timeoutId;\n    \n    searchInput.addEventListener('input', function() {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => {\n            callback(this.value);\n        }, delay);\n    });\n    \n    // \u041E\u0447\u0438\u0441\u0442\u043A\u0430 \u043F\u0440\u0438 \u0440\u0430\u0437\u043C\u043E\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0438\n    return () => clearTimeout(timeoutId);\n}", "export function initAuth() {\n    initLogin();\n    initPasswordReset();\n    initEmailVerification();\n    initLogout();\n    initCreateNewPassword();\n    initRegistration();\n}\n\nfunction initLogin() {\n    const loginForm = document.getElementById('loginForm');\n    if (!loginForm) return;\n\n    const loginElement = document.querySelector('.login');\n    if (!loginElement) {\n        console.error('Element with class \"login\" not found');\n        return;\n    }\n    const indexUrl = loginElement.dataset.indexUrl;\n\n    loginForm.addEventListener('submit', function(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById('email').value;\n        const password = document.getElementById('password').value;\n        const remember = document.getElementById('remember').checked;\n\n        if (!email || !isValidEmail(email)) {\n            showAlert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 email \u0430\u0434\u0440\u0435\u0441', 'error');\n            return;\n        }\n        \n        if (!password) {\n            showAlert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C', 'error');\n            return;\n        }\n        \n        if (password.length < 6) {\n            showAlert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430', '\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 email \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0432\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445', 'error');\n            return;\n        }\n        \n        const submitButton = loginForm.querySelector('button[type=\"submit\"]');\n        const originalText = submitButton.textContent;\n        submitButton.textContent = '\u0412\u0445\u043E\u0434...';\n        submitButton.disabled = true;\n        \n        setTimeout(() => {\n            showAlert('\u0412\u0445\u043E\u0434 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D!', `\u0414\u043E\u0431\u0440\u043E \u043F\u043E\u0436\u0430\u043B\u043E\u0432\u0430\u0442\u044C! \u0412\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u043E\u0448\u043B\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443.${remember ? ' \u0412\u0430\u0448\u0438 \u0434\u0430\u043D\u043D\u044B\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B.' : ''}`, 'success');\n            \n            submitButton.textContent = originalText;\n            submitButton.disabled = false;\n            \n            setTimeout(() => {\n                window.location.href = indexUrl;\n            }, 2000);\n            \n        }, 1500);\n    });\n}\n\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n}\n\nfunction getCSRFToken() {\n    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]');\n    return csrfToken ? csrfToken.value : '';\n}\n\nfunction initRegistration() {\n    const registerForm = document.querySelector('form#register-form');\n    const requirementIds = ['lengthReq', 'uppercaseReq', 'numberReq', 'specialReq'];\n    requirementIds.forEach(id => {\n        const element = document.getElementById(id);\n    });\n\n    function initPasswordToggles() {\n        const passwordToggles = document.querySelectorAll('.password-toggle');\n        \n        passwordToggles.forEach(toggle => {\n            const newToggle = toggle.cloneNode(true);\n            toggle.parentNode.replaceChild(newToggle, toggle);\n            \n            newToggle.addEventListener('click', function(e) {\n                e.preventDefault();\n                console.log('Password toggle clicked');\n                \n                const targetId = this.getAttribute('data-target');\n                console.log('Target ID:', targetId);\n                \n                const passwordInput = document.getElementById(targetId);\n                \n                const currentType = passwordInput.getAttribute('type');\n                const newType = currentType === 'password' ? 'text' : 'password';\n                \n                passwordInput.setAttribute('type', newType);\n                \n                const icon = this.querySelector('i');\n                if (icon) {\n                    if (newType === 'password') {\n                        icon.className = 'fas fa-eye';\n                    } else {\n                        icon.className = 'fas fa-eye-slash';\n                    }\n                }\n            });\n        });\n    }\n\n    initPasswordToggles();\n\n    function checkPasswordStrength(password) {\n        let strength = 0;\n        const requirements = {\n            length: false,\n            uppercase: false,\n            number: false,\n            special: false\n        };\n        \n        if (!password) {\n            return { strength: 0, requirements };\n        }\n\n        if (password.length >= 8) {\n            strength += 25;\n            requirements.length = true;\n        }\n        \n        if (/[A-Z]/.test(password)) {\n            strength += 25;\n            requirements.uppercase = true;\n        }\n        \n        if (/[0-9]/.test(password)) {\n            strength += 25;\n            requirements.number = true;\n        }\n        \n        if (/[!@#$%^&*(),.?\":{}|<>]/.test(password)) {\n            strength += 25;\n            requirements.special = true;\n        }\n        \n        return { strength, requirements };\n    }\n\n    function checkPasswordMatch() {\n        const password1 = document.getElementById('id_password1')?.value || '';\n        const password2 = document.getElementById('id_password2')?.value || '';\n        const passwordMatch = document.getElementById('passwordMatch');\n        \n        if (!passwordMatch) return false;\n        \n        if (password2.length > 0) {\n            if (password1 === password2) {\n                passwordMatch.style.display = 'block';\n                passwordMatch.innerHTML = '<i class=\"fas fa-check\"></i> \u041F\u0430\u0440\u043E\u043B\u0438 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442';\n                passwordMatch.classList.remove('invalid');\n                passwordMatch.classList.add('valid');\n                return true;\n            } else {\n                passwordMatch.style.display = 'block';\n                passwordMatch.innerHTML = '<i class=\"fas fa-times\"></i> \u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442';\n                passwordMatch.classList.remove('valid');\n                passwordMatch.classList.add('invalid');\n                return false;\n            }\n        } else {\n            passwordMatch.style.display = 'none';\n            return false;\n        }\n    }\n    \n    function updatePasswordRequirements(requirements) {\n        const requirementsConfig = {\n            'length': { \n                elementId: 'lengthReq', \n                text: '\u041D\u0435 \u043C\u0435\u043D\u0435\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432' \n            },\n            'uppercase': { \n                elementId: 'uppercaseReq', \n                text: '\u0417\u0430\u0433\u043B\u0430\u0432\u043D\u0430\u044F \u0431\u0443\u043A\u0432\u0430' \n            },\n            'number': { \n                elementId: 'numberReq', \n                text: '\u0425\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0430 \u0446\u0438\u0444\u0440\u0430' \n            },\n            'special': { \n                elementId: 'specialReq', \n                text: '\u0421\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0438\u043C\u0432\u043E\u043B' \n            }\n        };\n        \n        Object.keys(requirementsConfig).forEach(requirementType => {\n            const config = requirementsConfig[requirementType];\n            const element = document.getElementById(config.elementId);\n            \n            const isValid = requirements[requirementType];\n            \n            if (isValid) {\n                element.classList.remove('invalid');\n                element.classList.add('valid');\n                const currentText = element.textContent || config.text;\n                element.innerHTML = '<i class=\"fas fa-check\"></i> ' + currentText.replace(/^.*?(\\s|$)/, '');\n            } else {\n                element.classList.remove('valid');\n                element.classList.add('invalid');\n                const currentText = element.textContent || config.text;\n                element.innerHTML = '<i class=\"fas fa-times\"></i> ' + currentText.replace(/^.*?(\\s|$)/, '');\n            }\n\n        });\n    }\n    \n    function updatePasswordStrengthBar(strength) {\n        const strengthBar = document.getElementById('passwordStrengthBar');\n        if (!strengthBar) return;\n        \n        strengthBar.className = 'password-strength-bar';\n        strengthBar.style.width = '0%';\n        \n        if (strength > 0) {\n            if (strength <= 25) {\n                strengthBar.classList.add('strength-weak');\n                strengthBar.style.width = '25%';\n            } else if (strength <= 50) {\n                strengthBar.classList.add('strength-fair');\n                strengthBar.style.width = '50%';\n            } else if (strength <= 75) {\n                strengthBar.classList.add('strength-good');\n                strengthBar.style.width = '75%';\n            } else {\n                strengthBar.classList.add('strength-strong');\n                strengthBar.style.width = '100%';\n            }\n        }\n    }\n    \n    function updateSubmitButton() {\n        const password1 = document.getElementById('id_password1')?.value || '';\n        const password2 = document.getElementById('id_password2')?.value || '';\n        const termsCheckbox = document.getElementById('terms');\n        const roleSelected = document.querySelector('input[name=\"role\"]:checked');\n        const submitButton = registerForm.querySelector('button[type=\"submit\"]');\n        \n        if (!submitButton) return;\n        \n        const { requirements } = checkPasswordStrength(password1);\n        const passwordsMatch = checkPasswordMatch();\n        const termsAccepted = termsCheckbox ? termsCheckbox.checked : false;\n        const roleIsSelected = roleSelected !== null;\n        \n        const allRequirementsMet = requirements.length && requirements.uppercase && \n                                  requirements.number && requirements.special;\n        \n        const isFormValid = allRequirementsMet && passwordsMatch && \n                           password1.length > 0 && password2.length > 0 && \n                           termsAccepted && roleIsSelected;\n        \n        if (isFormValid) {\n            submitButton.disabled = false;\n            submitButton.classList.remove('btn-disabled');\n        } else {\n            submitButton.disabled = true;\n            submitButton.classList.add('btn-disabled');\n        }\n    }\n    \n    const password1Input = document.getElementById('id_password1');\n    const password2Input = document.getElementById('id_password2');\n    const termsCheckbox = document.getElementById('terms');\n    const roleInputs = document.querySelectorAll('input[name=\"role\"]');\n    \n    if (password1Input) {\n        password1Input.addEventListener('input', function() {\n            const password = this.value;\n            const { strength, requirements } = checkPasswordStrength(password);\n            \n            updatePasswordStrengthBar(strength);\n            updatePasswordRequirements(requirements);\n            checkPasswordMatch();\n            updateSubmitButton();\n        });\n    }\n    \n    if (password2Input) {\n        password2Input.addEventListener('input', function() {\n            checkPasswordMatch();\n            updateSubmitButton();\n        });\n    }\n    \n    if (termsCheckbox) {\n        termsCheckbox.addEventListener('change', function() {\n            updateSubmitButton();\n        });\n    }\n    \n    roleInputs.forEach(input => {\n        input.addEventListener('change', function() {\n            updateSubmitButton();\n        });\n    });\n\nregisterForm.addEventListener('submit', function(e) {\n    e.preventDefault();\n    \n    const password1 = document.getElementById('id_password1')?.value || '';\n    const password2 = document.getElementById('id_password2')?.value || '';\n    const terms = document.getElementById('terms')?.checked || false;\n    const roleSelected = document.querySelector('input[name=\"role\"]:checked');\n    \n    if (password1 !== password2) {\n        showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442!', 'error');\n        return;\n    }\n    \n    const { requirements } = checkPasswordStrength(password1);\n    const allRequirementsMet = requirements.length && requirements.uppercase && \n                              requirements.number && requirements.special;\n    \n    if (!allRequirementsMet) {\n        showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041F\u0430\u0440\u043E\u043B\u044C \u043D\u0435 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F\u043C \u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u0438!', 'error');\n        return;\n    }\n    \n    if (!terms) {\n        showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u0440\u0438\u043C\u0438\u0442\u0435 \u0443\u0441\u043B\u043E\u0432\u0438\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F!', 'error');\n        return;\n    }\n    \n    if (!roleSelected) {\n        showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043E\u043B\u044C!', 'error');\n        return;\n    }\n\n    const formData = new FormData(registerForm);\n    const submitButton = registerForm.querySelector('button[type=\"submit\"]');\n    const originalText = submitButton.textContent;\n\n    submitButton.textContent = '\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F...';\n    submitButton.disabled = true;\n\n    fetch(registerForm.action, {\n        method: 'POST',\n        body: formData,\n        headers: {\n            'X-Requested-With': 'XMLHttpRequest',\n            'X-CSRFToken': getCSRFToken()\n        }\n    })\n    .then(response => {\n        const contentType = response.headers.get('content-type');\n        if (contentType && contentType.includes('application/json')) {\n            return response.json().then(data => {\n                return { data, status: response.status, ok: response.ok };\n            });\n        } else {\n            throw new Error('Server returned non-JSON response');\n        }\n    })\n    .then(({ data, status, ok }) => {\n        console.log('Response data:', data);\n        \n        if (ok && data.success) {\n            showAlert('\u0423\u0441\u043F\u0435\u0448\u043D\u0430\u044F \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F!', \n                     '\u0412\u0430\u0448 \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0431\u044B\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D. \u0422\u0435\u043F\u0435\u0440\u044C \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443.', \n                     'success', {\n                autoClose: 5000,\n                onConfirm: () => {\n                    window.location.href = data.redirect_url || '/authorization/login/';\n                }\n            });\n        } else {\n            document.querySelectorAll('.error-message').forEach(el => {\n                el.style.display = 'none';\n                el.textContent = '';\n            });\n            \n            if (data.errors) {\n                let hasFieldErrors = false;\n                \n                Object.keys(data.errors).forEach(field => {\n                    let errorElement;\n                    \n                    if (field === 'password1' || field === 'id_password1') {\n                        errorElement = document.querySelector('#id_password1')?.closest('.form-group')?.querySelector('.error-message');\n                    } else if (field === 'password2' || field === 'id_password2') {\n                        errorElement = document.querySelector('#id_password2')?.closest('.form-group')?.querySelector('.error-message');\n                    } else if (field === 'email' || field === 'id_email') {\n                        errorElement = document.querySelector('#id_email')?.closest('.form-group')?.querySelector('.error-message');\n                    } else if (field === 'fullname' || field === 'id_fullname') {\n                        errorElement = document.querySelector('#id_fullname')?.closest('.form-group')?.querySelector('.error-message');\n                    } else if (field === 'role') {\n                        errorElement = document.querySelector('.role-selector')?.closest('.form-group')?.querySelector('.error-message');\n                    } else if (field === '__all__') {\n                        showAlert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438', Array.isArray(data.errors[field]) ? data.errors[field][0] : data.errors[field], 'error');\n                        return;\n                    }\n                    \n                    if (errorElement) {\n                        const errorText = Array.isArray(data.errors[field]) ? data.errors[field][0] : data.errors[field];\n                        errorElement.textContent = errorText;\n                        errorElement.style.display = 'block';\n                        hasFieldErrors = true;\n                    }\n                });\n                if (!hasFieldErrors) {\n                    showAlert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438', \n                             '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u0440\u0430\u0432\u044C\u0442\u0435 \u043E\u0448\u0438\u0431\u043A\u0438 \u0432 \u0444\u043E\u0440\u043C\u0435.', \n                             'error');\n                }\n            } else {\n                showAlert('\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438', \n                         '\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.', \n                         'error');\n            }\n        }\n    })\n    .catch(error => {\n        console.error('Fetch error:', error);\n        \n        let errorMessage = '\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. ';\n        \n        if (error.message.includes('non-JSON')) {\n            errorMessage += '\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043D\u0443\u043B \u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442.';\n        } else {\n            errorMessage += '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.';\n        }\n        \n        showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', errorMessage, 'error');\n    })\n    .finally(() => {\n        submitButton.textContent = originalText;\n        submitButton.disabled = false;\n    });\n});\n\n    updateSubmitButton();\n    const { strength, requirements } = checkPasswordStrength('');\n    updatePasswordStrengthBar(strength);\n    updatePasswordRequirements(requirements);\n}\n\nfunction showAlert(title, message, type = 'info', options = {}) {\n    const existingAlert = document.querySelector('.alert-overlay');\n    if (existingAlert) {\n        document.body.removeChild(existingAlert);\n    }\n    \n    const overlay = document.createElement('div');\n    overlay.className = 'alert-overlay';\n    \n    const alertBox = document.createElement('div');\n    alertBox.className = `alert-box ${type}`;\n    \n    const iconEl = document.createElement('div');\n    iconEl.className = 'alert-icon';\n    \n    switch(type) {\n        case 'success':\n            iconEl.innerHTML = '<i class=\"fas fa-check-circle\"></i>';\n            break;\n        case 'error':\n            iconEl.innerHTML = '<i class=\"fas fa-exclamation-circle\"></i>';\n            break;\n        case 'warning':\n            iconEl.innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>';\n            break;\n        default:\n            iconEl.innerHTML = '<i class=\"fas fa-info-circle\"></i>';\n    }\n    \n    const titleEl = document.createElement('div');\n    titleEl.className = 'alert-title';\n    titleEl.textContent = title;\n    \n    const messageEl = document.createElement('div');\n    messageEl.className = 'alert-message';\n    messageEl.textContent = message;\n    \n    const buttonContainer = document.createElement('div');\n    buttonContainer.className = 'alert-buttons';\n    buttonContainer.style.display = 'flex';\n    buttonContainer.style.gap = '10px';\n    buttonContainer.style.justifyContent = 'center';\n    buttonContainer.style.marginTop = '1.5rem';\n    \n    const confirmButton = document.createElement('button');\n    confirmButton.className = 'alert-button';\n    confirmButton.textContent = options.confirmText || '\u041F\u043E\u043D\u044F\u0442\u043D\u043E';\n    \n    alertBox.appendChild(iconEl);\n    alertBox.appendChild(titleEl);\n    alertBox.appendChild(messageEl);\n    \n    buttonContainer.appendChild(confirmButton);\n    \n    if (options.showCancel) {\n        const cancelButton = document.createElement('button');\n        cancelButton.className = 'alert-button btn-light';\n        cancelButton.textContent = options.cancelText || '\u041E\u0442\u043C\u0435\u043D\u0430';\n        cancelButton.style.background = 'transparent';\n        cancelButton.style.border = '2px solid var(--primary)';\n        cancelButton.style.color = 'var(--primary)';\n        \n        cancelButton.onclick = () => {\n            document.body.removeChild(overlay);\n            if (options.onCancel) options.onCancel();\n        };\n        \n        buttonContainer.appendChild(cancelButton);\n    }\n    \n    alertBox.appendChild(buttonContainer);\n    overlay.appendChild(alertBox);\n    \n    document.body.appendChild(overlay);\n    \n    confirmButton.focus();\n    \n    const closeAlert = () => {\n        if (document.body.contains(overlay)) {\n            document.body.removeChild(overlay);\n        }\n        if (options.onConfirm) options.onConfirm();\n    };\n    \n    confirmButton.onclick = closeAlert;\n    \n    overlay.onclick = (e) => {\n        if (e.target === overlay && !options.disableOverlayClose) {\n            closeAlert();\n        }\n    };\n    \n    const handleEscape = (e) => {\n        if (e.key === 'Escape') {\n            closeAlert();\n            document.removeEventListener('keydown', handleEscape);\n        }\n    };\n    \n    document.addEventListener('keydown', handleEscape);\n    \n    if (options.autoClose) {\n        setTimeout(() => {\n            if (document.body.contains(overlay)) {\n                closeAlert();\n            }\n        }, options.autoClose);\n    }\n    \n    return {\n        close: closeAlert\n    };\n}\n\nfunction initPasswordReset() {\n    const resetForm = document.getElementById('resetForm');\n    if (!resetForm) return;\n\n    resetForm.addEventListener('submit', function(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById('email').value;\n        document.getElementById('successMessage').style.display = 'block';\n        this.reset();\n    });\n}\n\nfunction initEmailVerification() {\n    let timeLeft = 300;\n    const countdownElement = document.getElementById('countdown');\n    const resendButton = document.getElementById('resendCode');\n    const verifyButton = document.getElementById('verifyCode');\n    const codeDigits = document.querySelectorAll('.code-digit');\n    \n    if (!countdownElement || !resendButton || !verifyButton) return;\n\n    const urlParams = new URLSearchParams(window.location.search);\n    const email = urlParams.get('email') || 'user@example.com';\n    const userEmailElement = document.getElementById('userEmail');\n    if (userEmailElement) {\n        userEmailElement.textContent = email;\n    }\n\n    function updateTimer() {\n        const minutes = Math.floor(timeLeft / 60);\n        const seconds = timeLeft % 60;\n        countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n        \n        if (timeLeft > 0) {\n            timeLeft--;\n            setTimeout(updateTimer, 1000);\n        } else {\n            resendButton.disabled = false;\n            resendButton.classList.remove('btn-disabled');\n            resendButton.innerHTML = '<i class=\"fas fa-redo\"></i> \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E';\n            countdownElement.textContent = '00:00';\n            countdownElement.style.color = 'var(--danger)';\n        }\n    }\n\n    function resendCode() {\n        if (timeLeft <= 0) {\n            timeLeft = 300;\n            updateTimer();\n            resendButton.disabled = true;\n            resendButton.classList.add('btn-disabled');\n            resendButton.innerHTML = '<i class=\"fas fa-clock\"></i> \u041A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D';\n            countdownElement.style.color = 'var(--text)';\n\n            showAlert('\u041A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D', `\u041D\u043E\u0432\u044B\u0439 \u043A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0431\u044B\u043B \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 ${email}`, 'info', {\n                autoClose: 3000\n            });\n\n            setTimeout(() => {\n                if (timeLeft > 0) {\n                    resendButton.disabled = false;\n                    resendButton.classList.remove('btn-disabled');\n                    resendButton.innerHTML = '<i class=\"fas fa-redo\"></i> \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E';\n                }\n            }, 30000);\n        }\n    }\n\n    resendButton.addEventListener('click', resendCode);\n\n    codeDigits.forEach((digit, index) => {\n        digit.addEventListener('input', function() {\n            if (this.value.length === 1) {\n                if (index < codeDigits.length - 1) {\n                    codeDigits[index + 1].focus();\n                } else {\n                    this.blur();\n                }\n                \n                checkCodeCompletion();\n            }\n            \n            this.value = this.value.replace(/[^0-9]/g, '');\n        });\n        \n        digit.addEventListener('keydown', function(e) {\n            if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {\n                codeDigits[index - 1].focus();\n            }\n            \n            if (e.key === 'ArrowLeft' && index > 0) {\n                codeDigits[index - 1].focus();\n            }\n            if (e.key === 'ArrowRight' && index < codeDigits.length - 1) {\n                codeDigits[index + 1].focus();\n            }\n        });\n        \n        digit.addEventListener('paste', function(e) {\n            e.preventDefault();\n            const pasteData = e.clipboardData.getData('text').replace(/[^0-9]/g, '');\n            if (pasteData.length === 6) {\n                for (let i = 0; i < 6; i++) {\n                    if (codeDigits[i]) {\n                        codeDigits[i].value = pasteData[i] || '';\n                    }\n                }\n                checkCodeCompletion();\n                codeDigits[5].focus();\n            }\n        });\n    });\n\n    function checkCodeCompletion() {\n        let code = '';\n        codeDigits.forEach(digit => {\n            code += digit.value;\n        });\n        \n        if (code.length === 6) {\n            verifyButton.disabled = false;\n            verifyButton.classList.remove('btn-disabled');\n        } else {\n            verifyButton.disabled = true;\n            verifyButton.classList.add('btn-disabled');\n        }\n    }\n\n    function verifyCode() {\n        let code = '';\n        codeDigits.forEach(digit => {\n            code += digit.value;\n        });\n        \n        if (code.length !== 6) {\n            showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 6-\u0437\u043D\u0430\u0447\u043D\u044B\u0439 \u043A\u043E\u0434.', 'error');\n            return;\n        }\n\n        const originalText = verifyButton.innerHTML;\n        verifyButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430...';\n        verifyButton.disabled = true;\n\n        setTimeout(() => {\n            if (code === '123456') {\n                showAlert('\u0423\u0441\u043F\u0435\u0448\u043D\u0430\u044F \u0432\u0435\u0440\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u044F!', '\u0412\u0430\u0448 email \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D. \u0422\u0435\u043F\u0435\u0440\u044C \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u0432\u0441\u0435\u043C\u0438 \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C\u0438 \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u044B.', 'success', {\n                    autoClose: 3000,\n                    onConfirm: () => {\n                        window.location.href = '/authorization/login/';\n                    }\n                });\n            } else {\n                showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043A\u043E\u0434 \u0438 \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u043D\u043E\u0432\u0430.', 'error');\n                \n                codeDigits.forEach(digit => {\n                    digit.value = '';\n                });\n                codeDigits[0].focus();\n                verifyButton.innerHTML = originalText;\n                verifyButton.disabled = true;\n                verifyButton.classList.add('btn-disabled');\n            }\n        }, 2000);\n    }\n\n    verifyButton.addEventListener('click', verifyCode);\n\n    document.addEventListener('keydown', function(e) {\n        if (e.key === 'Enter') {\n            let code = '';\n            codeDigits.forEach(digit => {\n                code += digit.value;\n            });\n            \n            if (code.length === 6) {\n                verifyCode();\n            }\n        }\n    });\n\n    updateTimer();\n    \n    if (codeDigits.length > 0) {\n        codeDigits[0].focus();\n    }\n}\n\nfunction initPasswordResetCode() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const email = urlParams.get('email') || 'user@example.com';\n    \n    const userEmailElement = document.getElementById('userEmail');\n    if (userEmailElement) {\n        userEmailElement.textContent = email;\n    }\n    \n    let timeLeft = 300;\n    const countdownElement = document.getElementById('countdown');\n    const resendButton = document.getElementById('resendCode');\n    \n    function updateTimer() {\n        const minutes = Math.floor(timeLeft / 60);\n        const seconds = timeLeft % 60;\n        if (countdownElement) {\n            countdownElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n        }\n        \n        if (timeLeft > 0) {\n            timeLeft--;\n            setTimeout(updateTimer, 1000);\n        } else if (resendButton) {\n            resendButton.disabled = false;\n            resendButton.innerHTML = '<i class=\"fas fa-redo\"></i> \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E';\n        }\n    }\n    \n    updateTimer();\n    \n    if (resendButton) {\n        resendButton.addEventListener('click', function() {\n            if (timeLeft <= 0) {\n                timeLeft = 1800;\n                updateTimer();\n                resendButton.disabled = true;\n                resendButton.innerHTML = '<i class=\"fas fa-clock\"></i> \u041A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D';\n                \n                showAlert('\u041A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D', '\u041D\u043E\u0432\u044B\u0439 \u043A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F \u0431\u044B\u043B \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 \u0432\u0430\u0448 email', 'info');\n            }\n        });\n    }\n    \n    const codeDigits = document.querySelectorAll('.code-digit');\n    const verifyButton = document.getElementById('verifyCode');\n    \n    codeDigits.forEach((digit, index) => {\n        digit.addEventListener('input', function() {\n            if (this.value.length === 1 && index < codeDigits.length - 1) {\n                codeDigits[index + 1].focus();\n            }\n            checkCodeCompletion();\n        });\n        \n        digit.addEventListener('keydown', function(e) {\n            if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {\n                codeDigits[index - 1].focus();\n            }\n        });\n    });\n    \n    function checkCodeCompletion() {\n        let code = '';\n        codeDigits.forEach(digit => {\n            code += digit.value;\n        });\n        \n        if (verifyButton) {\n            verifyButton.disabled = code.length !== 6;\n        }\n    }\n    \n    if (verifyButton) {\n        verifyButton.addEventListener('click', function() {\n            let code = '';\n            codeDigits.forEach(digit => {\n                code += digit.value;\n            });\n            \n            if (code.length === 6) {\n                const originalText = verifyButton.innerHTML;\n                verifyButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430...';\n                verifyButton.disabled = true;\n                \n                setTimeout(() => {\n                    window.location.href = '/authorization/create-new-password/?email=' + encodeURIComponent(email); // \u0418\u0441\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043F\u0443\u0442\u044C\n                }, 2000);\n            } else {\n                showAlert('\u041E\u0448\u0438\u0431\u043A\u0430', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 6-\u0437\u043D\u0430\u0447\u043D\u044B\u0439 \u043A\u043E\u0434', 'error');\n            }\n        });\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    if (document.querySelector('.password-reset-code-form')) {\n        initPasswordResetCode();\n    }\n});\n\nfunction initLogout() {\n    let timeLeft = 10;\n    const countdownElement = document.getElementById('countdown');\n    const secondsElement = document.getElementById('seconds');\n    \n    if (!countdownElement || !secondsElement) return;\n\n    function updateTimer() {\n        countdownElement.textContent = timeLeft.toString().padStart(2, '0');\n        secondsElement.textContent = timeLeft;\n        \n        if (timeLeft > 0) {\n            timeLeft--;\n            setTimeout(updateTimer, 1000);\n        } else {\n            window.location.href = '/'; \n        }\n    }\n    \n    updateTimer();\n\n    const userName = \"\u0414\u0435\u043D\u0438\u0441 \u0411\u044B\u043A\u043E\u0432\";\n    const userEmail = \"denizer1305@yandex.ru\";\n    \n    document.getElementById('userName').textContent = userName;\n    document.getElementById('userEmail').textContent = userEmail;\n}\n\nfunction initCreateNewPassword() {\n    const createPasswordForm = document.getElementById('resetPasswordForm');\n    if (!createPasswordForm) return;\n\n    const toggleNewPassword = document.getElementById('toggleNewPassword');\n    const newPasswordInput = document.getElementById('newPassword');\n    const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');\n    const confirmPasswordInput = document.getElementById('confirmPassword');\n    \n    if (toggleNewPassword && newPasswordInput) {\n        toggleNewPassword.addEventListener('click', function() {\n            const type = newPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';\n            newPasswordInput.setAttribute('type', type);\n            this.innerHTML = type === 'password' ? '<i class=\"fas fa-eye\"></i>' : '<i class=\"fas fa-eye-slash\"></i>';\n        });\n    }\n    \n    if (toggleConfirmPassword && confirmPasswordInput) {\n        toggleConfirmPassword.addEventListener('click', function() {\n            const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';\n            confirmPasswordInput.setAttribute('type', type);\n            this.innerHTML = type === 'password' ? '<i class=\"fas fa-eye\"></i>' : '<i class=\"fas fa-eye-slash\"></i>';\n        });\n    }\n\n    function checkPasswordStrength(password) {\n        let strength = 0;\n        const requirements = {\n            length: false,\n            uppercase: false,\n            number: false,\n            special: false\n        };\n        \n        if (password.length >= 8) {\n            strength += 25;\n            requirements.length = true;\n        }\n        \n        if (/[A-Z]/.test(password)) {\n            strength += 25;\n            requirements.uppercase = true;\n        }\n        \n        if (/[0-9]/.test(password)) {\n            strength += 25;\n            requirements.number = true;\n        }\n        \n        if (/[^A-Za-z0-9]/.test(password)) {\n            strength += 25;\n            requirements.special = true;\n        }\n        \n        return { strength, requirements };\n    }\n    \n    function updatePasswordRequirements(requirements) {\n        const lengthReq = document.getElementById('lengthReq');\n        const uppercaseReq = document.getElementById('uppercaseReq');\n        const numberReq = document.getElementById('numberReq');\n        const specialReq = document.getElementById('specialReq');\n        \n        if (lengthReq && requirements.length) {\n            lengthReq.classList.remove('invalid');\n            lengthReq.classList.add('valid');\n            lengthReq.innerHTML = '<i class=\"fas fa-check\"></i> \u041D\u0435 \u043C\u0435\u043D\u0435\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432';\n        } else if (lengthReq) {\n            lengthReq.classList.remove('valid');\n            lengthReq.classList.add('invalid');\n            lengthReq.innerHTML = '<i class=\"fas fa-times\"></i> \u041D\u0435 \u043C\u0435\u043D\u0435\u0435 8 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432';\n        }\n        \n        if (uppercaseReq && requirements.uppercase) {\n            uppercaseReq.classList.remove('invalid');\n            uppercaseReq.classList.add('valid');\n            uppercaseReq.innerHTML = '<i class=\"fas fa-check\"></i> \u0417\u0430\u0433\u043B\u0430\u0432\u043D\u0430\u044F \u0431\u0443\u043A\u0432\u0430';\n        } else if (uppercaseReq) {\n            uppercaseReq.classList.remove('valid');\n            uppercaseReq.classList.add('invalid');\n            uppercaseReq.innerHTML = '<i class=\"fas fa-times\"></i> \u0417\u0430\u0433\u043B\u0430\u0432\u043D\u0430\u044F \u0431\u0443\u043A\u0432\u0430';\n        }\n        \n        if (numberReq && requirements.number) {\n            numberReq.classList.remove('invalid');\n            numberReq.classList.add('valid');\n            numberReq.innerHTML = '<i class=\"fas fa-check\"></i> \u0425\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0430 \u0446\u0438\u0444\u0440\u0430';\n        } else if (numberReq) {\n            numberReq.classList.remove('valid');\n            numberReq.classList.add('invalid');\n            numberReq.innerHTML = '<i class=\"fas fa-times\"></i> \u0425\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0430 \u0446\u0438\u0444\u0440\u0430';\n        }\n        \n        if (specialReq && requirements.special) {\n            specialReq.classList.remove('invalid');\n            specialReq.classList.add('valid');\n            specialReq.innerHTML = '<i class=\"fas fa-check\"></i> \u0421\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0438\u043C\u0432\u043E\u043B';\n        } else if (specialReq) {\n            specialReq.classList.remove('valid');\n            specialReq.classList.add('invalid');\n            specialReq.innerHTML = '<i class=\"fas fa-times\"></i> \u0421\u043F\u0435\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0438\u043C\u0432\u043E\u043B';\n        }\n    }\n    \n    function updatePasswordStrengthBar(strength) {\n        const strengthBar = document.getElementById('passwordStrengthBar');\n        if (!strengthBar) return;\n        \n        strengthBar.className = 'password-strength-bar';\n        \n        if (strength <= 25) {\n            strengthBar.classList.add('strength-weak');\n        } else if (strength <= 50) {\n            strengthBar.classList.add('strength-fair');\n        } else if (strength <= 75) {\n            strengthBar.classList.add('strength-good');\n        } else {\n            strengthBar.classList.add('strength-strong');\n        }\n    }\n    \n    function checkPasswordMatch() {\n        const newPassword = newPasswordInput ? newPasswordInput.value : '';\n        const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value : '';\n        const passwordMatch = document.getElementById('passwordMatch');\n        \n        if (!passwordMatch) return false;\n        \n        if (confirmPassword.length > 0) {\n            if (newPassword === confirmPassword) {\n                passwordMatch.style.display = 'none';\n                return true;\n            } else {\n                passwordMatch.style.display = 'block';\n                return false;\n            }\n        } else {\n            passwordMatch.style.display = 'none';\n            return false;\n        }\n    }\n\n    function updateSubmitButton() {\n        const newPassword = newPasswordInput ? newPasswordInput.value : '';\n        const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value : '';\n        const submitButton = document.getElementById('submitButton');\n        \n        if (!submitButton) return;\n        \n        const { strength, requirements } = checkPasswordStrength(newPassword);\n        const passwordsMatch = checkPasswordMatch();\n        \n        const allRequirementsMet = requirements.length && requirements.uppercase && \n                                  requirements.number && requirements.special;\n        \n        if (allRequirementsMet && passwordsMatch && newPassword.length > 0 && confirmPassword.length > 0) {\n            submitButton.disabled = false;\n            submitButton.classList.remove('btn-disabled');\n        } else {\n            submitButton.disabled = true;\n            submitButton.classList.add('btn-disabled');\n        }\n    }\n    \n    if (newPasswordInput) {\n        newPasswordInput.addEventListener('input', function() {\n            const password = this.value;\n            const { strength, requirements } = checkPasswordStrength(password);\n            \n            updatePasswordStrengthBar(strength);\n            updatePasswordRequirements(requirements);\n            updateSubmitButton();\n        });\n    }\n    \n    if (confirmPasswordInput) {\n        confirmPasswordInput.addEventListener('input', function() {\n            updateSubmitButton();\n        });\n    }\n    \n    if (createPasswordForm) {\n        createPasswordForm.addEventListener('submit', function(e) {\n            e.preventDefault();\n            \n            const newPassword = newPasswordInput ? newPasswordInput.value : '';\n            const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value : '';\n            const submitButton = document.getElementById('submitButton');\n            \n            if (!submitButton) return;\n            \n            const originalText = submitButton.innerHTML;\n            submitButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435...';\n            submitButton.disabled = true;\n            \n            setTimeout(() => {\n                showAlert('\u041F\u0430\u0440\u043E\u043B\u044C \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D!', '\u0412\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C \u0431\u044B\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D. \u0422\u0435\u043F\u0435\u0440\u044C \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443 \u0441 \u043D\u043E\u0432\u044B\u043C \u043F\u0430\u0440\u043E\u043B\u0435\u043C.', 'success', {\n                    autoClose: 3000,\n                    onConfirm: () => {\n                        window.location.href = '/authorization/login/';\n                    }\n                });\n                submitButton.innerHTML = originalText;\n                submitButton.disabled = false;\n            }, 2000);\n        });\n    }\n}", "export function initAttendance() {\n    console.log('Initializing attendance module...');\n    \n    // User data\n    const userName = \"\";\n    const userEmail = \"\";\n    \n    document.getElementById('userName').textContent = userName;\n\n    // Initialize all attendance functionality\n    initAttendanceModal();\n    initDayDetailsModal();\n    initStatisticsModals();\n    initBulkActions();\n    initDateNavigation();\n    initCalendarDays();\n}\n\nfunction initAttendanceModal() {\n    const attendanceModal = document.getElementById('attendanceModal');\n    const closeModal = document.getElementById('closeModal');\n    const cancelAttendance = document.getElementById('cancelAttendance');\n    const saveAttendance = document.getElementById('saveAttendance');\n    const statusOptions = document.querySelectorAll('.status-option');\n    const attendanceCells = document.querySelectorAll('.attendance-status');\n    \n    let currentStudent = null;\n    let currentDate = null;\n    let selectedStatus = null;\n\n    if (!attendanceModal || !closeModal || !cancelAttendance || !saveAttendance) {\n        console.log('Some attendance modal elements not found');\n        return;\n    }\n\n    // Open modal when clicking on an attendance cell\n    attendanceCells.forEach(cell => {\n        cell.addEventListener('click', function() {\n            const studentId = this.getAttribute('data-student');\n            const date = this.getAttribute('data-date');\n            \n            const studentName = getStudentName(studentId);\n            const formattedDate = formatDate(date);\n            \n            document.getElementById('studentDateInfo').textContent = \n                `\u0421\u0442\u0443\u0434\u0435\u043D\u0442: ${studentName} \u2022 \u0414\u0430\u0442\u0430: ${formattedDate}`;\n            \n            currentStudent = studentId;\n            currentDate = date;\n            \n            // Set current status if exists\n            const currentStatus = this.querySelector('.status-badge').className;\n            if (currentStatus.includes('status-present')) {\n                selectedStatus = 'present';\n            } else if (currentStatus.includes('status-absent')) {\n                selectedStatus = 'absent';\n            } else if (currentStatus.includes('status-late')) {\n                selectedStatus = 'late';\n            } else if (currentStatus.includes('status-excused')) {\n                selectedStatus = 'excused';\n            }\n            \n            // Highlight current status\n            statusOptions.forEach(option => {\n                option.classList.remove('selected');\n                if (option.getAttribute('data-status') === selectedStatus) {\n                    option.classList.add('selected');\n                }\n            });\n            \n            attendanceModal.classList.add('active');\n        });\n    });\n\n    // Close modal\n    function closeAttendanceModal() {\n        attendanceModal.classList.remove('active');\n        selectedStatus = null;\n        statusOptions.forEach(option => {\n            option.classList.remove('selected');\n        });\n    }\n\n    closeModal.addEventListener('click', closeAttendanceModal);\n    cancelAttendance.addEventListener('click', closeAttendanceModal);\n\n    // Select status\n    statusOptions.forEach(option => {\n        option.addEventListener('click', function() {\n            statusOptions.forEach(opt => opt.classList.remove('selected'));\n            this.classList.add('selected');\n            selectedStatus = this.getAttribute('data-status');\n        });\n    });\n\n    // Save attendance\n    saveAttendance.addEventListener('click', function() {\n        if (selectedStatus !== null) {\n            console.log(`Saving attendance ${selectedStatus} for student ${currentStudent}, date ${currentDate}`);\n            \n            const targetCell = document.querySelector(`.attendance-status[data-student=\"${currentStudent}\"][data-date=\"${currentDate}\"]`);\n            if (targetCell) {\n                const statusBadge = targetCell.querySelector('.status-badge');\n                \n                if (selectedStatus === 'present') {\n                    statusBadge.textContent = '0';\n                    statusBadge.className = 'status-badge status-present';\n                } else if (selectedStatus === 'absent') {\n                    statusBadge.textContent = '2';\n                    statusBadge.className = 'status-badge status-absent';\n                } else if (selectedStatus === 'late') {\n                    statusBadge.textContent = '1';\n                    statusBadge.className = 'status-badge status-late';\n                } else if (selectedStatus === 'excused') {\n                    statusBadge.textContent = '\u0423\u0432\u0430\u0436.';\n                    statusBadge.className = 'status-badge status-excused';\n                }\n            }\n            \n            closeAttendanceModal();\n        } else {\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441 \u043F\u043E\u0441\u0435\u0449\u0430\u0435\u043C\u043E\u0441\u0442\u0438');\n        }\n    });\n}\n\nfunction initDayDetailsModal() {\n    const dayDetailsModal = document.getElementById('dayDetailsModal');\n    const closeDayDetailsModal = document.getElementById('closeDayDetailsModal');\n    const modalDayDate = document.getElementById('modalDayDate');\n    const lateList = document.getElementById('lateList');\n    const absentList = document.getElementById('absentList');\n    const presentList = document.getElementById('presentList');\n    \n    if (!dayDetailsModal || !closeDayDetailsModal || !modalDayDate) {\n        console.log('Some day details modal elements not found');\n        return;\n    }\n\n    // Mock \u0434\u0430\u043D\u043D\u044B\u0435 \u043E \u043F\u043E\u0441\u0435\u0449\u0430\u0435\u043C\u043E\u0441\u0442\u0438 \u043F\u043E \u0434\u043D\u044F\u043C\n    const attendanceByDay = {\n        '2024-01-01': { \n            late: [], \n            absent: [], \n            present: [\n                { id: 1, name: '\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432', avatar: '\u0418\u0418' },\n                { id: 2, name: '\u041C\u0430\u0440\u0438\u044F \u041F\u0435\u0442\u0440\u043E\u0432\u0430', avatar: '\u041C\u041F' },\n            ]\n        },\n    };\n\n    function renderStudentList(container, students) {\n        if (!container) return;\n        \n        container.innerHTML = '';\n        \n        if (students.length === 0) {\n            container.innerHTML = '<div class=\"no-data\">\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445</div>';\n            return;\n        }\n        \n        students.forEach(student => {\n            const studentItem = document.createElement('div');\n            studentItem.className = 'student-item';\n            studentItem.innerHTML = `\n                <div class=\"student-avatar-small\">${student.avatar}</div>\n                <div class=\"student-name\">${student.name}</div>\n            `;\n            container.appendChild(studentItem);\n        });\n    }\n\n    function getDayType(dayElement) {\n        const indicators = dayElement.querySelectorAll('.attendance-indicator');\n        let hasRed = false;\n        let hasYellow = false;\n        let hasGreen = false;\n        \n        indicators.forEach(indicator => {\n            if (indicator.classList.contains('indicator-poor')) hasRed = true;\n            if (indicator.classList.contains('indicator-average')) hasYellow = true;\n            if (indicator.classList.contains('indicator-good')) hasGreen = true;\n        });\n        \n        if (hasRed && hasYellow) return 'both';\n        if (hasRed) return 'absent';\n        if (hasYellow) return 'late';\n        if (hasGreen) return 'present';\n        return 'none';\n    }\n\n    function openDayDetailsModal(date, dayNumber, dayElement) {\n        const dateString = `${dayNumber} \u044F\u043D\u0432\u0430\u0440\u044F 2024`;\n        modalDayDate.textContent = dateString;\n        \n        const dayData = attendanceByDay[date] || { late: [], absent: [], present: [] };\n        const dayType = getDayType(dayElement);\n        \n        if (lateList) lateList.style.display = 'none';\n        if (absentList) absentList.style.display = 'none';\n        if (presentList) presentList.style.display = 'none';\n        \n        switch(dayType) {\n            case 'absent':\n                if (absentList) {\n                    absentList.style.display = 'block';\n                    renderStudentList(absentList, dayData.absent);\n                }\n                break;\n            case 'late':\n                if (lateList) {\n                    lateList.style.display = 'block';\n                    renderStudentList(lateList, dayData.late);\n                }\n                break;\n            case 'present':\n                if (presentList) {\n                    presentList.style.display = 'block';\n                    presentList.innerHTML = '<div class=\"no-data\">\u0412\u0441\u0435 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u043F\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u043B\u0438</div>';\n                }\n                break;\n            case 'both':\n                if (lateList) {\n                    lateList.style.display = 'block';\n                    renderStudentList(lateList, dayData.late);\n                }\n                if (absentList) {\n                    absentList.style.display = 'block';\n                    renderStudentList(absentList, dayData.absent);\n                }\n                break;\n            default:\n                if (lateList) {\n                    lateList.style.display = 'block';\n                    renderStudentList(lateList, dayData.late);\n                }\n                if (absentList) {\n                    absentList.style.display = 'block';\n                    renderStudentList(absentList, dayData.absent);\n                }\n                if (presentList) {\n                    presentList.style.display = 'block';\n                    renderStudentList(presentList, dayData.present);\n                }\n        }\n        \n        dayDetailsModal.classList.add('active');\n    }\n\n    function closeDayDetailsModalFunc() {\n        dayDetailsModal.classList.remove('active');\n    }\n\n    // Add event listeners to calendar days\n    const calendarDays = document.querySelectorAll('.calendar-day');\n    calendarDays.forEach(day => {\n        if (day.classList.contains('other-month')) return;\n        \n        day.style.cursor = 'pointer';\n        \n        day.addEventListener('click', function() {\n            const dayNumber = this.querySelector('.day-number').textContent.trim();\n            const date = `2024-01-${dayNumber.padStart(2, '0')}`;\n            openDayDetailsModal(date, dayNumber, this);\n        });\n    });\n\n    if (closeDayDetailsModal) {\n        closeDayDetailsModal.addEventListener('click', closeDayDetailsModalFunc);\n    }\n\n    dayDetailsModal.addEventListener('click', function(e) {\n        if (e.target === dayDetailsModal) {\n            closeDayDetailsModalFunc();\n        }\n    });\n}\n\nfunction initStatisticsModals() {\n    const bestAttendanceModal = document.getElementById('bestAttendanceModal');\n    const worstAttendanceModal = document.getElementById('worstAttendanceModal');\n    const problemSubjectModal = document.getElementById('problemSubjectModal');\n    const monthlyTrendModal = document.getElementById('monthlyTrendModal');\n    \n    // Functions to open modals\n    function openBestAttendanceModal() {\n        if (bestAttendanceModal) bestAttendanceModal.classList.add('active');\n    }\n    \n    function openWorstAttendanceModal() {\n        if (worstAttendanceModal) worstAttendanceModal.classList.add('active');\n    }\n    \n    function openProblemSubjectModal() {\n        if (problemSubjectModal) problemSubjectModal.classList.add('active');\n    }\n    \n    function openMonthlyTrendModal() {\n        if (monthlyTrendModal) monthlyTrendModal.classList.add('active');\n    }\n    \n    // Functions to close modals\n    function closeBestAttendanceModalFunc() {\n        if (bestAttendanceModal) bestAttendanceModal.classList.remove('active');\n    }\n    \n    function closeWorstAttendanceModalFunc() {\n        if (worstAttendanceModal) worstAttendanceModal.classList.remove('active');\n    }\n    \n    function closeProblemSubjectModalFunc() {\n        if (problemSubjectModal) problemSubjectModal.classList.remove('active');\n    }\n    \n    function closeMonthlyTrendModalFunc() {\n        if (monthlyTrendModal) monthlyTrendModal.classList.remove('active');\n    }\n    \n    // Add event listeners to summary items\n    const summaryItems = document.querySelectorAll('.summary-item');\n    summaryItems.forEach((item, index) => {\n        item.addEventListener('click', function() {\n            switch(index) {\n                case 0: openBestAttendanceModal(); break;\n                case 1: openWorstAttendanceModal(); break;\n                case 2: openProblemSubjectModal(); break;\n                case 3: openMonthlyTrendModal(); break;\n            }\n        });\n    });\n    \n    // Add close event listeners\n    const closeButtons = [\n        { id: 'closeBestAttendanceModal', func: closeBestAttendanceModalFunc },\n        { id: 'closeBestAttendanceBtn', func: closeBestAttendanceModalFunc },\n        { id: 'closeWorstAttendanceModal', func: closeWorstAttendanceModalFunc },\n        { id: 'closeWorstAttendanceBtn', func: closeWorstAttendanceModalFunc },\n        { id: 'closeProblemSubjectModal', func: closeProblemSubjectModalFunc },\n        { id: 'closeProblemSubjectBtn', func: closeProblemSubjectModalFunc },\n        { id: 'closeMonthlyTrendModal', func: closeMonthlyTrendModalFunc },\n        { id: 'closeMonthlyTrendBtn', func: closeMonthlyTrendModalFunc }\n    ];\n    \n    closeButtons.forEach(({ id, func }) => {\n        const element = document.getElementById(id);\n        if (element) element.addEventListener('click', func);\n    });\n    \n    // Close on overlay click\n    [bestAttendanceModal, worstAttendanceModal, problemSubjectModal, monthlyTrendModal].forEach(modal => {\n        if (modal) {\n            modal.addEventListener('click', function(e) {\n                if (e.target === modal) {\n                    const closeFuncs = {\n                        'bestAttendanceModal': closeBestAttendanceModalFunc,\n                        'worstAttendanceModal': closeWorstAttendanceModalFunc,\n                        'problemSubjectModal': closeProblemSubjectModalFunc,\n                        'monthlyTrendModal': closeMonthlyTrendModalFunc\n                    };\n                    closeFuncs[modal.id]?.();\n                }\n            });\n        }\n    });\n}\n\nfunction initBulkActions() {\n    const bulkActions = document.querySelectorAll('.bulk-action');\n    \n    bulkActions.forEach(action => {\n        action.addEventListener('click', function() {\n            const actionId = this.id;\n            \n            if (actionId === 'markAllPresent') {\n                if (confirm('\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435\u0445 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432 \u043A\u0430\u043A \u043F\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u043D\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0434\u0430\u0442\u0443?')) {\n                    alert('\u0412\u0441\u0435 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u043E\u0442\u043C\u0435\u0447\u0435\u043D\u044B \u043A\u0430\u043A \u043F\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435');\n                }\n            } else if (actionId === 'markAllAbsent') {\n                if (confirm('\u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u0432\u0441\u0435\u0445 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432 \u043A\u0430\u043A \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u043D\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0434\u0430\u0442\u0443?')) {\n                    alert('\u0412\u0441\u0435 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u043E\u0442\u043C\u0435\u0447\u0435\u043D\u044B \u043A\u0430\u043A \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435');\n                }\n            } else if (actionId === 'exportData') {\n                alert('\u0414\u0430\u043D\u043D\u044B\u0435 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 Excel');\n            } else if (actionId === 'generateReport') {\n                alert('\u041E\u0442\u0447\u0435\u0442 \u043E \u043F\u043E\u0441\u0435\u0449\u0430\u0435\u043C\u043E\u0441\u0442\u0438 \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D');\n            }\n        });\n    });\n}\n\nfunction initDateNavigation() {\n    const prevBtn = document.querySelector('.nav-btn:first-child');\n    const nextBtn = document.querySelector('.nav-btn:last-child');\n    const currentDateElement = document.querySelector('.current-date');\n    \n    if (!prevBtn || !nextBtn || !currentDateElement) return;\n\n    let currentMonth = 0;\n    let currentYear = 2024;\n    \n    const months = [\n        '\u042F\u043D\u0432\u0430\u0440\u044C', '\u0424\u0435\u0432\u0440\u0430\u043B\u044C', '\u041C\u0430\u0440\u0442', '\u0410\u043F\u0440\u0435\u043B\u044C', '\u041C\u0430\u0439', '\u0418\u044E\u043D\u044C',\n        '\u0418\u044E\u043B\u044C', '\u0410\u0432\u0433\u0443\u0441\u0442', '\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C', '\u041E\u043A\u0442\u044F\u0431\u0440\u044C', '\u041D\u043E\u044F\u0431\u0440\u044C', '\u0414\u0435\u043A\u0430\u0431\u0440\u044C'\n    ];\n    \n    function updateCalendar() {\n        currentDateElement.textContent = `${months[currentMonth]} ${currentYear}`;\n    }\n    \n    prevBtn.addEventListener('click', function() {\n        currentMonth--;\n        if (currentMonth < 0) {\n            currentMonth = 11;\n            currentYear--;\n        }\n        updateCalendar();\n    });\n    \n    nextBtn.addEventListener('click', function() {\n        currentMonth++;\n        if (currentMonth > 11) {\n            currentMonth = 0;\n            currentYear++;\n        }\n        updateCalendar();\n    });\n}\n\nfunction initCalendarDays() {\n    const calendarDays = document.querySelectorAll('.calendar-day');\n    calendarDays.forEach(day => {\n        if (!day.classList.contains('other-month')) {\n            day.style.cursor = 'pointer';\n        }\n    });\n}\n\nfunction getStudentName(studentId) {\n    const students = {\n        '1': '\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432',\n        '2': '\u041C\u0430\u0440\u0438\u044F \u041F\u0435\u0442\u0440\u043E\u0432\u0430',\n        '3': '\u0410\u043B\u0435\u043A\u0441\u0435\u0439 \u0421\u0438\u0434\u043E\u0440\u043E\u0432',\n        '4': '\u0415\u043B\u0435\u043D\u0430 \u041D\u043E\u0432\u0438\u043A\u043E\u0432\u0430',\n        '5': '\u0414\u043C\u0438\u0442\u0440\u0438\u0439 \u041A\u043E\u0437\u043B\u043E\u0432'\n    };\n    return students[studentId] || '\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u0441\u0442\u0443\u0434\u0435\u043D\u0442';\n}\n\nfunction formatDate(dateString) {\n    try {\n        const date = new Date(dateString);\n        const options = { day: 'numeric', month: 'long', year: 'numeric' };\n        return date.toLocaleDateString('ru-RU', options);\n    } catch (e) {\n        return dateString;\n    }\n}", "// modules/progress.js\nexport function initProgress() {\n    // User data\n    const userName = \"\u0415\u043B\u0435\u043D\u0430 \u041F\u043B\u0435\u0445\u0430\u043D\u043E\u0432\u0430\";\n    const userEmail = \"elena.plekhanova@example.com\";\n    \n    document.getElementById('userName').textContent = userName;\n    \n    // Generate avatar initials\n    const nameParts = userName.split(' ');\n    const initials = nameParts.map(part => part[0]).join('').toUpperCase();\n    document.getElementById('userAvatar').textContent = initials;\n\n    // Progress functionality\n    // Period navigation\n    const prevBtn = document.querySelector('.period-navigation .nav-btn:first-child');\n    const nextBtn = document.querySelector('.period-navigation .nav-btn:last-child');\n    const currentPeriodElement = document.querySelector('.current-period');\n    \n    const periods = ['I \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C', 'II \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C', 'III \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C', 'IV \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C'];\n    let currentPeriodIndex = 0;\n    \n    function updatePeriod() {\n        currentPeriodElement.textContent = periods[currentPeriodIndex];\n        updateChart();\n    }\n    \n    prevBtn.addEventListener('click', function() {\n        currentPeriodIndex--;\n        if (currentPeriodIndex < 0) {\n            currentPeriodIndex = periods.length - 1;\n        }\n        updatePeriod();\n    });\n    \n    nextBtn.addEventListener('click', function() {\n        currentPeriodIndex++;\n        if (currentPeriodIndex >= periods.length) {\n            currentPeriodIndex = 0;\n        }\n        updatePeriod();\n    });\n\n    // Action buttons functionality\n    const actionButtons = document.querySelectorAll('.action-btn');\n    \n    actionButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            const icon = this.querySelector('i');\n            \n            if (icon.classList.contains('fa-chart-line')) {\n                alert('\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u044C\u043D\u0443\u044E \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0443 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430');\n            } else if (icon.classList.contains('fa-envelope')) {\n                alert('\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0443');\n            }\n        });\n    });\n\n    // Chart functionality\n    let performanceChart = null;\n    const chartTypeButtons = document.querySelectorAll('.chart-type-btn');\n    const chartPeriodSelect = document.getElementById('chartPeriod');\n    \n    // Initialize chart\n    function initChart() {\n        const ctx = document.getElementById('performanceChart').getContext('2d');\n        const activeType = document.querySelector('.chart-type-btn.active').getAttribute('data-type');\n        \n        if (performanceChart) {\n            performanceChart.destroy();\n        }\n        \n        const { labels, datasets } = getChartData(chartPeriodSelect.value, activeType);\n        \n        performanceChart = new Chart(ctx, {\n            type: activeType,\n            data: {\n                labels: labels,\n                datasets: datasets\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: {\n                        position: 'top',\n                    },\n                    title: {\n                        display: true,\n                        text: '\u0414\u0438\u043D\u0430\u043C\u0438\u043A\u0430 \u0443\u0441\u043F\u0435\u0432\u0430\u0435\u043C\u043E\u0441\u0442\u0438 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432'\n                    }\n                },\n                scales: activeType === 'radar' ? {\n                    r: {\n                        angleLines: {\n                            display: true\n                        },\n                        suggestedMin: 0,\n                        suggestedMax: 5\n                    }\n                } : {\n                    y: {\n                        beginAtZero: true,\n                        max: 5,\n                        title: {\n                            display: true,\n                            text: '\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0431\u0430\u043B\u043B'\n                        }\n                    },\n                    x: {\n                        title: {\n                            display: true,\n                            text: '\u041F\u0435\u0440\u0438\u043E\u0434 \u043E\u0431\u0443\u0447\u0435\u043D\u0438\u044F'\n                        }\n                    }\n                }\n            }\n        });\n    }\n    \n    function getChartData(period, type) {\n        let labels = [];\n        let datasets = [];\n        \n        if (period === '\u0417\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u043C\u0435\u0441\u044F\u0446') {\n            labels = ['\u041D\u0435\u0434\u0435\u043B\u044F 1', '\u041D\u0435\u0434\u0435\u043B\u044F 2', '\u041D\u0435\u0434\u0435\u043B\u044F 3', '\u041D\u0435\u0434\u0435\u043B\u044F 4'];\n            \n            datasets = [\n                {\n                    label: '\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432',\n                    data: [4.2, 4.3, 4.5, 4.6],\n                    borderColor: '#4A6FA5',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(74, 111, 165, 0.5)',\n                    tension: 0.4\n                },\n                {\n                    label: '\u041C\u0430\u0440\u0438\u044F \u041F\u0435\u0442\u0440\u043E\u0432\u0430',\n                    data: [4.8, 4.9, 4.9, 5.0],\n                    borderColor: '#2ECC71',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(46, 204, 113, 0.5)',\n                    tension: 0.4\n                },\n                {\n                    label: '\u0410\u043B\u0435\u043A\u0441\u0435\u0439 \u0421\u0438\u0434\u043E\u0440\u043E\u0432',\n                    data: [2.8, 3.0, 2.9, 3.0],\n                    borderColor: '#E74C3C',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(231, 76, 60, 0.5)',\n                    tension: 0.4\n                }\n            ];\n        } else if (period === '\u0417\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435 3 \u043C\u0435\u0441\u044F\u0446\u0430') {\n            labels = ['\u042F\u043D\u0432\u0430\u0440\u044C', '\u0424\u0435\u0432\u0440\u0430\u043B\u044C', '\u041C\u0430\u0440\u0442'];\n            \n            datasets = [\n                {\n                    label: '\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0431\u0430\u043B\u043B \u043A\u043B\u0430\u0441\u0441\u0430',\n                    data: [3.9, 4.1, 4.2],\n                    borderColor: '#4A6FA5',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(74, 111, 165, 0.5)',\n                    tension: 0.4\n                },\n                {\n                    label: '\u041B\u0443\u0447\u0448\u0438\u0439 \u0443\u0447\u0435\u043D\u0438\u043A',\n                    data: [4.7, 4.8, 5.0],\n                    borderColor: '#2ECC71',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(46, 204, 113, 0.5)',\n                    tension: 0.4\n                },\n                {\n                    label: '\u0425\u0443\u0434\u0448\u0438\u0439 \u0443\u0447\u0435\u043D\u0438\u043A',\n                    data: [2.8, 3.0, 3.0],\n                    borderColor: '#E74C3C',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(231, 76, 60, 0.5)',\n                    tension: 0.4\n                }\n            ];\n        } else if (period === '\u0417\u0430 \u0443\u0447\u0435\u0431\u043D\u044B\u0439 \u0433\u043E\u0434') {\n            labels = ['\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C', '\u041E\u043A\u0442\u044F\u0431\u0440\u044C', '\u041D\u043E\u044F\u0431\u0440\u044C', '\u0414\u0435\u043A\u0430\u0431\u0440\u044C', '\u042F\u043D\u0432\u0430\u0440\u044C', '\u0424\u0435\u0432\u0440\u0430\u043B\u044C', '\u041C\u0430\u0440\u0442', '\u0410\u043F\u0440\u0435\u043B\u044C', '\u041C\u0430\u0439'];\n            \n            datasets = [\n                {\n                    label: '\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u0431\u0430\u043B\u043B \u043A\u043B\u0430\u0441\u0441\u0430',\n                    data: [3.6, 3.7, 3.8, 3.9, 4.0, 4.1, 4.2, 4.2, 4.3],\n                    borderColor: '#4A6FA5',\n                    backgroundColor: type === 'line' || type === 'radar' ? 'transparent' : 'rgba(74, 111, 165, 0.5)',\n                    tension: 0.4\n                }\n            ];\n        }\n        \n        return { labels, datasets };\n    }\n    \n    chartTypeButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            chartTypeButtons.forEach(btn => btn.classList.remove('active'));\n            this.classList.add('active');\n            updateChart();\n        });\n    });\n    \n    chartPeriodSelect.addEventListener('change', updateChart);\n    \n    function updateChart() {\n        initChart();\n    }\n    \n    initChart();\n}", "export function initStatistics() {\n    console.log('Initializing statistics module...');\n    \n    // User data\n    const userName = \"\u0415\u043B\u0435\u043D\u0430 \u041F\u043B\u0435\u0445\u0430\u043D\u043E\u0432\u0430\";\n    const userEmail = \"\";\n    \n    document.getElementById('userName').textContent = userName;\n\n    // Initialize all statistics functionality\n    initStatisticsCharts();\n    initExportFunctionality();\n}\n\nfunction initStatisticsCharts() {\n    // Grades Distribution Chart (Doughnut)\n    const gradesCtx = document.getElementById('gradesDistributionChart');\n    if (gradesCtx) {\n        window.gradesChart = new Chart(gradesCtx.getContext('2d'), {\n            type: 'doughnut',\n            data: {\n                labels: ['\u041E\u0442\u043B\u0438\u0447\u043D\u043E (5)', '\u0425\u043E\u0440\u043E\u0448\u043E (4)', '\u0423\u0434\u043E\u0432\u043B\u0435\u0442\u0432\u043E\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E (3)', '\u041D\u0435\u0443\u0434\u043E\u0432\u043B\u0435\u0442\u0432\u043E\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E (2)'],\n                datasets: [{\n                    data: [45, 35, 15, 5],\n                    backgroundColor: ['#2ECC71', '#3498DB', '#F39C12', '#E74C3C'],\n                    borderWidth: 2,\n                    borderColor: '#fff'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: { legend: { position: 'bottom' } }\n            }\n        });\n    }\n\n    // Courses Progress Chart (Bar)\n    const coursesCtx = document.getElementById('coursesProgressChart');\n    if (coursesCtx) {\n        window.coursesChart = new Chart(coursesCtx.getContext('2d'), {\n            type: 'bar',\n            data: {\n                labels: ['\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435', '\u041C\u0430\u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0430', '\u0424\u0438\u0437\u0438\u043A\u0430', 'WEB-\u0442\u0435\u0445\u043D\u043E\u043B\u043E\u0433\u0438\u0438', '\u0411\u0430\u0437\u044B \u0434\u0430\u043D\u043D\u044B\u0445'],\n                datasets: [{\n                    label: '\u0421\u0440\u0435\u0434\u043D\u0438\u0439 \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441 (%)',\n                    data: [78, 65, 52, 71, 58],\n                    backgroundColor: 'rgba(74, 111, 165, 0.7)',\n                    borderColor: 'rgba(74, 111, 165, 1)',\n                    borderWidth: 1\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    y: { beginAtZero: true, max: 100 }\n                }\n            }\n        });\n    }\n\n    // Activity Chart (Line)\n    const activityCtx = document.getElementById('activityChart');\n    if (activityCtx) {\n        window.activityChart = new Chart(activityCtx.getContext('2d'), {\n            type: 'line',\n            data: {\n                labels: ['\u041F\u043D', '\u0412\u0442', '\u0421\u0440', '\u0427\u0442', '\u041F\u0442', '\u0421\u0431', '\u0412\u0441'],\n                datasets: [{\n                    label: '\u0410\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432',\n                    data: [65, 75, 70, 80, 60, 55, 45],\n                    borderColor: '#4A6FA5',\n                    backgroundColor: 'rgba(74, 111, 165, 0.1)',\n                    borderWidth: 3,\n                    tension: 0.3,\n                    fill: true\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                scales: {\n                    y: { beginAtZero: true, max: 100 }\n                }\n            }\n        });\n    }\n\n    // Assignments Chart (Pie)\n    const assignmentsCtx = document.getElementById('assignmentsChart');\n    if (assignmentsCtx) {\n        window.assignmentsChart = new Chart(assignmentsCtx.getContext('2d'), {\n            type: 'pie',\n            data: {\n                labels: ['\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u043E', '\u0412 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435', '\u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043E', '\u041D\u0435 \u043D\u0430\u0447\u0430\u0442\u043E'],\n                datasets: [{\n                    data: [65, 20, 5, 10],\n                    backgroundColor: ['#2ECC71', '#F39C12', '#E74C3C', '#8A8A9F'],\n                    borderWidth: 2,\n                    borderColor: '#fff'\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: { legend: { position: 'bottom' } }\n            }\n        });\n    }\n}", "export function initExport() {\n    const exportScheduleBtn = document.getElementById('exportScheduleBtn');\n    const exportScheduleModal = document.getElementById('exportScheduleModal');\n    const cancelScheduleExport = document.getElementById('cancelScheduleExport');\n    const confirmScheduleExport = document.getElementById('confirmScheduleExport');\n    const exportContent = document.getElementById('exportContent');\n    const printContent = document.getElementById('printContent');\n    const exportDate = document.getElementById('exportDate');\n    const exportTeacher = document.getElementById('exportTeacher');\n    const exportPeriod = document.getElementById('exportPeriod');\n    const exportScheduleView = document.getElementById('exportScheduleView');\n    const exportEventsBody = document.getElementById('exportEventsBody');\n    const exportUpcomingBody = document.getElementById('exportUpcomingBody');\n    const exportScheduleLoading = document.getElementById('exportScheduleLoading');\n    \n    function setExportData() {\n        const now = new Date();\n        exportDate.textContent = now.toLocaleDateString('ru-RU', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n        exportTeacher.textContent = userName;\n        \n        if (currentView === 'month') {\n            const monthNames = [\n                '\u042F\u043D\u0432\u0430\u0440\u044C', '\u0424\u0435\u0432\u0440\u0430\u043B\u044C', '\u041C\u0430\u0440\u0442', '\u0410\u043F\u0440\u0435\u043B\u044C', '\u041C\u0430\u0439', '\u0418\u044E\u043D\u044C',\n                '\u0418\u044E\u043B\u044C', '\u0410\u0432\u0433\u0443\u0441\u0442', '\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C', '\u041E\u043A\u0442\u044F\u0431\u0440\u044C', '\u041D\u043E\u044F\u0431\u0440\u044C', '\u0414\u0435\u043A\u0430\u0431\u0440\u044C'\n            ];\n            exportPeriod.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;\n        } else if (currentView === 'week') {\n            const weekStart = new Date(currentDate);\n            weekStart.setDate(currentDate.getDate() - currentDate.getDay() + 1);\n            \n            const weekEnd = new Date(weekStart);\n            weekEnd.setDate(weekStart.getDate() + 6);\n            \n            const monthNames = [\n                '\u044F\u043D\u0432\u0430\u0440\u044F', '\u0444\u0435\u0432\u0440\u0430\u043B\u044F', '\u043C\u0430\u0440\u0442\u0430', '\u0430\u043F\u0440\u0435\u043B\u044F', '\u043C\u0430\u044F', '\u0438\u044E\u043D\u044F',\n                '\u0438\u044E\u043B\u044F', '\u0430\u0432\u0433\u0443\u0441\u0442\u0430', '\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F', '\u043E\u043A\u0442\u044F\u0431\u0440\u044F', '\u043D\u043E\u044F\u0431\u0440\u044F', '\u0434\u0435\u043A\u0430\u0431\u0440\u044F'\n            ];\n            \n            exportPeriod.textContent = `${weekStart.getDate()} ${monthNames[weekStart.getMonth()]} - ${weekEnd.getDate()} ${monthNames[weekEnd.getMonth()]} ${weekEnd.getFullYear()}`;\n        } else if (currentView === 'day') {\n            const monthNames = [\n                '\u044F\u043D\u0432\u0430\u0440\u044F', '\u0444\u0435\u0432\u0440\u0430\u043B\u044F', '\u043C\u0430\u0440\u0442\u0430', '\u0430\u043F\u0440\u0435\u043B\u044F', '\u043C\u0430\u044F', '\u0438\u044E\u043D\u044F',\n                '\u0438\u044E\u043B\u044F', '\u0430\u0432\u0433\u0443\u0441\u0442\u0430', '\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F', '\u043E\u043A\u0442\u044F\u0431\u0440\u044F', '\u043D\u043E\u044F\u0431\u0440\u044F', '\u0434\u0435\u043A\u0430\u0431\u0440\u044F'\n            ];\n            const dayNames = ['\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435', '\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A', '\u0412\u0442\u043E\u0440\u043D\u0438\u043A', '\u0421\u0440\u0435\u0434\u0430', '\u0427\u0435\u0442\u0432\u0435\u0440\u0433', '\u041F\u044F\u0442\u043D\u0438\u0446\u0430', '\u0421\u0443\u0431\u0431\u043E\u0442\u0430'];\n            \n            exportPeriod.textContent = `${dayNames[currentDate.getDay()]}, ${currentDate.getDate()} ${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;\n        }\n    }\n\n    async function prepareExportContent() {\n        return new Promise((resolve) => {\n            exportContent.style.display = 'block';\n            \n            let currentViewElement;\n            if (currentView === 'month') {\n                currentViewElement = document.querySelector('.month-view');\n            } else if (currentView === 'week') {\n                currentViewElement = document.querySelector('.week-view');\n            } else if (currentView === 'day') {\n                currentViewElement = document.querySelector('.day-view');\n            }\n            \n            if (currentViewElement) {\n                exportScheduleView.innerHTML = '';\n                const clone = currentViewElement.cloneNode(true);\n                exportScheduleView.appendChild(clone);\n            }\n            \n            exportEventsBody.innerHTML = '';\n            const allEvents = getAllEvents().sort((a, b) => new Date(a.date) - new Date(b.date));\n            \n            allEvents.forEach(event => {\n                const eventDate = new Date(event.date);\n                const formattedDate = eventDate.toLocaleDateString('ru-RU');\n                \n                const row = document.createElement('tr');\n                row.innerHTML = `\n                    <td>${formattedDate}</td>\n                    <td>${event.time || '\u0412\u0435\u0441\u044C \u0434\u0435\u043D\u044C'}</td>\n                    <td>${event.title}</td>\n                    <td>${getEventTypeName(event.type)}</td>\n                    <td>${getCourseName(event.course) || ''}</td>\n                    <td>${event.location || ''}</td>\n                    <td>${event.description || ''}</td>\n                `;\n                exportEventsBody.appendChild(row);\n            });\n            \n            exportUpcomingBody.innerHTML = '';\n            const upcomingEvents = getUpcomingEvents();\n            \n            upcomingEvents.forEach(event => {\n                const eventDate = new Date(event.date);\n                const formattedDate = eventDate.toLocaleDateString('ru-RU');\n                \n                const row = document.createElement('tr');\n                row.innerHTML = `\n                    <td>${formattedDate}</td>\n                    <td>${event.time || '\u0412\u0435\u0441\u044C \u0434\u0435\u043D\u044C'}</td>\n                    <td>${event.title}</td>\n                    <td>${getCourseName(event.course) || ''}</td>\n                    <td>${event.location || ''}</td>\n                `;\n                exportUpcomingBody.appendChild(row);\n            });\n            \n            setTimeout(() => {\n                resolve();\n            }, 1000);\n        });\n    }\n\n    function showLoading() {\n        exportScheduleLoading.style.display = 'flex';\n    }\n\n    function hideLoading() {\n        exportScheduleLoading.style.display = 'none';\n    }\n\n    async function exportToPDF() {\n        const { jsPDF } = window.jspdf;\n        \n        try {\n            const canvas = await html2canvas(exportContent, {\n                scale: 2,\n                useCORS: true,\n                logging: false,\n                backgroundColor: '#FFFFFF',\n                allowTaint: false,\n                width: exportContent.scrollWidth,\n                height: exportContent.scrollHeight\n            });\n            \n            const imgData = canvas.toDataURL('/frontend/static/assets/image/logo/logo.png');\n            const pdf = new jsPDF('p', 'mm', 'a4');\n            const imgWidth = 210;\n            const pageHeight = 295;\n            const imgHeight = canvas.height * imgWidth / canvas.width;\n            let heightLeft = imgHeight;\n            let position = 0;\n\n            pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n            heightLeft -= pageHeight;\n\n            while (heightLeft >= 0) {\n                position = heightLeft - imgHeight;\n                pdf.addPage();\n                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n                heightLeft -= pageHeight;\n            }\n\n            pdf.save('\u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435_\u043F\u0438\u0444\u0430\u0433\u043E\u0440_' + new Date().toISOString().slice(0,10) + '.pdf');\n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0435 \u0432 PDF:', error);\n            throw error;\n        }\n    }\n\n    async function exportToImage() {\n        try {\n            const canvas = await html2canvas(exportContent, {\n                scale: 2,\n                useCORS: true,\n                logging: false,\n                backgroundColor: '#FFFFFF',\n                allowTaint: false,\n                width: exportContent.scrollWidth,\n                height: exportContent.scrollHeight\n            });\n            \n            const link = document.createElement('a');\n            link.download = '\u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435_\u043F\u0438\u0444\u0430\u0433\u043E\u0440_' + new Date().toISOString().slice(0,10) + '.png';\n            link.href = canvas.toDataURL('/frontend/static/assets/image/logo/logo.png');\n            link.click();\n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0435 \u0432 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435:', error);\n            throw error;\n        }\n    }\n\n    async function exportToWord() {\n        try {\n            const { Document, Packer, Paragraph, TextRun, Table, TableCell, TableRow } = window.docx;\n            \n            const doc = new Document({\n                sections: [{\n                    properties: {},\n                    children: [\n                        new Paragraph({\n                            children: [\n                                new TextRun({\n                                    text: \"\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0437\u0430\u043D\u044F\u0442\u0438\u0439 - \u041F\u0418\u0424\u0410\u0413\u041E\u0420\",\n                                    bold: true,\n                                    size: 32\n                                })\n                            ]\n                        }),\n                        new Paragraph({\n                            children: [\n                                new TextRun({\n                                    text: `\u0414\u0430\u0442\u0430 \u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u0438: ${new Date().toLocaleDateString('ru-RU')}`,\n                                    size: 24\n                                })\n                            ]\n                        }),\n                        new Paragraph({\n                            children: [\n                                new TextRun({\n                                    text: `\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044C: ${userName}`,\n                                    size: 24\n                                })\n                            ]\n                        }),\n                        new Paragraph({\n                            children: [\n                                new TextRun({\n                                    text: `\u041F\u0435\u0440\u0438\u043E\u0434: ${exportPeriod.textContent}`,\n                                    size: 24\n                                })\n                            ]\n                        }),\n                        new Paragraph({\n                            text: \"\"\n                        }),\n                        new Paragraph({\n                            children: [\n                                new TextRun({\n                                    text: \"\u0412\u0441\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F \u043F\u0435\u0440\u0438\u043E\u0434\u0430:\",\n                                    bold: true,\n                                    size: 28\n                                })\n                            ]\n                        })\n                    ]\n                }]\n            });\n            \n            const allEvents = getAllEvents().sort((a, b) => new Date(a.date) - new Date(b.date));\n            \n            if (allEvents.length > 0) {\n                const tableRows = [\n                    new TableRow({\n                        children: [\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(\"\u0414\u0430\u0442\u0430\")] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(\"\u0412\u0440\u0435\u043C\u044F\")] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(\"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435\")] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(\"\u0422\u0438\u043F\")] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(\"\u041A\u0443\u0440\u0441\")] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(\"\u041C\u0435\u0441\u0442\u043E\")] })] })\n                        ]\n                    })\n                ];\n                \n                allEvents.forEach(event => {\n                    const eventDate = new Date(event.date);\n                    const formattedDate = eventDate.toLocaleDateString('ru-RU');\n                    \n                    tableRows.push(new TableRow({\n                        children: [\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(formattedDate)] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(event.time || '\u0412\u0435\u0441\u044C \u0434\u0435\u043D\u044C')] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(event.title)] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(getEventTypeName(event.type))] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(getCourseName(event.course) || '')] })] }),\n                            new TableCell({ children: [new Paragraph({ children: [new TextRun(event.location || '')] })] })\n                        ]\n                    }));\n                });\n                \n                doc.addSection({\n                    children: [\n                        new Table({\n                            width: {\n                                size: 100,\n                                type: \"pct\"\n                            },\n                            rows: tableRows\n                        })\n                    ]\n                });\n            }\n            \n            const blob = await Packer.toBlob(doc);\n            saveAs(blob, '\u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435_\u043F\u0438\u0444\u0430\u0433\u043E\u0440_' + new Date().toISOString().slice(0,10) + '.docx');\n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0435 \u0432 Word:', error);\n            throw error;\n        }\n    }\n\n    async function exportToExcel() {\n        try {\n            const wb = XLSX.utils.book_new();\n            \n            const allEvents = getAllEvents().sort((a, b) => new Date(a.date) - new Date(b.date));\n            const eventsData = [\n                ['\u0414\u0430\u0442\u0430', '\u0412\u0440\u0435\u043C\u044F', '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435', '\u0422\u0438\u043F', '\u041A\u0443\u0440\u0441', '\u041C\u0435\u0441\u0442\u043E', '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435']\n            ];\n            \n            allEvents.forEach(event => {\n                const eventDate = new Date(event.date);\n                const formattedDate = eventDate.toLocaleDateString('ru-RU');\n                \n                eventsData.push([\n                    formattedDate,\n                    event.time || '\u0412\u0435\u0441\u044C \u0434\u0435\u043D\u044C',\n                    event.title,\n                    getEventTypeName(event.type),\n                    getCourseName(event.course) || '',\n                    event.location || '',\n                    event.description || ''\n                ]);\n            });\n            \n            const ws = XLSX.utils.aoa_to_sheet(eventsData);\n            XLSX.utils.book_append_sheet(wb, ws, '\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435');\n            \n            const upcomingEvents = getUpcomingEvents();\n            const upcomingData = [\n                ['\u0414\u0430\u0442\u0430', '\u0412\u0440\u0435\u043C\u044F', '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435', '\u041A\u0443\u0440\u0441', '\u041C\u0435\u0441\u0442\u043E']\n            ];\n            \n            upcomingEvents.forEach(event => {\n                const eventDate = new Date(event.date);\n                const formattedDate = eventDate.toLocaleDateString('ru-RU');\n                \n                upcomingData.push([\n                    formattedDate,\n                    event.time || '\u0412\u0435\u0441\u044C \u0434\u0435\u043D\u044C',\n                    event.title,\n                    getCourseName(event.course) || '',\n                    event.location || ''\n                ]);\n            });\n            \n            const ws2 = XLSX.utils.aoa_to_sheet(upcomingData);\n            XLSX.utils.book_append_sheet(wb, ws2, '\u0411\u043B\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F');\n            \n            XLSX.writeFile(wb, '\u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435_\u043F\u0438\u0444\u0430\u0433\u043E\u0440_' + new Date().toISOString().slice(0,10) + '.xlsx');\n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0435 \u0432 Excel:', error);\n            throw error;\n        }\n    }\n\n    async function exportToPrint() {\n        try {\n            const canvas = await html2canvas(exportContent, {\n                scale: 2,\n                useCORS: true,\n                logging: false,\n                backgroundColor: '#FFFFFF',\n                allowTaint: false,\n                width: exportContent.scrollWidth,\n                height: exportContent.scrollHeight\n            });\n            \n            const imgData = canvas.toDataURL('/frontend/static/assets/image/logo/logo.png');\n            \n            printContent.innerHTML = '';\n            \n            const img = document.createElement('img');\n            img.src = imgData;\n            img.style.width = '100%';\n            img.style.height = 'auto';\n            \n            printContent.appendChild(img);\n            printContent.style.display = 'block';\n            \n            window.print();\n            \n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u0435\u0447\u0430\u0442\u0438:', error);\n            throw error;\n        } finally {\n            setTimeout(() => {\n                printContent.style.display = 'none';\n                printContent.innerHTML = '';\n            }, 500);\n        }\n    }\n\n    exportScheduleBtn.addEventListener('click', function() {\n        setExportData();\n        exportScheduleModal.style.display = 'flex';\n    });\n\n    cancelScheduleExport.addEventListener('click', function() {\n        exportScheduleModal.style.display = 'none';\n    });\n\n    exportScheduleModal.addEventListener('click', function(e) {\n        if (e.target === exportScheduleModal) {\n            exportScheduleModal.style.display = 'none';\n        }\n    });\n\n    confirmScheduleExport.addEventListener('click', async function() {\n        const format = document.querySelector('input[name=\"exportScheduleFormat\"]:checked').value;\n        exportScheduleModal.style.display = 'none';\n        \n        showLoading();\n        \n        try {\n            await prepareExportContent();\n            \n            switch(format) {\n                case 'pdf':\n                    await exportToPDF();\n                    break;\n                case 'image':\n                    await exportToImage();\n                    break;\n                case 'word':\n                    await exportToWord();\n                    break;\n                case 'excel':\n                    await exportToExcel();\n                    break;\n                case 'print':\n                    await exportToPrint();\n                    break;\n            }\n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0435:', error);\n            alert('\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0435. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.');\n        } finally {\n            exportContent.style.display = 'none';\n            hideLoading();\n        }\n    });\n}", "import { initAttendance } from '../modules/attendance.js';\nimport { initProgress } from '../modules/progress.js';\nimport { initStatistics } from '../modules/statistics.js';\nimport { initExport } from '../modules/export.js';\n\nexport function initAttendancePage() {\n    console.log('Initializing attendance page...');\n    initAttendance();\n}\n\nexport function initProgressPage() {\n    console.log('Initializing progress page...');\n    initProgress();\n}\n\nexport function initStatisticsPage() {\n    console.log('Initializing statistics page...');\n    initStatistics();\n    initExport(); // Changed from initExport to initScheduleExport\n}", "// \u041A\u043E\u043D\u0442\u0430\u043A\u0442\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 - \u0441\u043F\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\nexport function initMap() {\n    if (typeof ymaps === 'undefined') {\n        console.warn('Yandex Maps not loaded');\n        return;\n    }\n    \n    ymaps.ready(function() {\n        const mapElement = document.getElementById('map');\n        if (!mapElement) return;\n\n        // \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043A\u0430\u0440\u0442\u044B\n        var myMap = new ymaps.Map(\"map\", {\n            center: [56.118550, 40.378320],\n            zoom: 15,\n            controls: ['zoomControl', 'fullscreenControl']\n        });\n        \n        // \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043A\u0438\n        var myPlacemark = new ymaps.Placemark([56.118550, 40.378320], {\n            hintContent: '\u0412\u043B\u0413\u041A \u0438\u043C. \u0414.\u041A.\u0421\u043E\u0432\u0435\u0442\u043A\u0438\u043D\u0430 - \u0412\u043B\u0430\u0434\u0438\u043C\u0438\u0440\u0441\u043A\u0438\u0439 \u0433\u043E\u0441\u0443\u0434\u0430\u0440\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u043A\u043E\u043B\u043B\u0435\u0434\u0436',\n            balloonContentHeader: '\u0412\u043B\u0413\u041A \u0438\u043C. \u0414.\u041A.\u0421\u043E\u0432\u0435\u0442\u043A\u0438\u043D\u0430',\n            balloonContentBody: `\n                <div style=\"padding: 10px 0;\">\n                    <p><strong>\u0410\u0434\u0440\u0435\u0441:</strong> \u0433. \u0412\u043B\u0430\u0434\u0438\u043C\u0438\u0440, \u0443\u043B. \u041E\u0444\u0438\u0446\u0435\u0440\u0441\u043A\u0430\u044F, \u0434. 11</p>\n                    <p><strong>\u0422\u0435\u043B\u0435\u0444\u043E\u043D:</strong> +7 (800) 555-35-35</p>\n                    <p><strong>\u0420\u0435\u0436\u0438\u043C \u0440\u0430\u0431\u043E\u0442\u044B:</strong> \u041F\u043D-\u041F\u0442: 8:00-17:00</p>\n                </div>\n            `,\n            balloonContentFooter: '\u041E\u0441\u043D\u043E\u0432\u0430\u043D \u0432 1885 \u0433\u043E\u0434\u0443'\n        }, {\n            iconLayout: 'default#image',\n            iconImageHref: 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><path fill=\"#4A6FA5\" d=\"M16 0C10.477 0 6 4.477 6 10c0 5.523 10 22 10 22s10-16.477 10-22c0-5.523-4.477-10-10-10zm0 15a5 5 0 1 1 0-10 5 5 0 0 1 0 10z\"/></svg>'),\n            iconImageSize: [32, 32],\n            iconImageOffset: [-16, -32]\n        });\n        \n        // \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u0435\u0442\u043A\u0438 \u043D\u0430 \u043A\u0430\u0440\u0442\u0443\n        myMap.geoObjects.add(myPlacemark);\n        \n        // \u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u0431\u0430\u043B\u0443\u043D \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\n        myPlacemark.balloon.open();\n    });\n}\n\nexport function initFAQ() {\n    document.querySelectorAll('.faq-question').forEach(question => {\n        question.addEventListener('click', () => {\n            const item = question.parentElement;\n            const answer = question.nextElementSibling;\n            const isActive = answer.classList.contains('active');\n            \n            // Close all answers\n            document.querySelectorAll('.faq-answer').forEach(ans => {\n                ans.classList.remove('active');\n            });\n            document.querySelectorAll('.faq-item').forEach(faqItem => {\n                faqItem.classList.remove('active');\n            });\n            \n            // If the clicked question wasn't active, open it\n            if (!isActive) {\n                answer.classList.add('active');\n                item.classList.add('active');\n            }\n        });\n    });\n}\n\nexport function initContactForm() {\n    const contactForm = document.getElementById('contactForm');\n    if (contactForm) {\n        contactForm.addEventListener('submit', function(e) {\n            e.preventDefault();\n            alert('\u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0432\u0430\u0448\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435! \u041C\u044B \u0441\u0432\u044F\u0436\u0435\u043C\u0441\u044F \u0441 \u0432\u0430\u043C\u0438 \u0432 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F.');\n            this.reset();\n        });\n    }\n}", "// \u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0435\u0439 - \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u044F\nexport function initTeachersFilter() {\n    const filterButtons = document.querySelectorAll('.filter-btn');\n    const teacherCards = document.querySelectorAll('.teacher-card');\n    \n    filterButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            // \u0423\u0431\u0438\u0440\u0430\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u0443 \u0432\u0441\u0435\u0445 \u043A\u043D\u043E\u043F\u043E\u043A\n            filterButtons.forEach(btn => btn.classList.remove('active'));\n            \n            // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u043A\u043D\u043E\u043F\u043A\u0435\n            this.classList.add('active');\n            \n            const filterValue = this.getAttribute('data-filter');\n            \n            // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C/\u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0435\u0439\n            teacherCards.forEach(card => {\n                if (filterValue === 'all' || card.getAttribute('data-categories').includes(filterValue)) {\n                    card.style.display = 'block';\n                    setTimeout(() => {\n                        card.classList.add('visible');\n                    }, 10);\n                } else {\n                    card.style.display = 'none';\n                    card.classList.remove('visible');\n                }\n            });\n        });\n    });\n}", "// \u041C\u043E\u0434\u0443\u043B\u044C \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C\u0438 \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u044B\nexport function initPlatformUsers() {\n    // User data\n    const userName = \"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\";\n    const userEmail = \"admin@school.ru\";\n    \n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\n    const userNameElement = document.getElementById('userName');\n    if (userNameElement) {\n        userNameElement.textContent = userName;\n    }\n\n    // \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C Chart.js \u0435\u0441\u043B\u0438 \u043D\u0443\u0436\u0435\u043D\n    if (document.getElementById('rolesChart')) {\n        loadChartJS().then(() => {\n            initializeCharts();\n        });\n    }\n\n    // Modal functionality\n    const addUserBtn = document.getElementById('addUserBtn');\n    const addUserModal = document.getElementById('addUserModal');\n    const closeModal = document.getElementById('closeModal');\n    const cancelAdd = document.getElementById('cancelAdd');\n    const saveUser = document.getElementById('saveUser');\n    \n    if (addUserBtn && addUserModal) {\n        // Open modal\n        addUserBtn.addEventListener('click', function() {\n            addUserModal.classList.add('active');\n        });\n        \n        // Close modal\n        function closeAddModal() {\n            addUserModal.classList.remove('active');\n        }\n        \n        if (closeModal) closeModal.addEventListener('click', closeAddModal);\n        if (cancelAdd) cancelAdd.addEventListener('click', closeAddModal);\n        \n        // Save user\n        if (saveUser) {\n            saveUser.addEventListener('click', function() {\n                const userFirstName = document.getElementById('userFirstName')?.value;\n                const userLastName = document.getElementById('userLastName')?.value;\n                const userEmail = document.getElementById('userEmail')?.value;\n                const userRole = document.getElementById('userRole')?.value;\n                const userStatus = document.getElementById('userStatus')?.value;\n                const userPassword = document.getElementById('userPassword')?.value;\n                const userConfirmPassword = document.getElementById('userConfirmPassword')?.value;\n                \n                if (!userFirstName || !userLastName || !userEmail || !userPassword) {\n                    alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F');\n                    return;\n                }\n                \n                if (userPassword !== userConfirmPassword) {\n                    alert('\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442');\n                    return;\n                }\n                \n                // In a real app, we would save the user to the server\n                console.log(`Adding user: ${userFirstName} ${userLastName}, ${userEmail}, ${userRole}, ${userStatus}`);\n                \n                // Show success message\n                alert(`\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C ${userFirstName} ${userLastName} \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D!`);\n                \n                // Close modal and reset form\n                closeAddModal();\n                document.getElementById('userFirstName').value = '';\n                document.getElementById('userLastName').value = '';\n                document.getElementById('userEmail').value = '';\n                document.getElementById('userPassword').value = '';\n                document.getElementById('userConfirmPassword').value = '';\n            });\n        }\n    }\n    \n    // Select all checkbox\n    const selectAllCheckbox = document.getElementById('selectAll');\n    const userCheckboxes = document.querySelectorAll('.user-checkbox');\n    \n    if (selectAllCheckbox) {\n        selectAllCheckbox.addEventListener('change', function() {\n            userCheckboxes.forEach(checkbox => {\n                checkbox.checked = this.checked;\n            });\n        });\n    }\n    \n    // Search functionality\n    const searchInput = document.querySelector('.search-box input');\n    if (searchInput) {\n        searchInput.addEventListener('input', function() {\n            const searchTerm = this.value.toLowerCase();\n            const userRows = document.querySelectorAll('.user-row');\n            \n            userRows.forEach(row => {\n                const userName = row.querySelector('.user-name')?.textContent.toLowerCase();\n                const userEmail = row.querySelector('.user-email')?.textContent.toLowerCase();\n                if (userName?.includes(searchTerm) || userEmail?.includes(searchTerm)) {\n                    row.style.display = 'table-row';\n                } else {\n                    row.style.display = 'none';\n                }\n            });\n        });\n    }\n    \n    // Role filter\n    const roleFilter = document.querySelectorAll('.filter-select')[0];\n    if (roleFilter) {\n        roleFilter.addEventListener('change', function() {\n            const selectedRole = this.value;\n            const userRows = document.querySelectorAll('.user-row');\n            \n            if (selectedRole === '\u0412\u0441\u0435 \u0440\u043E\u043B\u0438') {\n                userRows.forEach(row => {\n                    row.style.display = 'table-row';\n                });\n            } else {\n                userRows.forEach(row => {\n                    const role = row.querySelector('.role-badge')?.textContent;\n                    if (role === selectedRole) {\n                        row.style.display = 'table-row';\n                    } else {\n                        row.style.display = 'none';\n                    }\n                });\n            }\n        });\n    }\n    \n    // Status filter\n    const statusFilter = document.querySelectorAll('.filter-select')[1];\n    if (statusFilter) {\n        statusFilter.addEventListener('change', function() {\n            const selectedStatus = this.value;\n            const userRows = document.querySelectorAll('.user-row');\n            \n            if (selectedStatus === '\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044B') {\n                userRows.forEach(row => {\n                    row.style.display = 'table-row';\n                });\n            } else {\n                userRows.forEach(row => {\n                    const status = row.querySelector('.status-badge')?.textContent;\n                    if (status === selectedStatus) {\n                        row.style.display = 'table-row';\n                    } else {\n                        row.style.display = 'none';\n                    }\n                });\n            }\n        });\n    }\n    \n    // User actions\n    const editButtons = document.querySelectorAll('.action-btn:not(.delete)');\n    const deleteButtons = document.querySelectorAll('.action-btn.delete');\n    \n    editButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const userRow = this.closest('.user-row');\n            const userName = userRow.querySelector('.user-name')?.textContent;\n            \n            // In a real app, we would open edit modal\n            alert(`\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F: ${userName}`);\n        });\n    });\n    \n    deleteButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const userRow = this.closest('.user-row');\n            const userName = userRow.querySelector('.user-name')?.textContent;\n            \n            if (confirm(`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ${userName}?`)) {\n                // In a real app, we would delete the user\n                userRow.remove();\n                alert(`\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C ${userName} \u0443\u0434\u0430\u043B\u0435\u043D`);\n            }\n        });\n    });\n}\n\nfunction initializeCharts() {\n    if (typeof Chart === 'undefined') return;\n    \n    createRolesChart();\n    createRegistrationChart();\n    createActivityChart();\n    createStatusChart();\n}\n\nfunction createRolesChart() {\n    const ctx = document.getElementById('rolesChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'doughnut',\n        data: {\n            labels: ['\u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B', '\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0438', '\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u0438', '\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u044B'],\n            datasets: [{\n                data: [987, 48, 212, 5],\n                backgroundColor: [\n                    'rgba(52, 152, 219, 0.7)',\n                    'rgba(243, 156, 18, 0.7)',\n                    'rgba(46, 204, 113, 0.7)',\n                    'rgba(231, 76, 60, 0.7)'\n                ],\n                borderColor: [\n                    'rgba(52, 152, 219, 1)',\n                    'rgba(243, 156, 18, 1)',\n                    'rgba(46, 204, 113, 1)',\n                    'rgba(231, 76, 60, 1)'\n                ],\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                legend: {\n                    position: 'bottom'\n                }\n            }\n        }\n    });\n}\n\nfunction createRegistrationChart() {\n    const ctx = document.getElementById('registrationChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'bar',\n        data: {\n            labels: ['\u042F\u043D\u0432', '\u0424\u0435\u0432', '\u041C\u0430\u0440', '\u0410\u043F\u0440', '\u041C\u0430\u0439', '\u0418\u044E\u043D', '\u0418\u044E\u043B', '\u0410\u0432\u0433', '\u0421\u0435\u043D', '\u041E\u043A\u0442', '\u041D\u043E\u044F', '\u0414\u0435\u043A'],\n            datasets: [{\n                label: '\u041D\u043E\u0432\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438',\n                data: [45, 60, 75, 80, 65, 70, 55, 120, 180, 150, 90, 70],\n                backgroundColor: 'rgba(74, 111, 165, 0.7)',\n                borderColor: 'rgba(74, 111, 165, 1)',\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n                y: {\n                    beginAtZero: true\n                }\n            }\n        }\n    });\n}\n\nfunction createActivityChart() {\n    const ctx = document.getElementById('activityChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'line',\n        data: {\n            labels: ['\u041F\u043D', '\u0412\u0442', '\u0421\u0440', '\u0427\u0442', '\u041F\u0442', '\u0421\u0431', '\u0412\u0441'],\n            datasets: [{\n                label: '\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438',\n                data: [850, 920, 810, 930, 1010, 650, 580],\n                borderColor: 'rgba(46, 204, 113, 1)',\n                backgroundColor: 'rgba(46, 204, 113, 0.1)',\n                tension: 0.3,\n                fill: true\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n                y: {\n                    beginAtZero: true\n                }\n            }\n        }\n    });\n}\n\nfunction createStatusChart() {\n    const ctx = document.getElementById('statusChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'pie',\n        data: {\n            labels: ['\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0435', '\u041D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0435', '\u041E\u0436\u0438\u0434\u0430\u044E\u0442 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F'],\n            datasets: [{\n                data: [1189, 45, 13],\n                backgroundColor: [\n                    'rgba(46, 204, 113, 0.7)',\n                    'rgba(149, 165, 166, 0.7)',\n                    'rgba(243, 156, 18, 0.7)'\n                ],\n                borderColor: [\n                    'rgba(46, 204, 113, 1)',\n                    'rgba(149, 165, 166, 1)',\n                    'rgba(243, 156, 18, 1)'\n                ],\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                legend: {\n                    position: 'bottom'\n                }\n            }\n        }\n    });\n}", "// \u041C\u043E\u0434\u0443\u043B\u044C \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0440\u043E\u043B\u044F\u043C\u0438\nexport function initRoleManagement() {\n    // User data\n    const userName = \"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\";\n    \n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\n    const userNameElement = document.getElementById('userName');\n    const userAvatar = document.getElementById('userAvatar');\n    \n    if (userNameElement) {\n        userNameElement.textContent = userName;\n    }\n    \n    if (userAvatar) {\n        const nameParts = userName.split(' ');\n        const initials = nameParts.map(part => part[0]).join('').toUpperCase();\n        userAvatar.textContent = initials;\n    }\n\n    // \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C Chart.js \u0435\u0441\u043B\u0438 \u043D\u0443\u0436\u0435\u043D\n    if (document.getElementById('rolesDistributionChart')) {\n        loadChartJS().then(() => {\n            initializeCharts();\n        });\n    }\n\n    // Modal functionality\n    const addRoleBtn = document.getElementById('addRoleBtn');\n    const addRoleModal = document.getElementById('addRoleModal');\n    const closeModal = document.getElementById('closeModal');\n    const cancelAdd = document.getElementById('cancelAdd');\n    const saveRole = document.getElementById('saveRole');\n    \n    if (addRoleBtn && addRoleModal) {\n        // Open modal\n        addRoleBtn.addEventListener('click', function() {\n            addRoleModal.classList.add('active');\n        });\n        \n        // Close modal\n        function closeAddModal() {\n            addRoleModal.classList.remove('active');\n        }\n        \n        if (closeModal) closeModal.addEventListener('click', closeAddModal);\n        if (cancelAdd) cancelAdd.addEventListener('click', closeAddModal);\n        \n        // Save role\n        if (saveRole) {\n            saveRole.addEventListener('click', function() {\n                const roleName = document.getElementById('roleName')?.value;\n                const roleKey = document.getElementById('roleKey')?.value;\n                const roleDescription = document.getElementById('roleDescription')?.value;\n                const roleType = document.getElementById('roleType')?.value;\n                \n                if (!roleName || !roleKey || !roleDescription) {\n                    alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F');\n                    return;\n                }\n                \n                // In a real app, we would save the role to the server\n                console.log(`Adding role: ${roleName}, ${roleKey}, ${roleDescription}, ${roleType}`);\n                \n                // Show success message\n                alert(`\u0420\u043E\u043B\u044C \"${roleName}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0430!`);\n                \n                // Close modal and reset form\n                closeAddModal();\n                document.getElementById('roleName').value = '';\n                document.getElementById('roleKey').value = '';\n                document.getElementById('roleDescription').value = '';\n                \n                // Reset checkboxes\n                const checkboxes = document.querySelectorAll('.permissions-checkboxes input[type=\"checkbox\"]');\n                checkboxes.forEach(checkbox => {\n                    checkbox.checked = false;\n                });\n            });\n        }\n    }\n    \n    // Search functionality\n    const searchInput = document.querySelector('.search-box input');\n    if (searchInput) {\n        searchInput.addEventListener('input', function() {\n            const searchTerm = this.value.toLowerCase();\n            const roleCards = document.querySelectorAll('.role-card');\n            \n            roleCards.forEach(card => {\n                const roleName = card.querySelector('.role-info h3')?.textContent.toLowerCase();\n                if (roleName?.includes(searchTerm)) {\n                    card.style.display = 'block';\n                } else {\n                    card.style.display = 'none';\n                }\n            });\n        });\n    }\n    \n    // Role filter\n    const roleFilter = document.querySelector('.filter-select');\n    if (roleFilter) {\n        roleFilter.addEventListener('change', function() {\n            const selectedFilter = this.value;\n            const roleCards = document.querySelectorAll('.role-card');\n            \n            if (selectedFilter === '\u0412\u0441\u0435 \u0440\u043E\u043B\u0438') {\n                roleCards.forEach(card => {\n                    card.style.display = 'block';\n                });\n            } else if (selectedFilter === '\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0440\u043E\u043B\u0438') {\n                roleCards.forEach(card => {\n                    const roleStatus = card.querySelector('.role-status')?.textContent;\n                    if (roleStatus === '\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0430\u044F \u0440\u043E\u043B\u044C') {\n                        card.style.display = 'block';\n                    } else {\n                        card.style.display = 'none';\n                    }\n                });\n            } else if (selectedFilter === '\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u0440\u043E\u043B\u0438') {\n                roleCards.forEach(card => {\n                    const roleStatus = card.querySelector('.role-status')?.textContent;\n                    if (roleStatus === '\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u0430\u044F \u0440\u043E\u043B\u044C') {\n                        card.style.display = 'block';\n                    } else {\n                        card.style.display = 'none';\n                    }\n                });\n            }\n        });\n    }\n    \n    // Role actions\n    const editButtons = document.querySelectorAll('.action-btn:not(.delete)');\n    const deleteButtons = document.querySelectorAll('.action-btn.delete');\n    \n    editButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const roleCard = this.closest('.role-card');\n            const roleName = roleCard.querySelector('.role-info h3')?.textContent;\n            \n            // In a real app, we would open edit modal\n            alert(`\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0440\u043E\u043B\u0438: ${roleName}`);\n        });\n    });\n    \n    deleteButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const roleCard = this.closest('.role-card');\n            const roleName = roleCard.querySelector('.role-info h3')?.textContent;\n            const roleStatus = roleCard.querySelector('.role-status')?.textContent;\n            \n            if (roleStatus === '\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0430\u044F \u0440\u043E\u043B\u044C') {\n                alert('\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0440\u043E\u043B\u0438 \u043D\u0435\u043B\u044C\u0437\u044F \u0443\u0434\u0430\u043B\u0438\u0442\u044C');\n                return;\n            }\n            \n            if (confirm(`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0440\u043E\u043B\u044C \"${roleName}\"?`)) {\n                // In a real app, we would delete the role\n                roleCard.remove();\n                alert(`\u0420\u043E\u043B\u044C \"${roleName}\" \u0443\u0434\u0430\u043B\u0435\u043D\u0430`);\n            }\n        });\n    });\n    \n    // Permission matrix toggles\n    const permissionChecks = document.querySelectorAll('.permission-check');\n    permissionChecks.forEach(check => {\n        check.addEventListener('click', function() {\n            this.classList.toggle('checked');\n        });\n    });\n}\n\nfunction initializeCharts() {\n    if (typeof Chart === 'undefined') return;\n    \n    createRolesDistributionChart();\n    createRolesActivityChart();\n}\n\nfunction createRolesDistributionChart() {\n    const ctx = document.getElementById('rolesDistributionChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'doughnut',\n        data: {\n            labels: ['\u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B', '\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0438', '\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u0438', '\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u044B', '\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u044B', '\u0410\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0438'],\n            datasets: [{\n                data: [987, 48, 212, 5, 2, 1],\n                backgroundColor: [\n                    'rgba(52, 152, 219, 0.7)',\n                    'rgba(243, 156, 18, 0.7)',\n                    'rgba(46, 204, 113, 0.7)',\n                    'rgba(231, 76, 60, 0.7)',\n                    'rgba(155, 89, 182, 0.7)',\n                    'rgba(26, 188, 156, 0.7)'\n                ],\n                borderColor: [\n                    'rgba(52, 152, 219, 1)',\n                    'rgba(243, 156, 18, 1)',\n                    'rgba(46, 204, 113, 1)',\n                    'rgba(231, 76, 60, 1)',\n                    'rgba(155, 89, 182, 1)',\n                    'rgba(26, 188, 156, 1)'\n                ],\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                legend: {\n                    position: 'bottom'\n                }\n            }\n        }\n    });\n}\n\nfunction createRolesActivityChart() {\n    const ctx = document.getElementById('rolesActivityChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'bar',\n        data: {\n            labels: ['\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u044B', '\u041F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0438', '\u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B', '\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u0438', '\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u044B', '\u0410\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0438'],\n            datasets: [{\n                label: '\u0421\u0440\u0435\u0434\u043D\u0435\u0435 \u0432\u0440\u0435\u043C\u044F \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0435 (\u0447\u0430\u0441\u043E\u0432/\u043D\u0435\u0434\u0435\u043B\u044E)',\n                data: [42, 38, 12, 5, 25, 30],\n                backgroundColor: 'rgba(74, 111, 165, 0.7)',\n                borderColor: 'rgba(74, 111, 165, 1)',\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n                y: {\n                    beginAtZero: true\n                }\n            }\n        }\n    });\n}", "// \u041C\u043E\u0434\u0443\u043B\u044C \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430\u043C\u0438\nexport function initSubjectManagement() {\n    // User data\n    const userName = \"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\";\n    \n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\n    const userNameElement = document.getElementById('userName');\n    const userAvatar = document.getElementById('userAvatar');\n    \n    if (userNameElement) {\n        userNameElement.textContent = userName;\n    }\n    \n    if (userAvatar) {\n        const nameParts = userName.split(' ');\n        const initials = nameParts.map(part => part[0]).join('').toUpperCase();\n        userAvatar.textContent = initials;\n    }\n\n    // \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C Chart.js \u0435\u0441\u043B\u0438 \u043D\u0443\u0436\u0435\u043D\n    if (document.getElementById('studentsDistributionChart')) {\n        loadChartJS().then(() => {\n            initializeCharts();\n        });\n    }\n\n    // Modal functionality\n    const addSubjectBtn = document.getElementById('addSubjectBtn');\n    const addSubjectModal = document.getElementById('addSubjectModal');\n    const closeModal = document.getElementById('closeModal');\n    const cancelAdd = document.getElementById('cancelAdd');\n    const saveSubject = document.getElementById('saveSubject');\n    \n    if (addSubjectBtn && addSubjectModal) {\n        // Open modal\n        addSubjectBtn.addEventListener('click', function() {\n            addSubjectModal.classList.add('active');\n        });\n        \n        // Close modal\n        function closeAddModal() {\n            addSubjectModal.classList.remove('active');\n        }\n        \n        if (closeModal) closeModal.addEventListener('click', closeAddModal);\n        if (cancelAdd) cancelAdd.addEventListener('click', closeAddModal);\n        \n        // Save subject\n        if (saveSubject) {\n            saveSubject.addEventListener('click', function() {\n                const subjectName = document.getElementById('subjectName')?.value;\n                const subjectCategory = document.getElementById('subjectCategory')?.value;\n                const subjectStatus = document.getElementById('subjectStatus')?.value;\n                const subjectDescription = document.getElementById('subjectDescription')?.value;\n                \n                if (!subjectName || !subjectDescription) {\n                    alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F');\n                    return;\n                }\n                \n                // In a real app, we would save the subject to the server\n                console.log(`Adding subject: ${subjectName}, ${subjectCategory}, ${subjectStatus}, ${subjectDescription}`);\n                \n                // Show success message\n                alert(`\u041F\u0440\u0435\u0434\u043C\u0435\u0442 \"${subjectName}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D!`);\n                \n                // Close modal and reset form\n                closeAddModal();\n                document.getElementById('subjectName').value = '';\n                document.getElementById('subjectDescription').value = '';\n                \n                // Reset checkboxes\n                const checkboxes = document.querySelectorAll('.teachers-select input[type=\"checkbox\"]');\n                checkboxes.forEach(checkbox => {\n                    checkbox.checked = false;\n                });\n            });\n        }\n    }\n    \n    // Select all checkbox\n    const selectAllCheckbox = document.getElementById('selectAll');\n    const subjectCheckboxes = document.querySelectorAll('.subject-checkbox');\n    \n    if (selectAllCheckbox) {\n        selectAllCheckbox.addEventListener('change', function() {\n            subjectCheckboxes.forEach(checkbox => {\n                checkbox.checked = this.checked;\n            });\n        });\n    }\n    \n    // Search functionality\n    const searchInput = document.querySelector('.search-box input');\n    if (searchInput) {\n        searchInput.addEventListener('input', function() {\n            const searchTerm = this.value.toLowerCase();\n            const subjectCards = document.querySelectorAll('.subject-card');\n            const subjectRows = document.querySelectorAll('.subject-row');\n            \n            subjectCards.forEach(card => {\n                const subjectName = card.querySelector('.subject-info h3')?.textContent.toLowerCase();\n                if (subjectName?.includes(searchTerm)) {\n                    card.style.display = 'block';\n                } else {\n                    card.style.display = 'none';\n                }\n            });\n            \n            subjectRows.forEach(row => {\n                const subjectName = row.querySelector('.subject-name')?.textContent.toLowerCase();\n                if (subjectName?.includes(searchTerm)) {\n                    row.style.display = 'table-row';\n                } else {\n                    row.style.display = 'none';\n                }\n            });\n        });\n    }\n    \n    // Category filter\n    const categoryFilter = document.querySelectorAll('.filter-select')[0];\n    if (categoryFilter) {\n        categoryFilter.addEventListener('change', function() {\n            const selectedCategory = this.value;\n            const subjectCards = document.querySelectorAll('.subject-card');\n            const subjectRows = document.querySelectorAll('.subject-row');\n            \n            if (selectedCategory === '\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438') {\n                subjectCards.forEach(card => {\n                    card.style.display = 'block';\n                });\n                subjectRows.forEach(row => {\n                    row.style.display = 'table-row';\n                });\n            } else {\n                subjectCards.forEach(card => {\n                    const category = card.querySelector('.subject-info p')?.textContent;\n                    if (category === selectedCategory) {\n                        card.style.display = 'block';\n                    } else {\n                        card.style.display = 'none';\n                    }\n                });\n                \n                subjectRows.forEach(row => {\n                    const category = row.querySelector('td:nth-child(3)')?.textContent;\n                    if (category === selectedCategory) {\n                        row.style.display = 'table-row';\n                    } else {\n                        row.style.display = 'none';\n                    }\n                });\n            }\n        });\n    }\n    \n    // Status filter\n    const statusFilter = document.querySelectorAll('.filter-select')[1];\n    if (statusFilter) {\n        statusFilter.addEventListener('change', function() {\n            const selectedStatus = this.value;\n            const subjectCards = document.querySelectorAll('.subject-card');\n            const subjectRows = document.querySelectorAll('.subject-row');\n            \n            if (selectedStatus === '\u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044B') {\n                subjectCards.forEach(card => {\n                    card.style.display = 'block';\n                });\n                subjectRows.forEach(row => {\n                    row.style.display = 'table-row';\n                });\n            } else {\n                subjectCards.forEach(card => {\n                    const status = card.querySelector('.subject-status')?.textContent;\n                    if (status?.includes(selectedStatus)) {\n                        card.style.display = 'block';\n                    } else {\n                        card.style.display = 'none';\n                    }\n                });\n                \n                subjectRows.forEach(row => {\n                    const status = row.querySelector('.status-badge')?.textContent;\n                    if (status === selectedStatus) {\n                        row.style.display = 'table-row';\n                    } else {\n                        row.style.display = 'none';\n                    }\n                });\n            }\n        });\n    }\n    \n    // Subject actions\n    const editButtons = document.querySelectorAll('.action-btn:not(.delete)');\n    const deleteButtons = document.querySelectorAll('.action-btn.delete');\n    \n    editButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const subjectCard = this.closest('.subject-card') || this.closest('.subject-row');\n            const subjectName = subjectCard.querySelector('.subject-info h3, .subject-name')?.textContent;\n            \n            // In a real app, we would open edit modal\n            alert(`\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430: ${subjectName}`);\n        });\n    });\n    \n    deleteButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const subjectCard = this.closest('.subject-card') || this.closest('.subject-row');\n            const subjectName = subjectCard.querySelector('.subject-info h3, .subject-name')?.textContent;\n            \n            if (confirm(`\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442 \"${subjectName}\"?`)) {\n                // In a real app, we would delete the subject\n                subjectCard.remove();\n                alert(`\u041F\u0440\u0435\u0434\u043C\u0435\u0442 \"${subjectName}\" \u0443\u0434\u0430\u043B\u0435\u043D`);\n            }\n        });\n    });\n}\n\nfunction initializeCharts() {\n    if (typeof Chart === 'undefined') return;\n    \n    createStudentsDistributionChart();\n    createCoursesDistributionChart();\n}\n\nfunction createStudentsDistributionChart() {\n    const ctx = document.getElementById('studentsDistributionChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'bar',\n        data: {\n            labels: ['\u041C\u0430\u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0430', '\u0424\u0438\u0437\u0438\u043A\u0430', '\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435', '\u0425\u0438\u043C\u0438\u044F', '\u0410\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439', '\u0418\u0441\u0442\u043E\u0440\u0438\u044F', '\u0411\u0438\u043E\u043B\u043E\u0433\u0438\u044F', '\u041B\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430'],\n            datasets: [{\n                label: '\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432',\n                data: [587, 421, 723, 312, 654, 398, 285, 376],\n                backgroundColor: 'rgba(74, 111, 165, 0.7)',\n                borderColor: 'rgba(74, 111, 165, 1)',\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            scales: {\n                y: {\n                    beginAtZero: true\n                }\n            }\n        }\n    });\n}\n\nfunction createCoursesDistributionChart() {\n    const ctx = document.getElementById('coursesDistributionChart');\n    if (!ctx) return;\n    \n    new Chart(ctx.getContext('2d'), {\n        type: 'pie',\n        data: {\n            labels: ['\u041C\u0430\u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0430', '\u0424\u0438\u0437\u0438\u043A\u0430', '\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435', '\u0425\u0438\u043C\u0438\u044F', '\u0410\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439', '\u0418\u0441\u0442\u043E\u0440\u0438\u044F', '\u0414\u0440\u0443\u0433\u0438\u0435'],\n            datasets: [{\n                data: [24, 18, 32, 14, 28, 16, 32],\n                backgroundColor: [\n                    'rgba(74, 111, 165, 0.7)',\n                    'rgba(46, 204, 113, 0.7)',\n                    'rgba(243, 156, 18, 0.7)',\n                    'rgba(52, 152, 219, 0.7)',\n                    'rgba(155, 89, 182, 0.7)',\n                    'rgba(231, 76, 60, 0.7)',\n                    'rgba(26, 188, 156, 0.7)'\n                ],\n                borderColor: [\n                    'rgba(74, 111, 165, 1)',\n                    'rgba(46, 204, 113, 1)',\n                    'rgba(243, 156, 18, 1)',\n                    'rgba(52, 152, 219, 1)',\n                    'rgba(155, 89, 182, 1)',\n                    'rgba(231, 76, 60, 1)',\n                    'rgba(26, 188, 156, 1)'\n                ],\n                borderWidth: 1\n            }]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n                legend: {\n                    position: 'bottom'\n                }\n            }\n        }\n    });\n}", "export function initMaterialCreation() {\r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u043F\u0440\u0438 \u0441\u043A\u0440\u043E\u043B\u043B\u0435\r\n    const fadeElements = document.querySelectorAll('.fade-in');\r\n    \r\n    const observer = new IntersectionObserver((entries) => {\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting) {\r\n                entry.target.classList.add('visible');\r\n            }\r\n        });\r\n    }, {\r\n        threshold: 0.1\r\n    });\r\n    \r\n    fadeElements.forEach(element => {\r\n        observer.observe(element);\r\n    });\r\n\r\n    // Header scroll effect\r\n    window.addEventListener('scroll', function() {\r\n        const header = document.querySelector('header');\r\n        if (window.scrollY > 50) {\r\n            header.classList.add('scrolled');\r\n        } else {\r\n            header.classList.remove('scrolled');\r\n        }\r\n    });\r\n\r\n    // \u0412\u044B\u0431\u043E\u0440 \u0442\u0438\u043F\u0430 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430\r\n    const typeOptions = document.querySelectorAll('.type-option');\r\n    const materialTypeInput = document.getElementById('material-type');\r\n    const previewIcon = document.getElementById('preview-icon');\r\n    const previewType = document.getElementById('preview-type');\r\n    const fileTypeInfo = document.getElementById('file-type-info');\r\n    const fileLabelText = document.getElementById('file-label-text');\r\n    const fileUploadGroup = document.getElementById('file-upload-group');\r\n    const linkInputGroup = document.getElementById('link-input-group');\r\n    const materialUrl = document.getElementById('material-url');\r\n    const urlPreview = document.getElementById('url-preview');\r\n    const previewUrl = document.getElementById('preview-url');\r\n    const previewLink = document.getElementById('preview-link');\r\n    const previewLinkUrl = document.getElementById('preview-link-url');\r\n    \r\n    typeOptions.forEach(option => {\r\n        option.addEventListener('click', function() {\r\n            // \u0423\u0431\u0438\u0440\u0430\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u0443 \u0432\u0441\u0435\u0445 \u043E\u043F\u0446\u0438\u0439\r\n            typeOptions.forEach(opt => opt.classList.remove('active'));\r\n            // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u043A \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u043E\u043F\u0446\u0438\u0438\r\n            this.classList.add('active');\r\n            \r\n            // \u041F\u043E\u043B\u0443\u0447\u0430\u0435\u043C \u0442\u0438\u043F \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430\r\n            const type = this.getAttribute('data-type');\r\n            materialTypeInput.value = type;\r\n            \r\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043A\u043E\u043D\u043A\u0443 \u0438 \u0442\u0435\u043A\u0441\u0442 \u0432 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\r\n            updatePreviewByType(type);\r\n            \r\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043C\u044B\u0445 \u0444\u0430\u0439\u043B\u0430\u0445\r\n            updateFileTypeInfo(type);\r\n            \r\n            // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C/\u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u043F\u043E\u043B\u044F \u0432\u0432\u043E\u0434\u0430\r\n            toggleInputFields(type);\r\n        });\r\n    });\r\n    \r\n    function updatePreviewByType(type) {\r\n        const typeNames = {\r\n            'video': '\u0412\u0438\u0434\u0435\u043E',\r\n            'document': '\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442',\r\n            'presentation': '\u041F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044F',\r\n            'code': '\u041A\u043E\u0434/\u041F\u0440\u0438\u043C\u0435\u0440\u044B',\r\n            'task': '\u0417\u0430\u0434\u0430\u043D\u0438\u0435',\r\n            'test': '\u0422\u0435\u0441\u0442',\r\n            'link': '\u0421\u0441\u044B\u043B\u043A\u0430'\r\n        };\r\n        \r\n        const typeIcons = {\r\n            'video': 'fas fa-play',\r\n            'document': 'far fa-file-pdf',\r\n            'presentation': 'far fa-file-powerpoint',\r\n            'code': 'fas fa-code',\r\n            'task': 'fas fa-tasks',\r\n            'test': 'fas fa-question-circle',\r\n            'link': 'fas fa-link'\r\n        };\r\n        \r\n        const typeColors = {\r\n            'video': 'icon-video',\r\n            'document': 'icon-document',\r\n            'presentation': 'icon-presentation',\r\n            'code': 'icon-code',\r\n            'task': 'icon-task',\r\n            'test': 'icon-test',\r\n            'link': 'icon-link'\r\n        };\r\n        \r\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0438\u043A\u043E\u043D\u043A\u0443\r\n        previewIcon.className = 'preview-icon ' + typeColors[type];\r\n        previewIcon.innerHTML = `<i class=\"${typeIcons[type]}\"></i>`;\r\n        \r\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0442\u0435\u043A\u0441\u0442\r\n        previewType.textContent = `\u0422\u0438\u043F: ${typeNames[type]}`;\r\n        \r\n        // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C/\u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u0441\u0441\u044B\u043B\u043A\u0443 \u0432 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\r\n        if (type === 'link') {\r\n            previewLink.style.display = 'block';\r\n        } else {\r\n            previewLink.style.display = 'none';\r\n        }\r\n    }\r\n    \r\n    function updateFileTypeInfo(type) {\r\n        const fileInfo = {\r\n            'video': '\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F MP4, AVI, MOV, WebM (\u043C\u0430\u043A\u0441. 2GB)',\r\n            'document': '\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F PDF, DOC, DOCX, TXT (\u043C\u0430\u043A\u0441. 100MB)',\r\n            'presentation': '\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F PPT, PPTX, PDF (\u043C\u0430\u043A\u0441. 100MB)',\r\n            'code': '\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F ZIP, RAR, \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u043A\u043E\u0434\u0430 (\u043C\u0430\u043A\u0441. 50MB)',\r\n            'task': '\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F PDF, DOC, ZIP \u0441 \u0437\u0430\u0434\u0430\u043D\u0438\u044F\u043C\u0438 (\u043C\u0430\u043A\u0441. 50MB)',\r\n            'test': '\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u044B\u0439 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u0442\u0435\u0441\u0442\u043E\u0432',\r\n            'link': '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 URL (\u043D\u0430\u0447\u0438\u043D\u0430\u0435\u0442\u0441\u044F \u0441 http:// \u0438\u043B\u0438 https://)'\r\n        };\r\n        \r\n        const fileLabels = {\r\n            'video': '\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0432\u0438\u0434\u0435\u043E\u0444\u0430\u0439\u043B',\r\n            'document': '\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442',\r\n            'presentation': '\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044E',\r\n            'code': '\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0430\u0440\u0445\u0438\u0432 \u0441 \u043A\u043E\u0434\u043E\u043C',\r\n            'task': '\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0441 \u0437\u0430\u0434\u0430\u043D\u0438\u0435\u043C',\r\n            'test': '\u0421\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0435\u0441\u0442',\r\n            'link': '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B'\r\n        };\r\n        \r\n        fileTypeInfo.textContent = fileInfo[type];\r\n        fileLabelText.textContent = fileLabels[type];\r\n    }\r\n    \r\n    function toggleInputFields(type) {\r\n        if (type === 'link') {\r\n            fileUploadGroup.style.display = 'none';\r\n            linkInputGroup.classList.add('active');\r\n            // \u0414\u0435\u043B\u0430\u0435\u043C \u043F\u043E\u043B\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C\r\n            materialUrl.required = true;\r\n            // \u0414\u0435\u043B\u0430\u0435\u043C \u043F\u043E\u043B\u0435 \u0444\u0430\u0439\u043B\u0430 \u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C\r\n            document.getElementById('material-file').required = false;\r\n        } else if (type === 'test') {\r\n            fileUploadGroup.style.display = 'none';\r\n            linkInputGroup.classList.remove('active');\r\n            // \u041E\u0431\u0430 \u043F\u043E\u043B\u044F \u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\r\n            document.getElementById('material-file').required = false;\r\n            materialUrl.required = false;\r\n        } else {\r\n            fileUploadGroup.style.display = 'block';\r\n            linkInputGroup.classList.remove('active');\r\n            // \u0414\u0435\u043B\u0430\u0435\u043C \u043F\u043E\u043B\u0435 \u0444\u0430\u0439\u043B\u0430 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C\r\n            document.getElementById('material-file').required = true;\r\n            // \u0414\u0435\u043B\u0430\u0435\u043C \u043F\u043E\u043B\u0435 \u0441\u0441\u044B\u043B\u043A\u0438 \u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u043C\r\n            materialUrl.required = false;\r\n        }\r\n    }\r\n    \r\n    // \u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0432 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u0432\u0440\u0435\u043C\u0435\u043D\u0438\r\n    const titleInput = document.getElementById('material-title');\r\n    const descInput = document.getElementById('material-desc');\r\n    const durationInput = document.getElementById('material-duration');\r\n    \r\n    const previewTitle = document.getElementById('preview-title');\r\n    const previewDesc = document.getElementById('preview-desc');\r\n    const previewDuration = document.getElementById('preview-duration');\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u043F\u043E\u043B\u0435\u0439\r\n    titleInput.addEventListener('input', function() {\r\n        previewTitle.textContent = this.value || '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430';\r\n    });\r\n    \r\n    descInput.addEventListener('input', function() {\r\n        previewDesc.textContent = this.value || '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\r\n    });\r\n    \r\n    durationInput.addEventListener('input', function() {\r\n        if (this.value) {\r\n            previewDuration.textContent = `\u0412\u0440\u0435\u043C\u044F: ${this.value} \u043C\u0438\u043D.`;\r\n        } else {\r\n            previewDuration.textContent = '\u0412\u0440\u0435\u043C\u044F: -';\r\n        }\r\n    });\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u0441\u0441\u044B\u043B\u043A\u0438\r\n    materialUrl.addEventListener('input', function() {\r\n        if (this.value) {\r\n            previewUrl.href = this.value;\r\n            previewUrl.textContent = this.value;\r\n            urlPreview.classList.add('active');\r\n            \r\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0441\u0441\u044B\u043B\u043A\u0443 \u0432 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430\r\n            previewLinkUrl.href = this.value;\r\n            previewLinkUrl.textContent = this.value;\r\n        } else {\r\n            urlPreview.classList.remove('active');\r\n        }\r\n    });\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0444\u043E\u0440\u043C\u044B\r\n    const form = document.getElementById('material-form');\r\n    form.addEventListener('submit', function(e) {\r\n        e.preventDefault();\r\n        \r\n        // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C \u0432\u0430\u043B\u0438\u0434\u043D\u043E\u0441\u0442\u044C URL, \u0435\u0441\u043B\u0438 \u0432\u044B\u0431\u0440\u0430\u043D \u0442\u0438\u043F \"\u0421\u0441\u044B\u043B\u043A\u0430\"\r\n        const materialType = materialTypeInput.value;\r\n        if (materialType === 'link') {\r\n            const url = materialUrl.value;\r\n            if (!isValidUrl(url)) {\r\n                alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 URL (\u043D\u0430\u0447\u0438\u043D\u0430\u0435\u0442\u0441\u044F \u0441 http:// \u0438\u043B\u0438 https://)');\r\n                materialUrl.focus();\r\n                return;\r\n            }\r\n        }\r\n        \r\n        // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\r\n        alert('\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D!');\r\n        // form.reset();\r\n        \r\n        // \u0421\u0431\u0440\u043E\u0441 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\n        previewTitle.textContent = '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430';\r\n        previewDesc.textContent = '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\r\n        previewDuration.textContent = '\u0412\u0440\u0435\u043C\u044F: -';\r\n        urlPreview.classList.remove('active');\r\n        previewLink.style.display = 'none';\r\n    });\r\n    \r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 URL\r\n    function isValidUrl(string) {\r\n        try {\r\n            new URL(string);\r\n            return string.startsWith('http://') || string.startsWith('https://');\r\n        } catch (_) {\r\n            return false;\r\n        }\r\n    }\r\n}", "export function initMaterialBrowser() {\r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u043F\u0440\u0438 \u0441\u043A\u0440\u043E\u043B\u043B\u0435\r\n    const fadeElements = document.querySelectorAll('.fade-in');\r\n    \r\n    const observer = new IntersectionObserver((entries) => {\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting) {\r\n                entry.target.classList.add('visible');\r\n            }\r\n        });\r\n    }, {\r\n        threshold: 0.1\r\n    });\r\n    \r\n    fadeElements.forEach(element => {\r\n        observer.observe(element);\r\n    });\r\n\r\n    // Header scroll effect\r\n    window.addEventListener('scroll', function() {\r\n        const header = document.querySelector('header');\r\n        if (window.scrollY > 50) {\r\n            header.classList.add('scrolled');\r\n        } else {\r\n            header.classList.remove('scrolled');\r\n        }\r\n    });\r\n\r\n    // \u0424\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u044F \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u043F\u043E \u0442\u0435\u043C\u0430\u043C \u0438 \u0442\u0438\u043F\u0430\u043C\r\n    const topicItems = document.querySelectorAll('.topic-item');\r\n    const filterItems = document.querySelectorAll('.filter-item');\r\n    const materialCards = document.querySelectorAll('.material-card');\r\n    const materialsTitle = document.querySelector('.materials-title');\r\n    const materialsDescription = document.querySelector('.materials-description');\r\n    \r\n    let currentTopic = 'all';\r\n    let currentType = 'all';\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u0442\u0435\u043C\r\n    topicItems.forEach(item => {\r\n        item.addEventListener('click', function() {\r\n            const topic = this.getAttribute('data-topic');\r\n            \r\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\r\n            topicItems.forEach(t => t.classList.remove('active'));\r\n            this.classList.add('active');\r\n            \r\n            currentTopic = topic;\r\n            filterMaterials();\r\n            updateMaterialsHeader();\r\n        });\r\n    });\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u0442\u0438\u043F\u043E\u0432 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n    filterItems.forEach(item => {\r\n        item.addEventListener('click', function() {\r\n            const type = this.getAttribute('data-type');\r\n            \r\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\r\n            filterItems.forEach(f => f.classList.remove('active'));\r\n            this.classList.add('active');\r\n            \r\n            currentType = type;\r\n            filterMaterials();\r\n            updateMaterialsHeader();\r\n        });\r\n    });\r\n    \r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n    function filterMaterials() {\r\n        let visibleCount = 0;\r\n        \r\n        materialCards.forEach(card => {\r\n            const cardTopic = card.getAttribute('data-topic');\r\n            const cardType = card.getAttribute('data-type');\r\n            \r\n            const topicMatch = currentTopic === 'all' || cardTopic === currentTopic;\r\n            const typeMatch = currentType === 'all' || cardType === currentType;\r\n            \r\n            if (topicMatch && typeMatch) {\r\n                card.style.display = 'block';\r\n                visibleCount++;\r\n                \r\n                // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n                setTimeout(() => {\r\n                    card.style.opacity = '1';\r\n                    card.style.transform = 'translateY(0)';\r\n                }, 100);\r\n            } else {\r\n                card.style.opacity = '0';\r\n                card.style.transform = 'translateY(20px)';\r\n                setTimeout(() => {\r\n                    card.style.display = 'none';\r\n                }, 300);\r\n            }\r\n        });\r\n        \r\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0441\u0447\u0435\u0442\u0447\u0438\u043A \u0432\u0438\u0434\u0438\u043C\u044B\u0445 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n        const descriptionElement = document.querySelector('.materials-description');\r\n        if (descriptionElement) {\r\n            descriptionElement.textContent = `${visibleCount} \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u043F\u043E \u043E\u0441\u043D\u043E\u0432\u0430\u043C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F`;\r\n        }\r\n        \r\n        // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C/\u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u043E \u043F\u0443\u0441\u0442\u043E\u043C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0435\r\n        const emptyState = document.querySelector('.empty-state');\r\n        if (emptyState) {\r\n            if (visibleCount === 0) {\r\n                emptyState.style.display = 'block';\r\n            } else {\r\n                emptyState.style.display = 'none';\r\n            }\r\n        }\r\n    }\r\n    \r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043E\u0442 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u0442\u0435\u043C\u044B\r\n    function updateMaterialsHeader() {\r\n        const activeTopic = document.querySelector('.topic-item.active');\r\n        let topicName = '\u0412\u0441\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B';\r\n        \r\n        if (activeTopic) {\r\n            const topicSpan = activeTopic.querySelector('span');\r\n            if (topicSpan) {\r\n                topicName = topicSpan.textContent;\r\n            }\r\n        }\r\n        \r\n        if (materialsTitle) {\r\n            materialsTitle.textContent = topicName;\r\n        }\r\n    }\r\n    \r\n    // \u041F\u043E\u0438\u0441\u043A \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n    const searchInput = document.querySelector('.search-box input');\r\n    \r\n    if (searchInput) {\r\n        searchInput.addEventListener('input', function() {\r\n            const searchTerm = this.value.toLowerCase();\r\n            \r\n            materialCards.forEach(card => {\r\n                const titleElement = card.querySelector('h3');\r\n                const descriptionElement = card.querySelector('.material-description');\r\n                \r\n                if (titleElement && descriptionElement) {\r\n                    const title = titleElement.textContent.toLowerCase();\r\n                    const description = descriptionElement.textContent.toLowerCase();\r\n                    \r\n                    if (title.includes(searchTerm) || description.includes(searchTerm)) {\r\n                        card.style.display = 'block';\r\n                        setTimeout(() => {\r\n                            card.style.opacity = '1';\r\n                            card.style.transform = 'translateY(0)';\r\n                        }, 100);\r\n                    } else {\r\n                        card.style.opacity = '0';\r\n                        card.style.transform = 'translateY(20px)';\r\n                        setTimeout(() => {\r\n                            card.style.display = 'none';\r\n                        }, 300);\r\n                    }\r\n                }\r\n            });\r\n            \r\n            // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0441\u0447\u0435\u0442\u0447\u0438\u043A \u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u0438\u0441\u043A\u0430\r\n            updateMaterialCount();\r\n        });\r\n    }\r\n    \r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0447\u0435\u0442\u0447\u0438\u043A\u0430 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n    function updateMaterialCount() {\r\n        const visibleCards = document.querySelectorAll('.material-card[style*=\"display: block\"], .material-card:not([style*=\"display: none\"])');\r\n        const descriptionElement = document.querySelector('.materials-description');\r\n        \r\n        if (descriptionElement) {\r\n            descriptionElement.textContent = `${visibleCards.length} \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u043F\u043E \u043E\u0441\u043D\u043E\u0432\u0430\u043C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F`;\r\n        }\r\n    }\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0447\u0435\u0442\u0447\u0438\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\r\n    updateMaterialCount();\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n    materialCards.forEach(card => {\r\n        card.addEventListener('click', function(e) {\r\n            // \u0415\u0441\u043B\u0438 \u043A\u043B\u0438\u043A \u043D\u0435 \u043F\u043E \u043A\u043D\u043E\u043F\u043A\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F\r\n            if (!e.target.classList.contains('btn') && !e.target.closest('.btn')) {\r\n                const link = this.querySelector('a.btn');\r\n                if (link) {\r\n                    window.location.href = link.getAttribute('href');\r\n                }\r\n            }\r\n        });\r\n        \r\n        // \u042D\u0444\u0444\u0435\u043A\u0442\u044B \u043F\u0440\u0438 \u043D\u0430\u0432\u0435\u0434\u0435\u043D\u0438\u0438\r\n        card.addEventListener('mouseenter', function() {\r\n            this.style.transform = 'translateY(-5px) scale(1.02)';\r\n        });\r\n        \r\n        card.addEventListener('mouseleave', function() {\r\n            this.style.transform = 'translateY(0) scale(1)';\r\n        });\r\n    });\r\n    \r\n    // \u0421\u0431\u0440\u043E\u0441 \u0444\u0438\u043B\u044C\u0442\u0440\u043E\u0432\r\n    const resetFiltersBtn = document.querySelector('.reset-filters');\r\n    if (resetFiltersBtn) {\r\n        resetFiltersBtn.addEventListener('click', function() {\r\n            // \u0421\u0431\u0440\u043E\u0441 \u0442\u0435\u043C\r\n            topicItems.forEach(item => {\r\n                if (item.getAttribute('data-topic') === 'all') {\r\n                    item.classList.add('active');\r\n                } else {\r\n                    item.classList.remove('active');\r\n                }\r\n            });\r\n            \r\n            // \u0421\u0431\u0440\u043E\u0441 \u0442\u0438\u043F\u043E\u0432\r\n            filterItems.forEach(item => {\r\n                if (item.getAttribute('data-type') === 'all') {\r\n                    item.classList.add('active');\r\n                } else {\r\n                    item.classList.remove('active');\r\n                }\r\n            });\r\n            \r\n            // \u0421\u0431\u0440\u043E\u0441 \u043F\u043E\u0438\u0441\u043A\u0430\r\n            if (searchInput) {\r\n                searchInput.value = '';\r\n            }\r\n            \r\n            currentTopic = 'all';\r\n            currentType = 'all';\r\n            \r\n            filterMaterials();\r\n            updateMaterialsHeader();\r\n        });\r\n    }\r\n}", "export function initSchedulePage() {\r\n    // User data\r\n    const userName = \"\u0415\u043B\u0435\u043D\u0430 \u041F\u043B\u0435\u0445\u0430\u043D\u043E\u0432\u0430\";\r\n    \r\n    document.getElementById('userName').textContent = userName;\r\n\r\n    const nameParts = userName.split(' ');\r\n    const initials = nameParts.map(part => part[0]).join('').toUpperCase();\r\n    document.getElementById('userAvatar').textContent = initials;\r\n\r\n    // Calendar functionality\r\n    let currentDate = new Date(2024, 0, 10);\r\n    let currentView = 'month';\r\n    \r\n    let eventsStorage = {};\r\n    \r\n    // View selector\r\n    const viewOptions = document.querySelectorAll('.view-option');\r\n    viewOptions.forEach(option => {\r\n        option.addEventListener('click', function() {\r\n            viewOptions.forEach(opt => opt.classList.remove('active'));\r\n            this.classList.add('active');\r\n            \r\n            currentView = this.getAttribute('data-view');\r\n            switchView(currentView);\r\n        });\r\n    });\r\n\r\n    // Date navigation\r\n    const prevBtn = document.getElementById('prevBtn');\r\n    const nextBtn = document.getElementById('nextBtn');\r\n    const currentDateElement = document.getElementById('currentDate');\r\n    \r\n    // \u041C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E \u0434\u043B\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439\r\n    const modal = document.getElementById('eventModal');\r\n    const closeModalBtn = document.getElementById('closeModal');\r\n    const cancelEventBtn = document.getElementById('cancelEventBtn');\r\n    const addEventBtn = document.getElementById('addEventBtn');\r\n    const addEventBtnWeek = document.getElementById('addEventBtnWeek');\r\n    const addEventBtnDay = document.getElementById('addEventBtnDay');\r\n    const deleteEventBtn = document.getElementById('deleteEventBtn');\r\n    const eventForm = document.getElementById('eventForm');\r\n    const modalTitle = document.getElementById('modalTitle');\r\n    \r\n    let currentEventId = null;\r\n    let isEditing = false;\r\n\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0430\r\n    initScheduleExport();\r\n\r\n    // \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0438 \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044F\r\n    function updateDisplay() {\r\n        if (currentView === 'month') {\r\n            const monthNames = [\r\n                '\u042F\u043D\u0432\u0430\u0440\u044C', '\u0424\u0435\u0432\u0440\u0430\u043B\u044C', '\u041C\u0430\u0440\u0442', '\u0410\u043F\u0440\u0435\u043B\u044C', '\u041C\u0430\u0439', '\u0418\u044E\u043D\u044C',\r\n                '\u0418\u044E\u043B\u044C', '\u0410\u0432\u0433\u0443\u0441\u0442', '\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C', '\u041E\u043A\u0442\u044F\u0431\u0440\u044C', '\u041D\u043E\u044F\u0431\u0440\u044C', '\u0414\u0435\u043A\u0430\u0431\u0440\u044C'\r\n            ];\r\n            currentDateElement.textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;\r\n        } else if (currentView === 'week') {\r\n            const weekStart = new Date(currentDate);\r\n            weekStart.setDate(currentDate.getDate() - currentDate.getDay() + 1);\r\n            \r\n            const weekEnd = new Date(weekStart);\r\n            weekEnd.setDate(weekStart.getDate() + 6);\r\n            \r\n            const monthNames = [\r\n                '\u044F\u043D\u0432', '\u0444\u0435\u0432', '\u043C\u0430\u0440', '\u0430\u043F\u0440', '\u043C\u0430\u044F', '\u0438\u044E\u043D',\r\n                '\u0438\u044E\u043B', '\u0430\u0432\u0433', '\u0441\u0435\u043D', '\u043E\u043A\u0442', '\u043D\u043E\u044F', '\u0434\u0435\u043A'\r\n            ];\r\n            \r\n            currentDateElement.textContent = `${weekStart.getDate()} ${monthNames[weekStart.getMonth()]} - ${weekEnd.getDate()} ${monthNames[weekEnd.getMonth()]} ${weekEnd.getFullYear()}`;\r\n        } else if (currentView === 'day') {\r\n            const monthNames = [\r\n                '\u044F\u043D\u0432\u0430\u0440\u044F', '\u0444\u0435\u0432\u0440\u0430\u043B\u044F', '\u043C\u0430\u0440\u0442\u0430', '\u0430\u043F\u0440\u0435\u043B\u044F', '\u043C\u0430\u044F', '\u0438\u044E\u043D\u044F',\r\n                '\u0438\u044E\u043B\u044F', '\u0430\u0432\u0433\u0443\u0441\u0442\u0430', '\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F', '\u043E\u043A\u0442\u044F\u0431\u0440\u044F', '\u043D\u043E\u044F\u0431\u0440\u044F', '\u0434\u0435\u043A\u0430\u0431\u0440\u044F'\r\n            ];\r\n            const dayNames = ['\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435', '\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A', '\u0412\u0442\u043E\u0440\u043D\u0438\u043A', '\u0421\u0440\u0435\u0434\u0430', '\u0427\u0435\u0442\u0432\u0435\u0440\u0433', '\u041F\u044F\u0442\u043D\u0438\u0446\u0430', '\u0421\u0443\u0431\u0431\u043E\u0442\u0430'];\r\n            \r\n            currentDateElement.textContent = `${dayNames[currentDate.getDay()]}, ${currentDate.getDate()} ${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;\r\n        }\r\n        \r\n        updateMonthView();\r\n        updateWeekView();\r\n        updateDayView();\r\n        updateUpcomingEvents();\r\n        updateTodaySchedule();\r\n    }\r\n    \r\n    function switchView(view) {\r\n        document.querySelector('.month-view').style.display = 'none';\r\n        document.querySelector('.week-view').style.display = 'none';\r\n        document.querySelector('.day-view').style.display = 'none';\r\n        \r\n        document.querySelector(`.${view}-view`).style.display = 'block';\r\n        \r\n        updateDisplay();\r\n    }\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044F\r\n    initializeSampleEvents();\r\n    updateDisplay();\r\n    switchView('month');\r\n}\r\n\r\nexport function initScheduleCreatePage() {\r\n    // User data\r\n    const userName = \"\u0415\u043B\u0435\u043D\u0430 \u041F\u043B\u0435\u0445\u0430\u043D\u043E\u0432\u0430\";\r\n    \r\n    document.getElementById('userName').textContent = userName;\r\n    \r\n    const nameParts = userName.split(' ');\r\n    const initials = nameParts.map(part => part[0]).join('').toUpperCase();\r\n    document.getElementById('userAvatar').textContent = initials;\r\n\r\n    // Set default date to today\r\n    const today = new Date();\r\n    const formattedDate = today.toISOString().split('T')[0];\r\n    document.getElementById('lessonDate').value = formattedDate;\r\n    \r\n    // Set default time to next full hour\r\n    const nextHour = today.getHours() + 1;\r\n    document.getElementById('lessonTime').value = `${nextHour.toString().padStart(2, '0')}:00`;\r\n    \r\n    // Color selection\r\n    const colorOptions = document.querySelectorAll('.color-option');\r\n    let selectedColor = '#4A6FA5';\r\n    \r\n    colorOptions.forEach(option => {\r\n        option.addEventListener('click', function() {\r\n            colorOptions.forEach(opt => opt.classList.remove('selected'));\r\n            this.classList.add('selected');\r\n            selectedColor = this.getAttribute('data-color');\r\n            updatePreview();\r\n        });\r\n    });\r\n    \r\n    // Repeat options\r\n    const repeatOptions = document.querySelectorAll('.repeat-option');\r\n    const weeklyOptions = document.getElementById('weeklyOptions');\r\n    \r\n    repeatOptions.forEach(option => {\r\n        option.addEventListener('click', function() {\r\n            repeatOptions.forEach(opt => opt.classList.remove('selected'));\r\n            this.classList.add('selected');\r\n            \r\n            if (this.getAttribute('data-repeat') === 'weekly') {\r\n                weeklyOptions.style.display = 'block';\r\n            } else {\r\n                weeklyOptions.style.display = 'none';\r\n            }\r\n        });\r\n    });\r\n    \r\n    // Day selection\r\n    const dayOptions = document.querySelectorAll('.day-option');\r\n    \r\n    dayOptions.forEach(option => {\r\n        option.addEventListener('click', function() {\r\n            this.classList.toggle('selected');\r\n        });\r\n    });\r\n    \r\n    // Template selection\r\n    const templateCards = document.querySelectorAll('.template-card');\r\n    \r\n    templateCards.forEach(card => {\r\n        card.addEventListener('click', function() {\r\n            const template = this.getAttribute('data-template');\r\n            applyTemplate(template);\r\n        });\r\n    });\r\n    \r\n    // Form submission\r\n    const saveBtn = document.getElementById('saveBtn');\r\n    const cancelBtn = document.getElementById('cancelBtn');\r\n    \r\n    saveBtn.addEventListener('click', function() {\r\n        if (validateForm()) {\r\n            alert('\u0420\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u043E!');\r\n            window.location.href = '/frontend/templates/journal/schedule.html';\r\n        }\r\n    });\r\n    \r\n    cancelBtn.addEventListener('click', function() {\r\n        if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F? \u0412\u0441\u0435 \u043D\u0435\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0431\u0443\u0434\u0443\u0442 \u043F\u043E\u0442\u0435\u0440\u044F\u043D\u044B.')) {\r\n            window.location.href = '/frontend/templates/journal/schedule.html';\r\n        }\r\n    });\r\n    \r\n    function validateForm() {\r\n        const title = document.getElementById('lessonTitle').value;\r\n        const subject = document.getElementById('subjectSelect').value;\r\n        const classSelect = document.getElementById('classSelect').value;\r\n        const date = document.getElementById('lessonDate').value;\r\n        const time = document.getElementById('lessonTime').value;\r\n        \r\n        if (!title) {\r\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043D\u044F\u0442\u0438\u044F');\r\n            return false;\r\n        }\r\n        \r\n        if (!subject) {\r\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442');\r\n            return false;\r\n        }\r\n        \r\n        if (!classSelect) {\r\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043B\u0430\u0441\u0441');\r\n            return false;\r\n        }\r\n        \r\n        if (!date) {\r\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0437\u0430\u043D\u044F\u0442\u0438\u044F');\r\n            return false;\r\n        }\r\n        \r\n        if (!time) {\r\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043C\u044F \u0437\u0430\u043D\u044F\u0442\u0438\u044F');\r\n            return false;\r\n        }\r\n        \r\n        return true;\r\n    }\r\n    \r\n    function applyTemplate(template) {\r\n        let duration, description;\r\n        \r\n        switch(template) {\r\n            case 'standard':\r\n                duration = '45';\r\n                description = '\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u043E\u0435 45-\u043C\u0438\u043D\u0443\u0442\u043D\u043E\u0435 \u0437\u0430\u043D\u044F\u0442\u0438\u0435 \u0441 15-\u043C\u0438\u043D\u0443\u0442\u043D\u044B\u043C \u043F\u0435\u0440\u0435\u0440\u044B\u0432\u043E\u043C \u043C\u0435\u0436\u0434\u0443 \u0443\u0440\u043E\u043A\u0430\u043C\u0438.';\r\n                break;\r\n            case 'block':\r\n                duration = '90';\r\n                description = '\u0411\u043B\u043E\u0447\u043D\u043E\u0435 \u0437\u0430\u043D\u044F\u0442\u0438\u0435 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 90 \u043C\u0438\u043D\u0443\u0442 \u0441 30-\u043C\u0438\u043D\u0443\u0442\u043D\u044B\u043C \u043F\u0435\u0440\u0435\u0440\u044B\u0432\u043E\u043C \u043F\u043E\u0441\u043B\u0435.';\r\n                break;\r\n            case 'intensive':\r\n                duration = '120';\r\n                description = '\u0418\u043D\u0442\u0435\u043D\u0441\u0438\u0432\u043D\u043E\u0435 \u0441\u0434\u0432\u043E\u0435\u043D\u043D\u043E\u0435 \u0437\u0430\u043D\u044F\u0442\u0438\u0435 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C\u044E 2 \u0447\u0430\u0441\u0430.';\r\n                break;\r\n            case 'custom':\r\n                alert('\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F \u0432\u0440\u0443\u0447\u043D\u0443\u044E');\r\n                return;\r\n        }\r\n        \r\n        document.getElementById('durationSelect').value = duration;\r\n        document.getElementById('lessonDescription').value = description;\r\n        \r\n        updatePreview();\r\n    }\r\n    \r\n    function updatePreview() {\r\n        console.log('Preview updated with color:', selectedColor);\r\n    }\r\n    \r\n    const formInputs = document.querySelectorAll('.form-input, .form-select, .form-textarea');\r\n    \r\n    formInputs.forEach(input => {\r\n        input.addEventListener('input', updatePreview);\r\n        input.addEventListener('change', updatePreview);\r\n    });\r\n}\r\n\r\n// \u0412\u0441\u043F\u043E\u043C\u043E\u0433\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F\r\nfunction initScheduleExport() {\r\n    // TODO: \u0440\u0435\u0430\u043B\u0438\u0437\u043E\u0432\u0430\u0442\u044C \u044D\u043A\u0441\u043F\u043E\u0440\u0442 \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u044F\r\n    console.log('Schedule export initialized');\r\n}\r\n\r\nfunction initializeSampleEvents() {\r\n    // TODO: \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u043C\u0435\u0440\u044B \u0441\u043E\u0431\u044B\u0442\u0438\u0439\r\n    console.log('Sample events initialized');\r\n}\r\n\r\nfunction updateMonthView() {\r\n    // TODO: \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u0435\u0441\u044F\u0446\u0430\r\n    console.log('Month view updated');\r\n}\r\n\r\nfunction updateWeekView() {\r\n    // TODO: \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0435\u0434\u0435\u043B\u0438\r\n    console.log('Week view updated');\r\n}\r\n\r\nfunction updateDayView() {\r\n    // TODO: \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u043D\u044F\r\n    console.log('Day view updated');\r\n}\r\n\r\nfunction updateUpcomingEvents() {\r\n    // TODO: \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u0441\u0442\u043E\u044F\u0449\u0438\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u044F\r\n    console.log('Upcoming events updated');\r\n}\r\n\r\nfunction updateTodaySchedule() {\r\n    // TODO: \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0440\u0430\u0441\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043D\u0430 \u0441\u0435\u0433\u043E\u0434\u043D\u044F\r\n    console.log('Today schedule updated');\r\n}", "// \u041C\u043E\u0434\u0443\u043B\u044C \u0434\u043B\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438 \u0447\u0430\u0442\u0430 \u0441 \u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u0435\u0439\nexport function initChat() {\n    const sendButton = document.getElementById('sendButton');\n    const messageInput = document.getElementById('messageInput');\n    \n    if (!sendButton || !messageInput) return;\n\n    // \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443\n    sendButton.addEventListener('click', sendMessage);\n    \n    // \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043F\u043E \u043D\u0430\u0436\u0430\u0442\u0438\u044E Enter\n    messageInput.addEventListener('keydown', function(e) {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            sendMessage();\n        }\n    });\n    \n    // \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0432\u044B\u0441\u043E\u0442\u044B textarea\n    messageInput.addEventListener('input', function() {\n        this.style.height = 'auto';\n        this.style.height = (this.scrollHeight) + 'px';\n    });\n    \n    // \u041F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430 \u0432\u043D\u0438\u0437 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\n    scrollToBottom();\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F\nexport function sendMessage() {\n    const messageInput = document.getElementById('messageInput');\n    const messageText = messageInput.value.trim();\n    \n    if (messageText === '') return;\n    \n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\n    addMessage(messageText, 'user');\n    \n    // \u041E\u0447\u0438\u0449\u0430\u0435\u043C \u043F\u043E\u043B\u0435 \u0432\u0432\u043E\u0434\u0430\n    messageInput.value = '';\n    \n    // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440 \u043D\u0430\u0431\u043E\u0440\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F\n    showTypingIndicator();\n    \n    // \u0418\u043C\u0438\u0442\u0438\u0440\u0443\u0435\u043C \u043E\u0442\u0432\u0435\u0442 \u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 1-2 \u0441\u0435\u043A\u0443\u043D\u0434\u044B\n    setTimeout(() => {\n        removeTypingIndicator();\n        const response = generateResponse(messageText);\n        addMessage(response, 'anastasia');\n        \n        // \u041F\u0440\u043E\u043A\u0440\u0443\u0447\u0438\u0432\u0430\u0435\u043C \u0447\u0430\u0442 \u0432\u043D\u0438\u0437\n        scrollToBottom();\n    }, 1500);\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u0432 \u0447\u0430\u0442\nexport function addMessage(text, sender) {\n    const chatMessages = document.getElementById('chatMessages');\n    const messageDiv = document.createElement('div');\n    messageDiv.className = `message ${sender}`;\n    \n    const now = new Date();\n    const timeString = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;\n    \n    if (sender === 'anastasia') {\n        messageDiv.innerHTML = `\n            <div class=\"message-avatar\">\n                <img src=\"/frontend/static/assets/image/logo/Anastasia.svg\" alt=\"\u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u044F\">\n            </div>\n            <div class=\"message-content\">\n                <div class=\"message-text\">${text}</div>\n                <div class=\"message-time\">${timeString}</div>\n            </div>\n        `;\n    } else {\n        messageDiv.innerHTML = `\n            <div class=\"message-content\">\n                <div class=\"message-text\">${text}</div>\n                <div class=\"message-time\">${timeString}</div>\n            </div>\n            <div class=\"message-avatar\">\n                <i class=\"fas fa-user\"></i>\n            </div>\n        `;\n    }\n    \n    chatMessages.appendChild(messageDiv);\n    scrollToBottom();\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043F\u043E\u043A\u0430\u0437\u0430 \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440\u0430 \u043D\u0430\u0431\u043E\u0440\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F\nexport function showTypingIndicator() {\n    const chatMessages = document.getElementById('chatMessages');\n    const typingDiv = document.createElement('div');\n    typingDiv.className = 'typing-indicator';\n    typingDiv.id = 'typingIndicator';\n    typingDiv.innerHTML = `\n        <div class=\"message-avatar\">\n            <img src=\"/frontend/static/assets/image/logo/Anastasia.svg\" alt=\"\u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u044F\">\n        </div>\n        <div class=\"message-content\">\n            <div class=\"typing-dot\"></div>\n            <div class=\"typing-dot\"></div>\n            <div class=\"typing-dot\"></div>\n        </div>\n    `;\n    \n    chatMessages.appendChild(typingDiv);\n    scrollToBottom();\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0438\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440\u0430 \u043D\u0430\u0431\u043E\u0440\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F\nexport function removeTypingIndicator() {\n    const typingIndicator = document.getElementById('typingIndicator');\n    if (typingIndicator) {\n        typingIndicator.remove();\n    }\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0438 \u0447\u0430\u0442\u0430 \u0432\u043D\u0438\u0437\nexport function scrollToBottom() {\n    const chatMessages = document.getElementById('chatMessages');\n    if (chatMessages) {\n        chatMessages.scrollTop = chatMessages.scrollHeight;\n    }\n}\n\nexport function generateResponse(userMessage) {\n    const lowerMessage = userMessage.toLowerCase();\n    \n    if (lowerMessage.includes('\u043F\u0440\u0438\u0432\u0435\u0442') || lowerMessage.includes('\u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439')) {\n        return '\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435! \u0420\u0430\u0434\u0430 \u0441\u043D\u043E\u0432\u0430 \u0432\u0430\u0441 \u0432\u0438\u0434\u0435\u0442\u044C. \u0427\u0435\u043C \u043C\u043E\u0433\u0443 \u043F\u043E\u043C\u043E\u0447\u044C?';\n    } else if (lowerMessage.includes('\u0442\u0435\u0441\u0442') || lowerMessage.includes('\u0432\u043E\u043F\u0440\u043E\u0441')) {\n        return '\u042F \u043C\u043E\u0433\u0443 \u043F\u043E\u043C\u043E\u0447\u044C \u0432\u0430\u043C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442 \u043F\u043E \u043D\u0443\u0436\u043D\u043E\u0439 \u0442\u0435\u043C\u0435. \u041A\u0430\u043A\u0438\u0435 \u0440\u0430\u0437\u0434\u0435\u043B\u044B \u0432\u044B \u0445\u043E\u0442\u0435\u043B\u0438 \u0431\u044B \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C?';\n    } else if (lowerMessage.includes('\u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C') || lowerMessage.includes('\u0440\u0430\u0431\u043E\u0442\u0430')) {\n        return '\u0414\u043B\u044F \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u0440\u0430\u0431\u043E\u0442\u044B, \u043F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0441 \u0437\u0430\u0434\u0430\u043D\u0438\u0435\u043C, \u0438 \u044F \u043F\u0440\u043E\u0430\u043D\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u044E \u0435\u0433\u043E.';\n    } else if (lowerMessage.includes('python') || lowerMessage.includes('\u043F\u0438\u0442\u043E\u043D')) {\n        return 'Python - \u043E\u0442\u043B\u0438\u0447\u043D\u044B\u0439 \u0432\u044B\u0431\u043E\u0440! \u042D\u0442\u043E \u043C\u043E\u0449\u043D\u044B\u0439 \u0438 \u043F\u043E\u043D\u044F\u0442\u043D\u044B\u0439 \u044F\u0437\u044B\u043A \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F. \u041F\u043E \u043A\u0430\u043A\u043E\u0439 \u0442\u0435\u043C\u0435 \u0432\u0430\u043C \u043D\u0443\u0436\u043D\u0430 \u043F\u043E\u043C\u043E\u0449\u044C?';\n    } else if (lowerMessage.includes('\u0441\u043F\u0430\u0441\u0438\u0431\u043E')) {\n        return '\u0412\u0441\u0435\u0433\u0434\u0430 \u0440\u0430\u0434\u0430 \u043F\u043E\u043C\u043E\u0447\u044C! \u0415\u0441\u043B\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044C \u0435\u0449\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u044B, \u043E\u0431\u0440\u0430\u0449\u0430\u0439\u0442\u0435\u0441\u044C.';\n    } else {\n        return '\u042F \u043F\u043E\u043D\u044F\u043B\u0430 \u0432\u0430\u0448 \u0432\u043E\u043F\u0440\u043E\u0441. \u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043E\u0431\u0441\u0443\u0434\u0438\u043C \u044D\u0442\u043E \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435. \u041C\u043E\u0436\u0435\u0442\u0435 \u0443\u0442\u043E\u0447\u043D\u0438\u0442\u044C, \u0447\u0442\u043E \u0438\u043C\u0435\u043D\u043D\u043E \u0432\u0430\u0441 \u0438\u043D\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442?';\n    }\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u044B\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439\nexport function quickAction(action) {\n    let message = '';\n    \n    switch(action) {\n        case 'variables':\n            message = '\u0425\u043E\u0447\u0443 \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0442\u0435\u0441\u0442 \u043F\u043E \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u043C \u0438 \u0442\u0438\u043F\u0430\u043C \u0434\u0430\u043D\u043D\u044B\u0445 \u0432 Python.';\n            break;\n        case 'syntax':\n            message = '\u041D\u0443\u0436\u0435\u043D \u0442\u0435\u0441\u0442 \u043F\u043E \u0431\u0430\u0437\u043E\u0432\u043E\u043C\u0443 \u0441\u0438\u043D\u0442\u0430\u043A\u0441\u0438\u0441\u0443 Python.';\n            break;\n        case 'functions':\n            message = '\u0418\u043D\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u0442\u0435\u0441\u0442 \u043F\u043E \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C \u0432 Python.';\n            break;\n        case 'all':\n            message = '\u0421\u043E\u0437\u0434\u0430\u0439 \u0442\u0435\u0441\u0442 \u043F\u043E \u0432\u0441\u0435\u043C \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u043C \u0442\u0435\u043C\u0430\u043C Python \u0434\u043B\u044F \u043D\u0430\u0447\u0438\u043D\u0430\u044E\u0449\u0438\u0445.';\n            break;\n        case 'preview':\n            message = '\u0414\u0430, \u0445\u043E\u0447\u0443 \u043F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u0442\u0435\u0441\u0442\u0430 \u043F\u0435\u0440\u0435\u0434 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C.';\n            break;\n        case 'save':\n            message = '\u0421\u043E\u0445\u0440\u0430\u043D\u0438 \u0442\u0435\u0441\u0442, \u043F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430.';\n            break;\n        case 'modify':\n            message = '\u0425\u043E\u0447\u0443 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0442\u0435\u0441\u0442\u0430.';\n            break;\n        default:\n            message = '\u0412\u044B\u0431\u0440\u0430\u043D\u043E \u0431\u044B\u0441\u0442\u043E\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435: ' + action;\n    }\n    \n    addMessage(message, 'user');\n    showTypingIndicator();\n    \n    setTimeout(() => {\n        removeTypingIndicator();\n        const response = generateQuickActionResponse(action);\n        addMessage(response, 'anastasia');\n        scrollToBottom();\n    }, 1500);\n}\n\nexport function generateQuickActionResponse(action) {\n    switch(action) {\n        case 'variables':\n            return '\u041E\u0442\u043B\u0438\u0447\u043D\u043E! \u0421\u043E\u0437\u0434\u0430\u043C \u0442\u0435\u0441\u0442 \u043F\u043E \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u043C \u0438 \u0442\u0438\u043F\u0430\u043C \u0434\u0430\u043D\u043D\u044B\u0445. \u0412\u043A\u043B\u044E\u0447\u0443 \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u043D\u0430 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0442\u0438\u043F\u043E\u0432, \u043F\u0440\u0435\u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u0438\u043F\u043E\u0432 \u0438 \u043E\u0431\u044A\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0445. \u0421\u043A\u043E\u043B\u044C\u043A\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u043D\u0443\u0436\u043D\u043E?';\n        case 'syntax':\n            return '\u0425\u043E\u0440\u043E\u0448\u043E! \u041F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u043B\u044E \u0442\u0435\u0441\u0442 \u043F\u043E \u0431\u0430\u0437\u043E\u0432\u043E\u043C\u0443 \u0441\u0438\u043D\u0442\u0430\u043A\u0441\u0438\u0441\u0443 Python: \u043E\u0442\u0441\u0442\u0443\u043F\u044B, \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438, \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043A\u043E\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u0438. \u041A\u0430\u043A\u043E\u0439 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0441\u043B\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u043F\u0440\u0435\u0434\u043F\u043E\u0447\u0442\u0438\u0442\u0435\u043B\u0435\u043D?';\n        case 'functions':\n            return '\u041E\u0442\u043B\u0438\u0447\u043D\u044B\u0439 \u0432\u044B\u0431\u043E\u0440! \u0424\u0443\u043D\u043A\u0446\u0438\u0438 - \u0432\u0430\u0436\u043D\u0430\u044F \u0442\u0435\u043C\u0430. \u0412\u043A\u043B\u044E\u0447\u0443 \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u043D\u0430 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0439, \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B, \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043C\u044B\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u0438 \u043E\u0431\u043B\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u0438.';\n        case 'all':\n            return '\u0421\u043E\u0437\u0434\u0430\u043C \u043A\u043E\u043C\u043F\u043B\u0435\u043A\u0441\u043D\u044B\u0439 \u0442\u0435\u0441\u0442 \u043F\u043E \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u043C \u0442\u0435\u043C\u0430\u043C Python \u0434\u043B\u044F \u043D\u0430\u0447\u0438\u043D\u0430\u044E\u0449\u0438\u0445. \u0412\u043A\u043B\u044E\u0447\u0443 \u0432\u043E\u043F\u0440\u043E\u0441\u044B \u043F\u043E \u0441\u0438\u043D\u0442\u0430\u043A\u0441\u0438\u0441\u0443, \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u043C, \u0442\u0438\u043F\u0430\u043C \u0434\u0430\u043D\u043D\u044B\u0445, \u043E\u043F\u0435\u0440\u0430\u0442\u043E\u0440\u0430\u043C, \u0443\u0441\u043B\u043E\u0432\u0438\u044F\u043C, \u0446\u0438\u043A\u043B\u0430\u043C \u0438 \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C.';\n        case 'preview':\n            return '\u0412\u043E\u0442 \u043F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0442\u0435\u0441\u0442\u0430:\\n\\n1. \u041A\u0430\u043A\u043E\u0439 \u0442\u0438\u043F \u0434\u0430\u043D\u043D\u044B\u0445 \u0443 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F 3.14?\\n2. \u041A\u0430\u043A \u043E\u0431\u044A\u044F\u0432\u0438\u0442\u044C \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0443\u044E \u0432 Python?\\n3. \u0427\u0442\u043E \u0432\u044B\u0432\u0435\u0434\u0435\u0442 print(2 + 3 * 4)?\\n\\n\u0425\u043E\u0442\u0438\u0442\u0435 \u0447\u0442\u043E-\u0442\u043E \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C?';\n        case 'save':\n            return '\u0422\u0435\u0441\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D! \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430\u0439\u0442\u0438 \u0435\u0433\u043E \u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u0435 \"\u041C\u043E\u0438 \u0442\u0435\u0441\u0442\u044B\". \u0425\u043E\u0442\u0438\u0442\u0435 \u043F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F \u0438\u043C \u0441\u043E \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C\u0438 \u0441\u0435\u0439\u0447\u0430\u0441?';\n        case 'modify':\n            return '\u041A\u0430\u043A\u0438\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0432\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C? \u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432, \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0441\u043B\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438\u043B\u0438 \u0442\u0435\u043C\u044B?';\n        default:\n            return '\u042F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043B\u0430 \u0432\u0430\u0448\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435. \u0427\u0435\u043C \u0435\u0449\u0435 \u043C\u043E\u0433\u0443 \u043F\u043E\u043C\u043E\u0447\u044C?';\n    }\n}", "// pages/dashboard.js\nexport function initDashboard() {\n    // Classes management functionality\n    const createClassBtn = document.getElementById('createClassBtn');\n    const createClassModal = document.getElementById('createClassModal');\n    const closeModal = document.getElementById('closeModal');\n    const cancelCreate = document.getElementById('cancelCreate');\n    const saveClass = document.getElementById('saveClass');\n    \n    // Open modal\n    createClassBtn.addEventListener('click', function() {\n        createClassModal.classList.add('active');\n    });\n    \n    // Close modal\n    function closeCreateModal() {\n        createClassModal.classList.remove('active');\n    }\n    \n    closeModal.addEventListener('click', closeCreateModal);\n    cancelCreate.addEventListener('click', closeCreateModal);\n    \n    // Save class\n    saveClass.addEventListener('click', function() {\n        const className = document.getElementById('className').value;\n        const classGrade = document.getElementById('classGrade').value;\n        const classDescription = document.getElementById('classDescription').value;\n        \n        if (!className) {\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043B\u0430\u0441\u0441\u0430');\n            return;\n        }\n        \n        console.log(`Creating class: ${className}, ${classGrade}, ${classDescription}`);\n        \n        alert(`\u041A\u043B\u0430\u0441\u0441 \"${className}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D!`);\n        \n        closeCreateModal();\n        document.getElementById('className').value = '';\n        document.getElementById('classDescription').value = '';\n    });\n    \n    // Search functionality\n    const searchInput = document.querySelector('.search-box input');\n    searchInput.addEventListener('input', function() {\n        const searchTerm = this.value.toLowerCase();\n        const classCards = document.querySelectorAll('.class-card');\n        \n        classCards.forEach(card => {\n            const className = card.querySelector('.class-info h3').textContent.toLowerCase();\n            if (className.includes(searchTerm)) {\n                card.style.display = 'block';\n            } else {\n                card.style.display = 'none';\n            }\n        });\n    });\n    \n    // Class actions\n    const actionButtons = document.querySelectorAll('.action-btn');\n    actionButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.stopPropagation();\n            const classCard = this.closest('.class-card');\n            const className = classCard.querySelector('.class-info h3').textContent;\n            \n            if (this.querySelector('.fa-edit')) {\n                alert(`\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u043B\u0430\u0441\u0441\u0430: ${className}`);\n            } else if (this.querySelector('.fa-cog')) {\n                alert(`\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A\u043B\u0430\u0441\u0441\u0430: ${className}`);\n            }\n        });\n    });\n\n    // Grades functionality\n    const gradeModal = document.getElementById('gradeModal');\n    const gradeCloseModal = document.getElementById('closeModal');\n    const cancelGrade = document.getElementById('cancelGrade');\n    const saveGrade = document.getElementById('saveGrade');\n    const gradeOptions = document.querySelectorAll('.grade-option');\n    const gradeCells = document.querySelectorAll('.grade-value');\n    const bulkActions = document.querySelectorAll('.bulk-action');\n    \n    let currentStudent = null;\n    let currentTask = null;\n    let selectedGrade = null;\n\n    // Open modal when clicking on a grade cell\n    gradeCells.forEach(cell => {\n        cell.addEventListener('click', function() {\n            const studentId = this.getAttribute('data-student');\n            const task = this.getAttribute('data-task');\n            \n            const studentName = getStudentName(studentId);\n            const taskName = getTaskName(task);\n            \n            document.getElementById('studentTaskInfo').textContent = \n                `\u0421\u0442\u0443\u0434\u0435\u043D\u0442: ${studentName} \u2022 \u0417\u0430\u0434\u0430\u043D\u0438\u0435: ${taskName}`;\n            \n            currentStudent = studentId;\n            currentTask = task;\n            \n            const currentGrade = this.querySelector('.grade-badge').textContent;\n            selectedGrade = currentGrade;\n            \n            gradeOptions.forEach(option => {\n                if (option.getAttribute('data-grade') === selectedGrade) {\n                    option.classList.add('selected');\n                }\n            });\n            \n            gradeModal.classList.add('active');\n        });\n    });\n\n    function closeGradeModal() {\n        gradeModal.classList.remove('active');\n        selectedGrade = null;\n        gradeOptions.forEach(option => {\n            option.classList.remove('selected');\n        });\n        document.getElementById('gradeComment').value = '';\n    }\n\n    gradeCloseModal.addEventListener('click', closeGradeModal);\n    cancelGrade.addEventListener('click', closeGradeModal);\n\n    gradeOptions.forEach(option => {\n        option.addEventListener('click', function() {\n            gradeOptions.forEach(opt => opt.classList.remove('selected'));\n            this.classList.add('selected');\n            selectedGrade = this.getAttribute('data-grade');\n        });\n    });\n\n    saveGrade.addEventListener('click', function() {\n        if (selectedGrade !== null) {\n            const comment = document.getElementById('gradeComment').value;\n            console.log(`Saving grade ${selectedGrade} for student ${currentStudent}, task ${currentTask}, comment: ${comment}`);\n            \n            const targetCell = document.querySelector(`.grade-value[data-student=\"${currentStudent}\"][data-task=\"${currentTask}\"]`);\n            const gradeBadge = targetCell.querySelector('.grade-badge');\n            \n            gradeBadge.textContent = selectedGrade;\n            \n            gradeBadge.className = 'grade-badge';\n            \n            if (selectedGrade === '5') {\n                gradeBadge.classList.add('grade-excellent');\n            } else if (selectedGrade === '4') {\n                gradeBadge.classList.add('grade-good');\n            } else if (selectedGrade === '3') {\n                gradeBadge.classList.add('grade-average');\n            } else {\n                gradeBadge.classList.add('grade-poor');\n            }\n            \n            updateStudentAverage(currentStudent);\n            \n            closeGradeModal();\n        } else {\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043E\u0446\u0435\u043D\u043A\u0443');\n        }\n    });\n\n    bulkActions.forEach(action => {\n        action.addEventListener('click', function() {\n            const actionId = this.id;\n            \n            if (actionId === 'addTask') {\n                alert('\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u0437\u0430\u0434\u0430\u043D\u0438\u044F');\n            } else if (actionId === 'importGrades') {\n                alert('\u0418\u043C\u043F\u043E\u0440\u0442 \u043E\u0446\u0435\u043D\u043E\u043A \u0438\u0437 \u0444\u0430\u0439\u043B\u0430');\n            } else if (actionId === 'exportGrades') {\n                alert('\u042D\u043A\u0441\u043F\u043E\u0440\u0442 \u043E\u0446\u0435\u043D\u043E\u043A \u0432 Excel');\n            } else if (actionId === 'generateReport') {\n                alert('\u041E\u0442\u0447\u0435\u0442 \u043E\u0431 \u0443\u0441\u043F\u0435\u0432\u0430\u0435\u043C\u043E\u0441\u0442\u0438 \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D');\n            }\n        });\n    });\n\n    const prevBtn = document.querySelector('.term-navigation .nav-btn:first-child');\n    const nextBtn = document.querySelector('.term-navigation .nav-btn:last-child');\n    const currentTermElement = document.querySelector('.current-term');\n    \n    const terms = ['I \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C', 'II \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C', 'III \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C', 'IV \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044C'];\n    let currentTermIndex = 0;\n    \n    function updateTerm() {\n        currentTermElement.textContent = terms[currentTermIndex];\n    }\n    \n    prevBtn.addEventListener('click', function() {\n        currentTermIndex--;\n        if (currentTermIndex < 0) {\n            currentTermIndex = terms.length - 1;\n        }\n        updateTerm();\n    });\n    \n    nextBtn.addEventListener('click', function() {\n        currentTermIndex++;\n        if (currentTermIndex >= terms.length) {\n            currentTermIndex = 0;\n        }\n        updateTerm();\n    });\n\n    function getStudentName(studentId) {\n        const students = {\n            '1': '\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432',\n            '2': '\u041C\u0430\u0440\u0438\u044F \u041F\u0435\u0442\u0440\u043E\u0432\u0430',\n            '3': '\u0410\u043B\u0435\u043A\u0441\u0435\u0439 \u0421\u0438\u0434\u043E\u0440\u043E\u0432',\n            '4': '\u0415\u043B\u0435\u043D\u0430 \u041D\u043E\u0432\u0438\u043A\u043E\u0432\u0430',\n            '5': '\u0414\u043C\u0438\u0442\u0440\u0438\u0439 \u041A\u043E\u0437\u043B\u043E\u0432'\n        };\n        return students[studentId] || '\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 \u0441\u0442\u0443\u0434\u0435\u043D\u0442';\n    }\n\n    function getTaskName(taskId) {\n        const tasks = {\n            'hw1': '\u0414\u0417 \u21161',\n            'test1': '\u0422\u0435\u0441\u0442 \u21161',\n            'project': '\u041F\u0440\u043E\u0435\u043A\u0442',\n            'hw2': '\u0414\u0417 \u21162',\n            'test2': '\u0422\u0435\u0441\u0442 \u21162'\n        };\n        return tasks[taskId] || '\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u0435';\n    }\n    \n    function updateStudentAverage(studentId) {\n        const studentCells = document.querySelectorAll(`.grade-value[data-student=\"${studentId}\"]`);\n        let sum = 0;\n        let count = 0;\n        \n        studentCells.forEach(cell => {\n            const grade = parseInt(cell.querySelector('.grade-badge').textContent);\n            if (!isNaN(grade)) {\n                sum += grade;\n                count++;\n            }\n        });\n        \n        if (count > 0) {\n            const average = (sum / count).toFixed(1);\n            const averageCell = document.querySelector(`tr[data-student=\"${studentId}\"] td:nth-child(7) .grade-badge`);\n            if (averageCell) {\n                averageCell.textContent = average;\n                \n                averageCell.className = 'grade-badge';\n                if (average >= 4.5) {\n                    averageCell.classList.add('grade-excellent');\n                } else if (average >= 3.5) {\n                    averageCell.classList.add('grade-good');\n                } else if (average >= 2.5) {\n                    averageCell.classList.add('grade-average');\n                } else {\n                    averageCell.classList.add('grade-poor');\n                }\n            }\n        }\n    }\n}", "export class Utils {\r\n    static isMobile() {\r\n        return window.innerWidth <= 992;\r\n    }\r\n\r\n    static formatTime(seconds) {\r\n        const minutes = Math.floor(seconds / 60);\r\n        const remainingSeconds = seconds % 60;\r\n        return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n    }\r\n\r\n    static getUrlParam(param) {\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        return urlParams.get(param);\r\n    }\r\n\r\n    static formatFileSize(bytes) {\r\n        if (bytes === 0) return '0 Bytes';\r\n        const k = 1024;\r\n        const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    }\r\n\r\n    static validateEmail(email) {\r\n        const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        return re.test(email);\r\n    }\r\n\r\n    static validatePassword(password) {\r\n        return password.length >= 8;\r\n    }\r\n\r\n    static showNotification(message, type = 'info') {\r\n        const notification = document.createElement('div');\r\n        notification.className = `notification notification-${type}`;\r\n        notification.textContent = message;\r\n        \r\n        document.body.appendChild(notification);\r\n        \r\n        setTimeout(() => {\r\n            notification.remove();\r\n        }, 5000);\r\n    }\r\n\r\n    static formatPhone(phone) {\r\n        return phone.replace(/(\\d{1})(\\d{3})(\\d{3})(\\d{2})(\\d{2})/, '+$1 ($2) $3-$4-$5');\r\n    }\r\n\r\n    static debounce(func, wait) {\r\n        let timeout;\r\n        return function executedFunction(...args) {\r\n            const later = () => {\r\n                clearTimeout(timeout);\r\n                func(...args);\r\n            };\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n        };\r\n    }\r\n}\r\n", "// js/modules/modal-manager.js\r\nexport class ModalManager {\r\n    constructor() {\r\n        this.modals = new Map();\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0445 \u043E\u043A\u043E\u043D \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430\r\n        document.addEventListener('click', (e) => {\r\n            if (e.target.classList.contains('modal-overlay')) {\r\n                this.hide(e.target.id);\r\n            }\r\n        });\r\n\r\n        // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E ESC\r\n        document.addEventListener('keydown', (e) => {\r\n            if (e.key === 'Escape') {\r\n                this.hideAll();\r\n            }\r\n        });\r\n    }\r\n\r\n    register(modalId, options = {}) {\r\n        const modal = document.getElementById(modalId);\r\n        if (!modal) {\r\n            console.warn(`Modal with id ${modalId} not found`);\r\n            return false;\r\n        }\r\n\r\n        this.modals.set(modalId, {\r\n            element: modal,\r\n            options\r\n        });\r\n\r\n        // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u044F \u0432\u043D\u0443\u0442\u0440\u0438 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n        const closeButtons = modal.querySelectorAll('[data-modal-close]');\r\n        closeButtons.forEach(btn => {\r\n            btn.addEventListener('click', () => this.hide(modalId));\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    show(modalId) {\r\n        const modalData = this.modals.get(modalId);\r\n        if (!modalData) {\r\n            console.error(`Modal ${modalId} not registered`);\r\n            return false;\r\n        }\r\n\r\n        const modal = modalData.element;\r\n        modal.style.display = 'flex';\r\n        \r\n        // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n        setTimeout(() => {\r\n            modal.classList.add('active');\r\n        }, 10);\r\n\r\n        // \u0411\u043B\u043E\u043A\u0438\u0440\u0443\u0435\u043C \u043F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0443 body\r\n        document.body.style.overflow = 'hidden';\r\n\r\n        return true;\r\n    }\r\n\r\n    hide(modalId) {\r\n        const modalData = this.modals.get(modalId);\r\n        if (!modalData) return false;\r\n\r\n        const modal = modalData.element;\r\n        modal.classList.remove('active');\r\n        \r\n        setTimeout(() => {\r\n            modal.style.display = 'none';\r\n            document.body.style.overflow = '';\r\n        }, 300);\r\n\r\n        return true;\r\n    }\r\n\r\n    hideAll() {\r\n        this.modals.forEach((modalData, modalId) => {\r\n            this.hide(modalId);\r\n        });\r\n    }\r\n\r\n    // \u0414\u0438\u043D\u0430\u043C\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    createModal(modalId, content, options = {}) {\r\n        if (this.modals.has(modalId)) {\r\n            console.warn(`Modal ${modalId} already exists`);\r\n            return false;\r\n        }\r\n\r\n        const modal = document.createElement('div');\r\n        modal.id = modalId;\r\n        modal.className = 'modal-overlay';\r\n        modal.innerHTML = content;\r\n\r\n        document.body.appendChild(modal);\r\n        return this.register(modalId, options);\r\n    }\r\n}\r\n\r\n// \u0421\u043E\u0437\u0434\u0430\u0435\u043C \u0433\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u044B\u0439 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\r\nexport const modalManager = new ModalManager();", "// js/modules/course-students.js\r\nimport { modalManager } from './modal-manager.js';\r\n\r\nexport class CourseStudentsManager {\r\n    constructor() {\r\n        this.availableStudents = [\r\n            { id: 1, name: \"\u0410\u043D\u043D\u0430 \u041A\u043E\u0437\u043B\u043E\u0432\u0430\", email: \"anna.koz@example.com\", group: \"10-\u0410\", initials: \"\u0410\u041A\" },\r\n            { id: 2, name: \"\u0421\u0435\u0440\u0433\u0435\u0439 \u0412\u043E\u043B\u043A\u043E\u0432\", email: \"s.volkov@example.com\", group: \"10-\u0411\", initials: \"\u0421\u0412\" },\r\n            { id: 3, name: \"\u041E\u043B\u044C\u0433\u0430 \u041C\u043E\u0440\u043E\u0437\u043E\u0432\u0430\", email: \"olga.moroz@example.com\", group: \"11-\u0410\", initials: \"\u041E\u041C\" },\r\n            { id: 4, name: \"\u0414\u043C\u0438\u0442\u0440\u0438\u0439 \u0421\u043E\u043A\u043E\u043B\u043E\u0432\", email: \"d.sokolov@example.com\", group: \"10-\u0410\", initials: \"\u0414\u0421\" },\r\n            { id: 5, name: \"\u0418\u0440\u0438\u043D\u0430 \u041F\u0430\u0432\u043B\u043E\u0432\u0430\", email: \"i.pavlova@example.com\", group: \"11-\u0411\", initials: \"\u0418\u041F\" },\r\n            { id: 6, name: \"\u0410\u043B\u0435\u043A\u0441\u0430\u043D\u0434\u0440 \u041B\u0435\u0431\u0435\u0434\u0435\u0432\", email: \"a.lebedev@example.com\", group: \"10-\u0411\", initials: \"\u0410\u041B\" },\r\n            { id: 7, name: \"\u041D\u0430\u0442\u0430\u043B\u044C\u044F \u0412\u043E\u0440\u043E\u0431\u044C\u0435\u0432\u0430\", email: \"n.vorob@example.com\", group: \"11-\u0410\", initials: \"\u041D\u0412\" },\r\n            { id: 8, name: \"\u041C\u0438\u0445\u0430\u0438\u043B \u041E\u0440\u043B\u043E\u0432\", email: \"m.orlov@example.com\", group: \"10-\u0410\", initials: \"\u041C\u041E\" }\r\n        ];\r\n        \r\n        this.currentStudents = [\r\n            { id: 101, name: \"\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432\", email: \"ivan.ivanov@example.com\", group: \"10-\u0410\", initials: \"\u0418\u0418\", progress: 92, grade: 4.9, lastActivity: \"2 \u0447\u0430\u0441\u0430 \u043D\u0430\u0437\u0430\u0434\" },\r\n            { id: 102, name: \"\u041C\u0430\u0440\u0438\u044F \u041F\u0435\u0442\u0440\u043E\u0432\u0430\", email: \"maria.petrova@example.com\", group: \"10-\u0411\", initials: \"\u041C\u041F\", progress: 78, grade: 4.5, lastActivity: \"\u0412\u0447\u0435\u0440\u0430\" },\r\n            { id: 103, name: \"\u0410\u043B\u0435\u043A\u0441\u0435\u0439 \u0421\u0438\u0434\u043E\u0440\u043E\u0432\", email: \"alex.sidorov@example.com\", group: \"11-\u0410\", initials: \"\u0410\u0421\", progress: 65, grade: 4.2, lastActivity: \"3 \u0434\u043D\u044F \u043D\u0430\u0437\u0430\u0434\" },\r\n            { id: 104, name: \"\u0415\u043B\u0435\u043D\u0430 \u041D\u043E\u0432\u0438\u043A\u043E\u0432\u0430\", email: \"elena.novikova@example.com\", group: \"10-\u0410\", initials: \"\u0415\u041D\", progress: 45, grade: 3.8, lastActivity: \"\u041D\u0435\u0434\u0435\u043B\u044E \u043D\u0430\u0437\u0430\u0434\" }\r\n        ];\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.registerModals();\r\n        this.initEventHandlers();\r\n        this.renderStudentsList();\r\n        this.updateStudentsTable();\r\n        console.log('CourseStudentsManager initialized');\r\n    }\r\n\r\n    registerModals() {\r\n        // \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u043C \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432\r\n        if (!modalManager.register('addStudentModal')) {\r\n            console.warn('Add student modal not found, creating dynamically...');\r\n            this.createStudentModal();\r\n        }\r\n    }\r\n\r\n    createStudentModal() {\r\n        const modalContent = `\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h3>\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432 \u0432 \u043A\u0443\u0440\u0441</h3>\r\n                    <button type=\"button\" class=\"modal-close\" data-modal-close>\r\n                        <i class=\"fas fa-times\"></i>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"studentSearch\" class=\"form-label\">\u041F\u043E\u0438\u0441\u043A \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432</label>\r\n                        <input type=\"text\" id=\"studentSearch\" class=\"form-control\" placeholder=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F, email \u0438\u043B\u0438 \u0433\u0440\u0443\u043F\u043F\u0443...\">\r\n                    </div>\r\n                    \r\n                    <div class=\"students-list-container\">\r\n                        <h4>\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u044B</h4>\r\n                        <div id=\"studentsList\" class=\"students-list\">\r\n                            <!-- \u0421\u043F\u0438\u0441\u043E\u043A \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432 \u0431\u0443\u0434\u0435\u0442 \u0437\u0434\u0435\u0441\u044C -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-light\" data-modal-close>\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n                    <button type=\"button\" class=\"btn btn-success\" id=\"confirmStudentModal\">\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445</button>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        modalManager.createModal('addStudentModal', modalContent);\r\n    }\r\n\r\n    initEventHandlers() {\r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u043A\u043D\u043E\u043F\u043A\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\r\n        document.addEventListener('click', (e) => {\r\n            if (e.target.closest('#addStudentBtn')) {\r\n                this.openAddStudentModal();\r\n            }\r\n            \r\n            if (e.target.closest('#confirmStudentModal')) {\r\n                this.confirmAddStudents();\r\n            }\r\n        });\r\n\r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u043F\u043E\u0438\u0441\u043A\u0430 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432\r\n        document.addEventListener('input', (e) => {\r\n            if (e.target.id === 'studentSearch') {\r\n                this.filterStudents(e.target.value);\r\n            }\r\n        });\r\n    }\r\n\r\n    openAddStudentModal() {\r\n        console.log('Opening student modal');\r\n        this.renderStudentsList();\r\n        modalManager.show('addStudentModal');\r\n    }\r\n\r\n    confirmAddStudents() {\r\n        const selectedStudents = [];\r\n        const checkboxes = document.querySelectorAll('#studentsList .student-checkbox:checked');\r\n        \r\n        checkboxes.forEach(checkbox => {\r\n            const studentId = parseInt(checkbox.dataset.id);\r\n            const student = this.availableStudents.find(s => s.id === studentId);\r\n            if (student) {\r\n                selectedStudents.push(student);\r\n            }\r\n        });\r\n        \r\n        if (selectedStudents.length === 0) {\r\n            this.showNotification('\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u043E\u0433\u043E \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430', 'error');\r\n            return;\r\n        }\r\n        \r\n        selectedStudents.forEach(student => {\r\n            if (!this.currentStudents.some(s => s.id === student.id)) {\r\n                this.currentStudents.push({\r\n                    ...student,\r\n                    progress: 0,\r\n                    grade: 0,\r\n                    lastActivity: '\u0415\u0449\u0435 \u043D\u0435 \u0430\u043A\u0442\u0438\u0432\u0435\u043D'\r\n                });\r\n            }\r\n        });\r\n        \r\n        this.updateStudentsTable();\r\n        modalManager.hide('addStudentModal');\r\n        this.showNotification(`\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E ${selectedStudents.length} \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432`);\r\n    }\r\n\r\n    filterStudents(searchTerm = '') {\r\n        this.renderStudentsList(searchTerm);\r\n    }\r\n\r\n    renderStudentsList(searchTerm = '') {\r\n        const studentsList = document.getElementById('studentsList');\r\n        if (!studentsList) return;\r\n        \r\n        const filteredStudents = this.availableStudents.filter(student => \r\n            !this.currentStudents.some(current => current.id === student.id) &&\r\n            (student.name.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n             student.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n             student.group.toLowerCase().includes(searchTerm.toLowerCase()))\r\n        );\r\n        \r\n        studentsList.innerHTML = '';\r\n        \r\n        if (filteredStudents.length === 0) {\r\n            studentsList.innerHTML = '<div class=\"no-students\">\u041D\u0435\u0442 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432 \u0434\u043B\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F</div>';\r\n            return;\r\n        }\r\n        \r\n        filteredStudents.forEach(student => {\r\n            const studentItem = document.createElement('div');\r\n            studentItem.className = 'student-item';\r\n            studentItem.innerHTML = `\r\n                <input type=\"checkbox\" class=\"student-checkbox\" data-id=\"${student.id}\">\r\n                <div class=\"student-avatar-small\">${student.initials}</div>\r\n                <div class=\"student-info\">\r\n                    <div class=\"student-name\">${student.name}</div>\r\n                    <div class=\"student-email\">${student.email}</div>\r\n                </div>\r\n                <div class=\"student-group\">${student.group}</div>\r\n            `;\r\n            studentsList.appendChild(studentItem);\r\n        });\r\n    }\r\n\r\n    updateStudentsTable() {\r\n        const tableBody = document.querySelector('.students-table tbody');\r\n        if (!tableBody) return;\r\n        \r\n        tableBody.innerHTML = '';\r\n        \r\n        this.currentStudents.forEach(student => {\r\n            const row = document.createElement('tr');\r\n            row.innerHTML = `\r\n                <td>\r\n                    <div style=\"display: flex; align-items: center; gap: 10px;\">\r\n                        <div class=\"student-avatar\">${student.initials}</div>\r\n                        <div>${student.name}</div>\r\n                    </div>\r\n                </td>\r\n                <td class=\"progress-cell\">\r\n                    <div class=\"progress-bar\">\r\n                        <div class=\"progress-fill\" style=\"width: ${student.progress}%\"></div>\r\n                    </div>\r\n                    <span>${student.progress}%</span>\r\n                </td>\r\n                <td>${student.grade}</td>\r\n                <td>${student.lastActivity}</td>\r\n                <td>\r\n                    <button class=\"action-btn\" data-action=\"email\"><i class=\"fas fa-envelope\"></i></button>\r\n                    <button class=\"action-btn\" data-action=\"stats\"><i class=\"fas fa-chart-line\"></i></button>\r\n                </td>\r\n            `;\r\n            tableBody.appendChild(row);\r\n        });\r\n        \r\n        this.updateStudentCount();\r\n        this.initActionButtons();\r\n    }\r\n\r\n    updateStudentCount() {\r\n        const studentCountElement = document.querySelector('.management-card:nth-child(2) h3');\r\n        if (studentCountElement) {\r\n            studentCountElement.textContent = this.currentStudents.length;\r\n        }\r\n    }\r\n\r\n    initActionButtons() {\r\n        document.querySelectorAll('.action-btn[data-action=\"email\"]').forEach(button => {\r\n            button.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                const studentName = button.closest('tr').querySelector('.student-name').textContent;\r\n                this.showNotification(`\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0443 ${studentName}`);\r\n            });\r\n        });\r\n\r\n        document.querySelectorAll('.action-btn[data-action=\"stats\"]').forEach(button => {\r\n            button.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                const studentName = button.closest('tr').querySelector('.student-name').textContent;\r\n                this.showNotification(`\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430 ${studentName}`);\r\n            });\r\n        });\r\n    }\r\n\r\n    showNotification(message, type = 'success') {\r\n        if (typeof showToast !== 'undefined') {\r\n            showToast(message, type);\r\n        } else {\r\n            console.log(`Notification [${type}]: ${message}`);\r\n        }\r\n    }\r\n}", "// \u0412\u0441\u043F\u043E\u043C\u043E\u0433\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u0441 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u043C\u0438 \u043E\u043A\u043D\u0430\u043C\u0438\r\nfunction showModal(modal) {\r\n    if (modal) {\r\n        console.log('Showing modal');\r\n        modal.style.display = 'flex';\r\n        // \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C setTimeout \u0447\u0442\u043E\u0431\u044B \u0434\u0430\u0442\u044C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0443 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C display\r\n        setTimeout(() => {\r\n            modal.classList.add('active');\r\n            console.log('Modal active class added');\r\n        }, 10);\r\n    }\r\n}\r\n\r\nfunction hideModal(modal) {\r\n    if (modal) {\r\n        console.log('Hiding modal');\r\n        modal.classList.remove('active');\r\n        setTimeout(() => {\r\n            modal.style.display = 'none';\r\n        }, 300); // \u0416\u0434\u0435\u043C \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0438\r\n    }\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u043A\u0430\u0437\u0430 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439\r\nfunction showToast(message, type = 'info') {\r\n    // \u0421\u043E\u0437\u0434\u0430\u0435\u043C \u044D\u043B\u0435\u043C\u0435\u043D\u0442 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F\r\n    const toast = document.createElement('div');\r\n    toast.className = `toast toast-${type}`;\r\n    toast.innerHTML = `\r\n        <div class=\"toast-content\">\r\n            <i class=\"fas ${getToastIcon(type)}\"></i>\r\n            <span>${message}</span>\r\n        </div>\r\n        <button class=\"toast-close\">&times;</button>\r\n    `;\r\n    \r\n    document.body.appendChild(toast);\r\n    \r\n    // \u041A\u043D\u043E\u043F\u043A\u0430 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u044F\r\n    const closeBtn = toast.querySelector('.toast-close');\r\n    closeBtn.addEventListener('click', () => {\r\n        toast.remove();\r\n    });\r\n    \r\n    // \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 4 \u0441\u0435\u043A\u0443\u043D\u0434\u044B\r\n    setTimeout(() => {\r\n        if (toast.parentNode) {\r\n            toast.remove();\r\n        }\r\n    }, 4000);\r\n}\r\n\r\nfunction getToastIcon(type) {\r\n    switch(type) {\r\n        case 'success': return 'fa-check-circle';\r\n        case 'error': return 'fa-exclamation-circle';\r\n        case 'warning': return 'fa-exclamation-triangle';\r\n        default: return 'fa-info-circle';\r\n    }\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u043A\u0430\u0441\u0442\u043E\u043C\u043D\u044B\u0445 alert/confirm \u043E\u043A\u043E\u043D\r\nfunction showAlert(message, title = '\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435', type = 'info') {\r\n    return new Promise((resolve) => {\r\n        const alertModal = document.createElement('div');\r\n        alertModal.className = 'confirm-modal-overlay active';\r\n        \r\n        let iconClass, iconType;\r\n        switch(type) {\r\n            case 'warning':\r\n                iconClass = 'warning';\r\n                iconType = 'fa-exclamation-triangle';\r\n                break;\r\n            case 'danger':\r\n                iconClass = 'danger';\r\n                iconType = 'fa-exclamation-circle';\r\n                break;\r\n            case 'success':\r\n                iconClass = 'success';\r\n                iconType = 'fa-check-circle';\r\n                break;\r\n            case 'info':\r\n            default:\r\n                iconClass = 'info';\r\n                iconType = 'fa-info-circle';\r\n        }\r\n        \r\n        alertModal.innerHTML = `\r\n            <div class=\"confirm-modal alert\">\r\n                <div class=\"confirm-modal-header\">\r\n                    <div class=\"confirm-modal-icon ${iconClass}\">\r\n                        <i class=\"fas ${iconType}\"></i>\r\n                    </div>\r\n                </div>\r\n                <div class=\"confirm-modal-body\">\r\n                    <h3 class=\"confirm-modal-title\">${title}</h3>\r\n                    <p class=\"confirm-modal-message\">${message}</p>\r\n                </div>\r\n                <div class=\"confirm-modal-footer\">\r\n                    <button class=\"confirm-modal-btn confirm-modal-btn-primary\" id=\"alertOkBtn\">OK</button>\r\n                </div>\r\n            </div>\r\n        `;\r\n        \r\n        document.body.appendChild(alertModal);\r\n        \r\n        const okBtn = alertModal.querySelector('#alertOkBtn');\r\n        const modal = alertModal.querySelector('.confirm-modal');\r\n        \r\n        function closeAlert() {\r\n            modal.classList.add('closing');\r\n            setTimeout(() => {\r\n                alertModal.remove();\r\n                resolve(true);\r\n            }, 300);\r\n        }\r\n        \r\n        okBtn.addEventListener('click', closeAlert);\r\n        \r\n        // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n        alertModal.addEventListener('click', function(e) {\r\n            if (e.target === alertModal) {\r\n                closeAlert();\r\n            }\r\n        });\r\n        \r\n        // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E ESC\r\n        function handleEscKey(e) {\r\n            if (e.key === 'Escape') {\r\n                closeAlert();\r\n                document.removeEventListener('keydown', handleEscKey);\r\n            }\r\n        }\r\n        \r\n        document.addEventListener('keydown', handleEscKey);\r\n    });\r\n}\r\n\r\nfunction showConfirm(message, title = '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435') {\r\n    return new Promise((resolve) => {\r\n        const confirmModal = document.createElement('div');\r\n        confirmModal.className = 'confirm-modal-overlay active';\r\n        \r\n        confirmModal.innerHTML = `\r\n            <div class=\"confirm-modal confirm\">\r\n                <div class=\"confirm-modal-header\">\r\n                    <div class=\"confirm-modal-icon warning\">\r\n                        <i class=\"fas fa-question-circle\"></i>\r\n                    </div>\r\n                </div>\r\n                <div class=\"confirm-modal-body\">\r\n                    <h3 class=\"confirm-modal-title\">${title}</h3>\r\n                    <p class=\"confirm-modal-message\">${message}</p>\r\n                </div>\r\n                <div class=\"confirm-modal-footer\">\r\n                    <button class=\"confirm-modal-btn confirm-modal-btn-secondary\" id=\"confirmCancelBtn\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n                    <button class=\"confirm-modal-btn confirm-modal-btn-danger\" id=\"confirmOkBtn\">\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C</button>\r\n                </div>\r\n            </div>\r\n        `;\r\n        \r\n        document.body.appendChild(confirmModal);\r\n        \r\n        const okBtn = confirmModal.querySelector('#confirmOkBtn');\r\n        const cancelBtn = confirmModal.querySelector('#confirmCancelBtn');\r\n        const modal = confirmModal.querySelector('.confirm-modal');\r\n        \r\n        function closeConfirm(result) {\r\n            modal.classList.add('closing');\r\n            setTimeout(() => {\r\n                confirmModal.remove();\r\n                resolve(result);\r\n            }, 300);\r\n        }\r\n        \r\n        okBtn.addEventListener('click', () => closeConfirm(true));\r\n        cancelBtn.addEventListener('click', () => closeConfirm(false));\r\n        \r\n        // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n        confirmModal.addEventListener('click', function(e) {\r\n            if (e.target === confirmModal) {\r\n                closeConfirm(false);\r\n            }\r\n        });\r\n        \r\n        // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E ESC\r\n        function handleEscKey(e) {\r\n            if (e.key === 'Escape') {\r\n                closeConfirm(false);\r\n                document.removeEventListener('keydown', handleEscKey);\r\n            }\r\n        }\r\n        \r\n        document.addEventListener('keydown', handleEscKey);\r\n    });\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u0435\u0439\r\nfunction editModule(moduleCard, currentTitle, currentDescription, currentType) {\r\n    // \u0421\u043E\u0437\u0434\u0430\u0435\u043C \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n    const editModal = document.createElement('div');\r\n    editModal.className = 'modal-overlay active';\r\n    editModal.innerHTML = `\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h3>\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F</h3>\r\n                <button type=\"button\" class=\"modal-close\" id=\"closeEditModuleModal\">\r\n                    <i class=\"fas fa-times\"></i>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"edit-module-title\" class=\"form-label\">\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F *</label>\r\n                    <input type=\"text\" id=\"edit-module-title\" class=\"form-control\" value=\"${currentTitle}\" placeholder=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F\">\r\n                </div>\r\n                \r\n                <div class=\"form-group\">\r\n                    <label for=\"edit-module-description\" class=\"form-label\">\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F</label>\r\n                    <textarea id=\"edit-module-description\" class=\"form-control\" placeholder=\"\u041E\u043F\u0438\u0448\u0438\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F\" rows=\"3\">${currentDescription || ''}</textarea>\r\n                </div>\r\n                \r\n                <div class=\"module-type-options\">\r\n                    <div class=\"form-group\">\r\n                        <label class=\"form-label\">\u0422\u0438\u043F \u043C\u043E\u0434\u0443\u043B\u044F</label>\r\n                        <div class=\"radio-options\">\r\n                            <label class=\"radio-option\">\r\n                                <input type=\"radio\" name=\"edit-module-type\" value=\"theory\" ${currentType === 'theory' ? 'checked' : ''}>\r\n                                <span class=\"radio-checkmark\"></span>\r\n                                <span class=\"radio-label\">\r\n                                    <i class=\"fas fa-book\"></i>\r\n                                    \u0422\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439\r\n                                </span>\r\n                            </label>\r\n                            \r\n                            <label class=\"radio-option\">\r\n                                <input type=\"radio\" name=\"edit-module-type\" value=\"practice\" ${currentType === 'practice' ? 'checked' : ''}>\r\n                                <span class=\"radio-checkmark\"></span>\r\n                                <span class=\"radio-label\">\r\n                                    <i class=\"fas fa-tasks\"></i>\r\n                                    \u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439\r\n                                </span>\r\n                            </label>\r\n                            \r\n                            <label class=\"radio-option\">\r\n                                <input type=\"radio\" name=\"edit-module-type\" value=\"project\" ${currentType === 'project' ? 'checked' : ''}>\r\n                                <span class=\"radio-checkmark\"></span>\r\n                                <span class=\"radio-label\">\r\n                                    <i class=\"fas fa-project-diagram\"></i>\r\n                                    \u041F\u0440\u043E\u0435\u043A\u0442\u043D\u044B\u0439\r\n                                </span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-light\" id=\"cancelEditModuleModal\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n                <button type=\"button\" class=\"btn btn-success\" id=\"saveEditModuleModal\">\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F</button>\r\n            </div>\r\n        </div>\r\n    `;\r\n    \r\n    document.body.appendChild(editModal);\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n    const closeBtn = editModal.querySelector('#closeEditModuleModal');\r\n    const cancelBtn = editModal.querySelector('#cancelEditModuleModal');\r\n    const saveBtn = editModal.querySelector('#saveEditModuleModal');\r\n    \r\n    function closeEditModal() {\r\n        editModal.classList.remove('active');\r\n        setTimeout(() => {\r\n            editModal.remove();\r\n        }, 300);\r\n    }\r\n    \r\n    closeBtn.addEventListener('click', closeEditModal);\r\n    cancelBtn.addEventListener('click', closeEditModal);\r\n    \r\n    saveBtn.addEventListener('click', function() {\r\n        const newTitle = document.getElementById('edit-module-title').value.trim();\r\n        const newDescription = document.getElementById('edit-module-description').value.trim();\r\n        const newType = editModal.querySelector('input[name=\"edit-module-type\"]:checked').value;\r\n        \r\n        if (!newTitle) {\r\n            showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F', 'error');\r\n            return;\r\n        }\r\n        \r\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0434\u0430\u043D\u043D\u044B\u0435 \u043C\u043E\u0434\u0443\u043B\u044F\r\n        updateModuleData(moduleCard, newTitle, newDescription, newType);\r\n        closeEditModal();\r\n        showToast('\u041C\u043E\u0434\u0443\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D', 'success');\r\n    });\r\n    \r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    editModal.addEventListener('click', function(e) {\r\n        if (e.target === editModal) {\r\n            closeEditModal();\r\n        }\r\n    });\r\n}\r\n\r\nfunction updateModuleData(moduleCard, title, description, type) {\r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A\r\n    const titleElement = moduleCard.querySelector('.module-title');\r\n    const currentText = titleElement.textContent;\r\n    const moduleNumber = currentText.match(/\u041C\u043E\u0434\u0443\u043B\u044C (\\d+):/)[1];\r\n    titleElement.textContent = `\u041C\u043E\u0434\u0443\u043B\u044C ${moduleNumber}: ${title}`;\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435\r\n    const descriptionElement = moduleCard.querySelector('.module-description p:first-child');\r\n    descriptionElement.textContent = description || '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0437\u0434\u0435\u0441\u044C';\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0442\u0438\u043F \u043C\u043E\u0434\u0443\u043B\u044F\r\n    const typeElement = moduleCard.querySelector('.module-description p:last-child small');\r\n    let typeIcon, typeName;\r\n    \r\n    switch (type) {\r\n        case 'practice':\r\n            typeIcon = 'fa-tasks';\r\n            typeName = '\u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439';\r\n            break;\r\n        case 'project':\r\n            typeIcon = 'fa-project-diagram';\r\n            typeName = '\u041F\u0440\u043E\u0435\u043A\u0442\u043D\u044B\u0439';\r\n            break;\r\n        case 'theory':\r\n        default:\r\n            typeIcon = 'fa-book';\r\n            typeName = '\u0422\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439';\r\n    }\r\n    \r\n    typeElement.innerHTML = `<i class=\"fas ${typeIcon}\"></i> ${typeName} \u043C\u043E\u0434\u0443\u043B\u044C`;\r\n}\r\n\r\nfunction initEditButtons() {\r\n    document.addEventListener('click', function(e) {\r\n        if (e.target.closest('.edit-module-btn')) {\r\n            const moduleCard = e.target.closest('.module-card');\r\n            const titleElement = moduleCard.querySelector('.module-title');\r\n            const descriptionElement = moduleCard.querySelector('.module-description p:first-child');\r\n            const typeElement = moduleCard.querySelector('.module-description p:last-child small');\r\n            \r\n            const currentTitle = titleElement.textContent.replace(/\u041C\u043E\u0434\u0443\u043B\u044C \\d+: /, '');\r\n            const currentDescription = descriptionElement.textContent;\r\n            \r\n            // \u041E\u043F\u0440\u0435\u0434\u0435\u043B\u044F\u0435\u043C \u0442\u0435\u043A\u0443\u0449\u0438\u0439 \u0442\u0438\u043F \u043C\u043E\u0434\u0443\u043B\u044F\r\n            let currentType = 'theory';\r\n            if (typeElement.textContent.includes('\u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439')) currentType = 'practice';\r\n            if (typeElement.textContent.includes('\u041F\u0440\u043E\u0435\u043A\u0442\u043D\u044B\u0439')) currentType = 'project';\r\n            \r\n            editModule(moduleCard, currentTitle, currentDescription, currentType);\r\n        }\r\n    });\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u0441 \u043C\u043E\u0434\u0443\u043B\u044F\u043C\u0438\r\nfunction addNewModule(title, description, type) {\r\n    const modulesSection = document.querySelector('.modules-section');\r\n    if (!modulesSection) {\r\n        console.warn('\u0421\u0435\u043A\u0446\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u0435\u0439 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430');\r\n        return;\r\n    }\r\n\r\n    const moduleId = Date.now();\r\n    const moduleCount = modulesSection.querySelectorAll('.module-card').length;\r\n    const moduleNumber = moduleCount + 1;\r\n\r\n    let typeIcon, typeName;\r\n    switch (type) {\r\n        case 'practice':\r\n            typeIcon = 'fa-tasks';\r\n            typeName = '\u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439';\r\n            break;\r\n        case 'project':\r\n            typeIcon = 'fa-project-diagram';\r\n            typeName = '\u041F\u0440\u043E\u0435\u043A\u0442\u043D\u044B\u0439';\r\n            break;\r\n        case 'theory':\r\n        default:\r\n            typeIcon = 'fa-book';\r\n            typeName = '\u0422\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439';\r\n    }\r\n\r\n    const moduleCard = document.createElement('div');\r\n    moduleCard.className = 'module-card';\r\n    moduleCard.setAttribute('data-module-id', moduleId);\r\n    moduleCard.setAttribute('draggable', 'true');\r\n    \r\n    moduleCard.innerHTML = `\r\n        <div class=\"module-header\">\r\n            <div class=\"module-title-container\">\r\n                <h4 class=\"module-title\">\u041C\u043E\u0434\u0443\u043B\u044C ${moduleNumber}: ${title}</h4>\r\n                <div class=\"module-header-actions\">\r\n                    \r\n                </div>\r\n            </div>\r\n            <div class=\"module-actions\">\r\n                <a href=\"/frontend/templates/courses/create-course-detail.html\" class=\"btn btn-small btn-light\">\r\n                    <i class=\"fas fa-plus\"></i>\r\n                </a>\r\n                <button type=\"button\" class=\"btn btn-small btn-light edit-module-btn\">\r\n                    <i class=\"fas fa-edit\"></i>\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-small btn-danger delete-module-btn\">\r\n                    <i class=\"fas fa-trash\"></i>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class=\"module-description\">\r\n            <p>${description || '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0437\u0434\u0435\u0441\u044C'}</p>\r\n            <p><small><i class=\"fas ${typeIcon}\"></i> ${typeName} \u043C\u043E\u0434\u0443\u043B\u044C</small></p>\r\n        </div>\r\n        <div class=\"lessons-list\">\r\n            <div class=\"lesson-item\">\r\n                <div class=\"lesson-drag\"><i class=\"fas fa-grip-vertical\"></i></div>\r\n                <div class=\"lesson-title\">1. \u0412\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u0432 \u043A\u0443\u0440\u0441</div>\r\n                <div class=\"lesson-actions\">\r\n                    <a href=\"/frontend/templates/courses/create-course-detail.html\" class=\"btn btn-small\">\r\n                        <i class=\"fas fa-edit\"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class=\"lesson-item\">\r\n                <div class=\"lesson-drag\"><i class=\"fas fa-grip-vertical\"></i></div>\r\n                <div class=\"lesson-title\">2. \u0423\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0433\u043E \u041F\u041E</div>\r\n                <div class=\"lesson-actions\">\r\n                    <a href=\"/frontend/templates/courses/create-course-detail.html\" class=\"btn btn-small\">\r\n                        <i class=\"fas fa-edit\"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    // \u0418\u0429\u0415\u041C \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0434\u043B\u044F \u043C\u043E\u0434\u0443\u043B\u0435\u0439 \u0438\u043B\u0438 \u0441\u043E\u0437\u0434\u0430\u0435\u043C \u0435\u0433\u043E\r\n    let modulesContainer = modulesSection.querySelector('.modules-container');\r\n    \r\n    if (!modulesContainer) {\r\n        // \u0415\u0441\u043B\u0438 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u0430 \u043D\u0435\u0442, \u0441\u043E\u0437\u0434\u0430\u0435\u043C \u0435\u0433\u043E \u0438 \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0430\u0435\u043C \u0432 \u043D\u0435\u0433\u043E \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u0438\r\n        modulesContainer = document.createElement('div');\r\n        modulesContainer.className = 'modules-container';\r\n        \r\n        // \u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0430\u0435\u043C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u0438 \u0432 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\r\n        const existingModules = modulesSection.querySelectorAll('.module-card');\r\n        existingModules.forEach(module => {\r\n            modulesContainer.appendChild(module);\r\n        });\r\n        \r\n        // \u0412\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u043F\u0435\u0440\u0435\u0434 \u043A\u043D\u043E\u043F\u043A\u043E\u0439 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\n        const addModuleBtn = modulesSection.querySelector('.add-module-btn');\r\n        if (addModuleBtn) {\r\n            modulesSection.insertBefore(modulesContainer, addModuleBtn);\r\n        } else {\r\n            modulesSection.appendChild(modulesContainer);\r\n        }\r\n    }\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043D\u043E\u0432\u044B\u0439 \u043C\u043E\u0434\u0443\u043B\u044C \u0432 \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\r\n    modulesContainer.appendChild(moduleCard);\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\n    const editBtn = moduleCard.querySelector('.edit-module-btn');\r\n    if (editBtn) {\r\n        editBtn.addEventListener('click', function() {\r\n            editModule(moduleCard, title, description, type);\r\n        });\r\n    }\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\n    const deleteBtn = moduleCard.querySelector('.delete-module-btn');\r\n    if (deleteBtn) {\r\n        deleteBtn.addEventListener('click', function() {\r\n            deleteModule(moduleCard);\r\n        });\r\n    }\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0443\u0440\u043E\u043A\u043E\u0432\r\n    const lessonEditBtns = moduleCard.querySelectorAll('.lesson-actions a');\r\n    lessonEditBtns.forEach(btn => {\r\n        btn.addEventListener('click', function(e) {\r\n            e.preventDefault();\r\n            window.location.href = '/frontend/templates/courses/create-course-detail.html';\r\n        });\r\n    });\r\n    \r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n    moduleCard.style.animation = 'slideIn 0.3s ease';\r\n    \r\n    showToast(`\u041C\u043E\u0434\u0443\u043B\u044C \"${title}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D`, 'success');\r\n    \r\n    console.log('Module added successfully');\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\nasync function deleteModule(moduleCard) {\r\n    const confirmed = await showConfirm(\r\n        '\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043C\u043E\u0434\u0443\u043B\u044C \u0438 \u0432\u0441\u0435 \u0435\u0433\u043E \u0443\u0440\u043E\u043A\u0438?',\r\n        '\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F'\r\n    );\r\n    \r\n    if (confirmed) {\r\n        moduleCard.style.animation = 'slideOut 0.3s ease';\r\n        setTimeout(() => {\r\n            moduleCard.remove();\r\n            updateModuleNumbers();\r\n            showToast('\u041C\u043E\u0434\u0443\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D', 'success');\r\n        }, 300);\r\n    }\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0440\u0430\u0431\u043E\u0442\u044B \u0441 \u0443\u0440\u043E\u043A\u0430\u043C\u0438\r\nfunction initLessonButtons() {\r\n    console.log('Initializing lesson buttons...');\r\n    \r\n    // \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0438 \"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0440\u043E\u043A\" \u043D\u0430 \u0441\u0441\u044B\u043B\u043A\u0438\r\n    const addLessonButtons = document.querySelectorAll('.btn-light');\r\n    let replacedCount = 0;\r\n    \r\n    addLessonButtons.forEach(btn => {\r\n        if (btn.textContent.includes('\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0440\u043E\u043A')) {\r\n            // \u0421\u043E\u0437\u0434\u0430\u0435\u043C \u0441\u0441\u044B\u043B\u043A\u0443 \u0441 \u0442\u0435\u043C\u0438 \u0436\u0435 \u043A\u043B\u0430\u0441\u0441\u0430\u043C\u0438 \u0438 \u0441\u0442\u0438\u043B\u044F\u043C\u0438\r\n            const link = document.createElement('a');\r\n            link.href = '/frontend/templates/courses/create-course-detail.html';\r\n            link.className = btn.className;\r\n            link.innerHTML = btn.innerHTML;\r\n            link.style.textDecoration = 'none';\r\n            link.style.display = 'inline-block';\r\n            \r\n            // \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u043D\u0430 \u0441\u0441\u044B\u043B\u043A\u0443\r\n            btn.parentNode.replaceChild(link, btn);\r\n            replacedCount++;\r\n        }\r\n    });\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0443\u0440\u043E\u043A\u043E\u0432 \u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u043C\u043E\u0434\u0443\u043B\u044F\u0445\r\n    const lessonEditButtons = document.querySelectorAll('.lesson-actions .btn-small');\r\n    lessonEditButtons.forEach(btn => {\r\n        if (!btn.hasAttribute('href')) {\r\n            btn.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                window.location.href = '/frontend/templates/courses/create-course-detail.html';\r\n            });\r\n        }\r\n    });\r\n    \r\n    console.log(`Replaced ${replacedCount} lesson buttons with links`);\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\nfunction initPreview() {\r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u0432 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u0432\u0440\u0435\u043C\u0435\u043D\u0438\r\n    const titleInput = document.getElementById('course-title');\r\n    const descInput = document.getElementById('course-short-desc');\r\n    const levelSelect = document.getElementById('course-level');\r\n    const durationInput = document.getElementById('course-duration');\r\n    \r\n    if (titleInput) {\r\n        titleInput.addEventListener('input', updatePreview);\r\n    }\r\n    if (descInput) {\r\n        descInput.addEventListener('input', updatePreview);\r\n    }\r\n    if (levelSelect) {\r\n        levelSelect.addEventListener('change', updatePreview);\r\n    }\r\n    if (durationInput) {\r\n        durationInput.addEventListener('input', updatePreview);\r\n    }\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\r\n    const imageInput = document.getElementById('course-image');\r\n    if (imageInput) {\r\n        imageInput.addEventListener('change', function(e) {\r\n            const file = e.target.files[0];\r\n            if (file) {\r\n                const reader = new FileReader();\r\n                reader.onload = function(e) {\r\n                    const previewImage = document.querySelector('.preview-image');\r\n                    if (previewImage) {\r\n                        previewImage.innerHTML = `<img src=\"${e.target.result}\" alt=\"Preview\" style=\"width: 100%; height: 100%; object-fit: cover; border-radius: 8px;\">`;\r\n                    }\r\n                };\r\n                reader.readAsDataURL(file);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction updatePreview() {\r\n    const title = document.getElementById('course-title')?.value || '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430';\r\n    const desc = document.getElementById('course-short-desc')?.value || '\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\r\n    const level = document.getElementById('course-level')?.value;\r\n    const duration = document.getElementById('course-duration')?.value || '-';\r\n    \r\n    const previewTitle = document.getElementById('preview-title');\r\n    const previewDesc = document.getElementById('preview-desc');\r\n    const previewLevel = document.getElementById('preview-level');\r\n    const previewDuration = document.getElementById('preview-duration');\r\n    \r\n    if (previewTitle) previewTitle.textContent = title;\r\n    if (previewDesc) previewDesc.textContent = desc;\r\n    if (previewLevel) {\r\n        const levelText = getLevelText(level);\r\n        previewLevel.textContent = `\u0423\u0440\u043E\u0432\u0435\u043D\u044C: ${levelText}`;\r\n    }\r\n    if (previewDuration) previewDuration.textContent = `\u0427\u0430\u0441\u043E\u0432: ${duration}`;\r\n}\r\n\r\nfunction getLevelText(level) {\r\n    switch(level) {\r\n        case 'beginner': return '\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439';\r\n        case 'intermediate': return '\u0421\u0440\u0435\u0434\u043D\u0438\u0439';\r\n        case 'advanced': return '\u041F\u0440\u043E\u0434\u0432\u0438\u043D\u0443\u0442\u044B\u0439';\r\n        default: return '-';\r\n    }\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F\r\nfunction initDeleteButtons() {\r\n    document.addEventListener('click', async function(e) {\r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u043A\u043D\u043E\u043F\u043E\u043A \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u0435\u0439 \u0432 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u043C\u043E\u0434\u0443\u043B\u044F\u0445\r\n        if (e.target.closest('.delete-module-btn') || \r\n            (e.target.closest('.btn-danger') && e.target.closest('.module-header'))) {\r\n            \r\n            const moduleCard = e.target.closest('.module-card');\r\n            if (moduleCard) {\r\n                e.preventDefault();\r\n                await deleteModule(moduleCard);\r\n            }\r\n        }\r\n        \r\n        // \u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u043E\u0432\r\n        if (e.target.classList.contains('delete-lesson') || e.target.closest('.delete-lesson')) {\r\n            const lessonItem = e.target.closest('.lesson-item');\r\n            if (lessonItem) {\r\n                e.preventDefault();\r\n                const confirmed = await showConfirm(\r\n                    '\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0443\u0440\u043E\u043A?',\r\n                    '\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u0430'\r\n                );\r\n                \r\n                if (confirmed) {\r\n                    lessonItem.style.animation = 'slideOut 0.3s ease';\r\n                    setTimeout(() => {\r\n                        lessonItem.remove();\r\n                        updateLessonNumbers();\r\n                        showToast('\u0423\u0440\u043E\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D', 'success');\r\n                    }, 300);\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F drag and drop\r\nfunction initDragAndDrop() {\r\n    const lessonItems = document.querySelectorAll('.lesson-item');\r\n    const moduleCards = document.querySelectorAll('.module-card');\r\n    \r\n    lessonItems.forEach(item => {\r\n        item.addEventListener('dragstart', handleDragStart);\r\n        item.addEventListener('dragend', handleDragEnd);\r\n    });\r\n    \r\n    moduleCards.forEach(card => {\r\n        card.addEventListener('dragstart', handleDragStart);\r\n        card.addEventListener('dragend', handleDragEnd);\r\n    });\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440\u044B\r\n    const lessonsContainers = document.querySelectorAll('.lessons-list');\r\n    const modulesSection = document.querySelector('.modules-section');\r\n    \r\n    lessonsContainers.forEach(container => {\r\n        container.addEventListener('dragover', handleDragOver);\r\n        container.addEventListener('drop', handleDrop);\r\n    });\r\n    \r\n    if (modulesSection) {\r\n        modulesSection.addEventListener('dragover', handleDragOver);\r\n        modulesSection.addEventListener('drop', handleDrop);\r\n    }\r\n}\r\n\r\nfunction handleDragStart(e) {\r\n    e.target.classList.add('dragging');\r\n    e.dataTransfer.setData('text/plain', e.target.getAttribute('data-lesson-id') || e.target.getAttribute('data-module-id'));\r\n    e.dataTransfer.effectAllowed = 'move';\r\n}\r\n\r\nfunction handleDragEnd(e) {\r\n    e.target.classList.remove('dragging');\r\n}\r\n\r\nfunction handleDragOver(e) {\r\n    e.preventDefault();\r\n    const draggingElement = document.querySelector('.dragging');\r\n    if (!draggingElement) return;\r\n\r\n    const afterElement = getDragAfterElement(e.currentTarget, e.clientY);\r\n    const container = e.currentTarget;\r\n    \r\n    if (afterElement) {\r\n        container.insertBefore(draggingElement, afterElement);\r\n    } else {\r\n        container.appendChild(draggingElement);\r\n    }\r\n}\r\n\r\nfunction handleDrop(e) {\r\n    e.preventDefault();\r\n    updateLessonNumbers();\r\n    updateModuleNumbers();\r\n    showToast('\u041F\u043E\u0440\u044F\u0434\u043E\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D', 'success');\r\n}\r\n\r\nfunction getDragAfterElement(container, y) {\r\n    const draggableElements = [...container.querySelectorAll('.lesson-item:not(.dragging), .module-card:not(.dragging)')];\r\n    \r\n    return draggableElements.reduce((closest, child) => {\r\n        const box = child.getBoundingClientRect();\r\n        const offset = y - box.top - box.height / 2;\r\n        \r\n        if (offset < 0 && offset > closest.offset) {\r\n            return { offset: offset, element: child };\r\n        } else {\r\n            return closest;\r\n        }\r\n    }, { offset: Number.NEGATIVE_INFINITY }).element;\r\n}\r\n\r\nfunction updateLessonNumbers() {\r\n    document.querySelectorAll('.lessons-list').forEach(container => {\r\n        const lessons = container.querySelectorAll('.lesson-item');\r\n        lessons.forEach((lesson, index) => {\r\n            const titleElement = lesson.querySelector('.lesson-title');\r\n            if (titleElement) {\r\n                const currentText = titleElement.textContent;\r\n                const newText = currentText.replace(/^\\d+\\./, `${index + 1}.`);\r\n                titleElement.textContent = newText;\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction updateModuleNumbers() {\r\n    const modules = document.querySelectorAll('.module-card');\r\n    modules.forEach((module, index) => {\r\n        const titleElement = module.querySelector('.module-title');\r\n        if (titleElement) {\r\n            const currentText = titleElement.textContent;\r\n            const newText = currentText.replace(/\u041C\u043E\u0434\u0443\u043B\u044C \\d+:/, `\u041C\u043E\u0434\u0443\u043B\u044C ${index + 1}:`);\r\n            titleElement.textContent = newText;\r\n        }\r\n    });\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0444\u043E\u0440\u043C\u044B\r\nfunction initFormSubmission() {\r\n    const form = document.getElementById('course-form');\r\n    if (form) {\r\n        form.addEventListener('submit', function(e) {\r\n            e.preventDefault();\r\n            \r\n            // \u0411\u0430\u0437\u043E\u0432\u0430\u044F \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u044F\r\n            const title = document.getElementById('course-title').value.trim();\r\n            const shortDesc = document.getElementById('course-short-desc').value.trim();\r\n            const fullDesc = document.getElementById('course-full-desc').value.trim();\r\n            const category = document.getElementById('course-category').value;\r\n            const level = document.getElementById('course-level').value;\r\n            const duration = document.getElementById('course-duration').value;\r\n            \r\n            if (!title || !shortDesc || !fullDesc || !category || !level || !duration) {\r\n                showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F', 'error');\r\n                return;\r\n            }\r\n            \r\n            if (shortDesc.length > 150) {\r\n                showToast('\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043D\u0435 \u0431\u043E\u043B\u0435\u0435 150 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432', 'error');\r\n                return;\r\n            }\r\n            \r\n            // \u0421\u0438\u043C\u0443\u043B\u044F\u0446\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u0443\u0440\u0441\u0430\r\n            showToast('\u041A\u0443\u0440\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D \u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0446\u0438\u044E!', 'success');\r\n            \r\n            // \u0427\u0435\u0440\u0435\u0437 2 \u0441\u0435\u043A\u0443\u043D\u0434\u044B \u043F\u0435\u0440\u0435\u043D\u0430\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u043C \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u043A\u0443\u0440\u0441\u043E\u0432\r\n            setTimeout(() => {\r\n                window.location.href = '/frontend/templates/courses/courses.html';\r\n            }, 2000);\r\n        });\r\n    }\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0440\u0430\u0434\u0438\u043E-\u043A\u043D\u043E\u043F\u043E\u043A - \u0418\u0421\u041F\u0420\u0410\u0412\u041B\u0415\u041D\u041D\u0410\u042F\r\nfunction initRadioButtonEffects() {\r\n    console.log('Initializing radio button effects...');\r\n    \r\n    function addRadioButtonListeners() {\r\n        const radioOptions = document.querySelectorAll('.radio-option');\r\n        console.log('Found radio options:', radioOptions.length);\r\n        \r\n        radioOptions.forEach(option => {\r\n            // \u0423\u0434\u0430\u043B\u044F\u0435\u043C \u0441\u0442\u0430\u0440\u044B\u0435 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0447\u0442\u043E\u0431\u044B \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044C \u0434\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n            option.removeEventListener('mousedown', handleRadioMouseDown);\r\n            option.removeEventListener('mouseup', handleRadioMouseUp);\r\n            option.removeEventListener('mouseleave', handleRadioMouseLeave);\r\n            option.removeEventListener('touchstart', handleRadioTouchStart);\r\n            option.removeEventListener('touchend', handleRadioTouchEnd);\r\n            option.removeEventListener('click', handleRadioClick);\r\n            \r\n            // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043D\u043E\u0432\u044B\u0435 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438\r\n            option.addEventListener('mousedown', handleRadioMouseDown);\r\n            option.addEventListener('mouseup', handleRadioMouseUp);\r\n            option.addEventListener('mouseleave', handleRadioMouseLeave);\r\n            option.addEventListener('touchstart', handleRadioTouchStart);\r\n            option.addEventListener('touchend', handleRadioTouchEnd);\r\n            option.addEventListener('click', handleRadioClick);\r\n        });\r\n    }\r\n    \r\n    function handleRadioMouseDown(e) {\r\n        console.log('Radio button pressed');\r\n        const radioOption = e.currentTarget;\r\n        radioOption.classList.add('radio-active');\r\n        e.preventDefault(); // \u041F\u0440\u0435\u0434\u043E\u0442\u0432\u0440\u0430\u0449\u0430\u0435\u043C \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u0430\r\n    }\r\n    \r\n    function handleRadioMouseUp(e) {\r\n        const radioOption = e.currentTarget;\r\n        radioOption.classList.remove('radio-active');\r\n    }\r\n    \r\n    function handleRadioMouseLeave(e) {\r\n        const radioOption = e.currentTarget;\r\n        radioOption.classList.remove('radio-active');\r\n    }\r\n    \r\n    function handleRadioTouchStart(e) {\r\n        console.log('Radio button touched');\r\n        const radioOption = e.currentTarget;\r\n        radioOption.classList.add('radio-active');\r\n    }\r\n    \r\n    function handleRadioTouchEnd(e) {\r\n        const radioOption = e.currentTarget;\r\n        // \u041D\u0435\u0431\u043E\u043B\u044C\u0448\u0430\u044F \u0437\u0430\u0434\u0435\u0440\u0436\u043A\u0430 \u0434\u043B\u044F \u0432\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u043E\u0439 \u043E\u0431\u0440\u0430\u0442\u043D\u043E\u0439 \u0441\u0432\u044F\u0437\u0438\r\n        setTimeout(() => {\r\n            radioOption.classList.remove('radio-active');\r\n        }, 150);\r\n    }\r\n    \r\n    function handleRadioClick(e) {\r\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0432\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u0440\u0430\u0434\u0438\u043E-\u043A\u043D\u043E\u043F\u043E\u043A \u0432 \u0433\u0440\u0443\u043F\u043F\u0435\r\n        const clickedOption = e.currentTarget;\r\n        const radioName = clickedOption.querySelector('input[type=\"radio\"]')?.name;\r\n        \r\n        if (radioName) {\r\n            document.querySelectorAll(`.radio-option input[name=\"${radioName}\"]`).forEach(radio => {\r\n                const option = radio.closest('.radio-option');\r\n                if (option) {\r\n                    if (radio.checked) {\r\n                        option.classList.add('radio-checked');\r\n                    } else {\r\n                        option.classList.remove('radio-checked');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\r\n    addRadioButtonListeners();\r\n    \r\n    // \u0422\u0430\u043A\u0436\u0435 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u043F\u0440\u0438 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u0438 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0445 \u043E\u043A\u043E\u043D\r\n    document.addEventListener('modalOpened', function() {\r\n        setTimeout(addRadioButtonListeners, 100);\r\n    });\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0440\u0430\u0434\u0438\u043E-\u043A\u043D\u043E\u043F\u043E\u043A\r\n    document.addEventListener('change', function(e) {\r\n        if (e.target.type === 'radio') {\r\n            const radioOption = e.target.closest('.radio-option');\r\n            if (radioOption) {\r\n                // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0432\u0441\u0435 \u0440\u0430\u0434\u0438\u043E-\u043A\u043D\u043E\u043F\u043A\u0438 \u0432 \u0433\u0440\u0443\u043F\u043F\u0435\r\n                const radioName = e.target.name;\r\n                document.querySelectorAll(`.radio-option input[name=\"${radioName}\"]`).forEach(radio => {\r\n                    const option = radio.closest('.radio-option');\r\n                    if (option) {\r\n                        option.classList.toggle('radio-checked', radio.checked);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    \r\n    console.log('Radio button effects initialized');\r\n}\r\n\r\n// \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u0430\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\nfunction initAddModuleModal() {\r\n    console.log('Initializing module modal...');\r\n    \r\n    const addModuleBtn = document.querySelector('.add-module-btn');\r\n    const moduleModal = document.getElementById('addModuleModal');\r\n    const closeModuleModal = document.getElementById('closeModuleModal');\r\n    const cancelModuleModal = document.getElementById('cancelModuleModal');\r\n    const confirmModuleModal = document.getElementById('confirmModuleModal');\r\n\r\n    console.log('Add module button:', addModuleBtn);\r\n    console.log('Module modal:', moduleModal);\r\n\r\n    if (!addModuleBtn) {\r\n        console.error('Add module button not found!');\r\n        return;\r\n    }\r\n    \r\n    if (!moduleModal) {\r\n        console.error('Module modal not found!');\r\n        return;\r\n    }\r\n\r\n    // \u041F\u043E\u043A\u0430\u0437 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430 \u043F\u0440\u0438 \u043A\u043B\u0438\u043A\u0435 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 \"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u043E\u0434\u0443\u043B\u044C\"\r\n    addModuleBtn.addEventListener('click', function(e) {\r\n        console.log('Add module button clicked');\r\n        e.preventDefault();\r\n        \r\n        // \u0421\u0431\u0440\u043E\u0441 \u0444\u043E\u0440\u043C\u044B\r\n        const moduleTitle = document.getElementById('module-title');\r\n        const moduleDescription = document.getElementById('module-description');\r\n        const theoryRadio = document.querySelector('input[name=\"module-type\"][value=\"theory\"]');\r\n        \r\n        if (moduleTitle) moduleTitle.value = '';\r\n        if (moduleDescription) moduleDescription.value = '';\r\n        if (theoryRadio) theoryRadio.checked = true;\r\n        \r\n        showModal(moduleModal);\r\n        \r\n        // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u0440\u0430\u0434\u0438\u043E-\u043A\u043D\u043E\u043F\u043A\u0438 \u043F\u043E\u0441\u043B\u0435 \u043E\u0442\u043A\u0440\u044B\u0442\u0438\u044F \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n        setTimeout(initRadioButtonEffects, 100);\r\n        \r\n        // \u0422\u0440\u0438\u0433\u0433\u0435\u0440\u0438\u043C \u043A\u0430\u0441\u0442\u043E\u043C\u043D\u043E\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0435\r\n        document.dispatchEvent(new CustomEvent('modalOpened'));\r\n    });\r\n\r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    function closeModuleModalFunc() {\r\n        console.log('Closing module modal');\r\n        hideModal(moduleModal);\r\n    }\r\n\r\n    if (closeModuleModal) {\r\n        closeModuleModal.addEventListener('click', closeModuleModalFunc);\r\n    } else {\r\n        console.error('Close module modal button not found');\r\n    }\r\n    \r\n    if (cancelModuleModal) {\r\n        cancelModuleModal.addEventListener('click', closeModuleModalFunc);\r\n    } else {\r\n        console.error('Cancel module modal button not found');\r\n    }\r\n\r\n    // \u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\n    if (confirmModuleModal) {\r\n        confirmModuleModal.addEventListener('click', function() {\r\n            console.log('Confirm module creation');\r\n            const title = document.getElementById('module-title')?.value.trim();\r\n            const description = document.getElementById('module-description')?.value.trim();\r\n            const type = document.querySelector('input[name=\"module-type\"]:checked')?.value;\r\n\r\n            if (!title) {\r\n                showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F', 'error');\r\n                return;\r\n            }\r\n\r\n            addNewModule(title, description, type);\r\n            closeModuleModalFunc();\r\n        });\r\n    } else {\r\n        console.error('Confirm module modal button not found');\r\n    }\r\n\r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    moduleModal.addEventListener('click', function(e) {\r\n        if (e.target === moduleModal) {\r\n            closeModuleModalFunc();\r\n        }\r\n    });\r\n    \r\n    console.log('Module modal initialized successfully');\r\n}\r\n\r\nimport { CourseStudentsManager } from './course-students.js';\r\nimport { modalManager } from './modal-manager.js';\r\n\r\nexport function initCourseManagement() {\r\n    console.log('Initializing course management...');\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C\u0438\r\n    const studentsManager = new CourseStudentsManager();\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\u043C\u0438\r\n    initModulesManagement();\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F\r\n    initManagementCards();\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\r\n    initSaveButtons();\r\n    \r\n    console.log('Course management fully initialized');\r\n}\r\n\r\nfunction initModulesManagement() {\r\n    let currentModules = [\r\n        { id: 1, title: \"\u0412\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u0432 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435\", description: \"\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043F\u043E\u043D\u044F\u0442\u0438\u044F \u0438 \u0438\u0441\u0442\u043E\u0440\u0438\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F. \u0417\u043D\u0430\u043A\u043E\u043C\u0441\u0442\u0432\u043E \u0441 \u044F\u0437\u044B\u043A\u0430\u043C\u0438 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F.\", type: \"theory\", order: 1 },\r\n        { id: 2, title: \"\u041F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435 \u0438 \u0442\u0438\u043F\u044B \u0434\u0430\u043D\u043D\u044B\u0445\", description: \"\u0420\u0430\u0431\u043E\u0442\u0430 \u0441 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u043C\u0438, \u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0442\u0438\u043F\u044B \u0434\u0430\u043D\u043D\u044B\u0445 \u0438 \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u0438 \u043D\u0430\u0434 \u043D\u0438\u043C\u0438.\", type: \"theory\", order: 2 },\r\n        { id: 3, title: \"\u0423\u0441\u043B\u043E\u0432\u043D\u044B\u0435 \u043E\u043F\u0435\u0440\u0430\u0442\u043E\u0440\u044B\", description: \"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 if, else, switch \u0434\u043B\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u043E\u0442\u043E\u043A\u043E\u043C \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u044B.\", type: \"theory\", order: 3 },\r\n        { id: 4, title: \"\u0426\u0438\u043A\u043B\u044B\", description: \"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435 \u0446\u0438\u043A\u043B\u043E\u0432 for, while, do-while \u0434\u043B\u044F \u043F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u044F \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439.\", type: \"practice\", order: 4 }\r\n    ];\r\n\r\n    // \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u043C \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E \u043C\u043E\u0434\u0443\u043B\u0435\u0439\r\n    if (!modalManager.register('addModuleModal')) {\r\n        createModuleModal();\r\n    }\r\n\r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u043A\u043D\u043E\u043F\u043A\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\n    document.addEventListener('click', (e) => {\r\n        if (e.target.closest('#addModuleBtn')) {\r\n            openAddModuleModal();\r\n        }\r\n        \r\n        if (e.target.closest('#confirmModuleModal')) {\r\n            confirmAddModule();\r\n        }\r\n        \r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043C\u043E\u0434\u0443\u043B\u0435\u0439\r\n        if (e.target.closest('[data-module-action]')) {\r\n            const button = e.target.closest('[data-module-action]');\r\n            const action = button.dataset.moduleAction;\r\n            const moduleId = parseInt(button.dataset.moduleId);\r\n            handleModuleAction(action, moduleId);\r\n        }\r\n    });\r\n\r\n    function createModuleModal() {\r\n        const modalContent = `\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h3>\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u043C\u043E\u0434\u0443\u043B\u044F</h3>\r\n                    <button type=\"button\" class=\"modal-close\" data-modal-close>\r\n                        <i class=\"fas fa-times\"></i>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"module-title\" class=\"form-label\">\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F *</label>\r\n                        <input type=\"text\" id=\"module-title\" class=\"form-control\" placeholder=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F\">\r\n                    </div>\r\n                    \r\n                    <div class=\"form-group\">\r\n                        <label for=\"module-description\" class=\"form-label\">\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F</label>\r\n                        <textarea id=\"module-description\" class=\"form-control\" placeholder=\"\u041E\u043F\u0438\u0448\u0438\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F\" rows=\"3\"></textarea>\r\n                    </div>\r\n                    \r\n                    <div class=\"module-type-options\">\r\n                        <div class=\"form-group\">\r\n                            <label class=\"form-label\">\u0422\u0438\u043F \u043C\u043E\u0434\u0443\u043B\u044F</label>\r\n                            <div class=\"radio-options\">\r\n                                <label class=\"radio-option\">\r\n                                    <input type=\"radio\" name=\"moduleType\" value=\"theory\" checked>\r\n                                    <span class=\"radio-checkmark\"></span>\r\n                                    <span class=\"radio-label\">\r\n                                        <i class=\"fas fa-book\"></i>\r\n                                        \u0422\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439\r\n                                    </span>\r\n                                </label>\r\n                                \r\n                                <label class=\"radio-option\">\r\n                                    <input type=\"radio\" name=\"moduleType\" value=\"practice\">\r\n                                    <span class=\"radio-checkmark\"></span>\r\n                                    <span class=\"radio-label\">\r\n                                        <i class=\"fas fa-tasks\"></i>\r\n                                        \u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439\r\n                                    </span>\r\n                                </label>\r\n                                \r\n                                <label class=\"radio-option\">\r\n                                    <input type=\"radio\" name=\"moduleType\" value=\"project\">\r\n                                    <span class=\"radio-checkmark\"></span>\r\n                                    <span class=\"radio-label\">\r\n                                        <i class=\"fas fa-project-diagram\"></i>\r\n                                        \u041F\u0440\u043E\u0435\u043A\u0442\u043D\u044B\u0439\r\n                                    </span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-light\" data-modal-close>\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n                    <button type=\"button\" class=\"btn btn-success\" id=\"confirmModuleModal\">\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043C\u043E\u0434\u0443\u043B\u044C</button>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        modalManager.createModal('addModuleModal', modalContent);\r\n    }\r\n\r\n    function openAddModuleModal() {\r\n        console.log('Opening module modal');\r\n        // \u0421\u0431\u0440\u043E\u0441 \u0444\u043E\u0440\u043C\u044B\r\n        const moduleTitle = document.getElementById('module-title');\r\n        const moduleDescription = document.getElementById('module-description');\r\n        \r\n        if (moduleTitle) moduleTitle.value = '';\r\n        if (moduleDescription) moduleDescription.value = '';\r\n        \r\n        const theoryRadio = document.querySelector('input[name=\"moduleType\"][value=\"theory\"]');\r\n        if (theoryRadio) theoryRadio.checked = true;\r\n        \r\n        modalManager.show('addModuleModal');\r\n    }\r\n\r\n    function confirmAddModule() {\r\n        const moduleTitle = document.getElementById('module-title');\r\n        if (!moduleTitle) return;\r\n        \r\n        const title = moduleTitle.value.trim();\r\n        const description = document.getElementById('module-description') ? \r\n                           document.getElementById('module-description').value.trim() : '';\r\n        const typeInput = document.querySelector('input[name=\"moduleType\"]:checked');\r\n        const type = typeInput ? typeInput.value : 'theory';\r\n        \r\n        if (!title) {\r\n            showNotification('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F', 'error');\r\n            moduleTitle.focus();\r\n            return;\r\n        }\r\n        \r\n        const newModule = {\r\n            id: Date.now(),\r\n            title: title,\r\n            description: description,\r\n            type: type,\r\n            order: currentModules.length + 1\r\n        };\r\n        \r\n        currentModules.push(newModule);\r\n        updateModulesList();\r\n        modalManager.hide('addModuleModal');\r\n        showNotification('\u041C\u043E\u0434\u0443\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D');\r\n    }\r\n\r\n    function updateModulesList() {\r\n        const modulesList = document.querySelector('.modules-list');\r\n        if (!modulesList) return;\r\n        \r\n        modulesList.innerHTML = '';\r\n        \r\n        currentModules.forEach(module => {\r\n            const moduleItem = document.createElement('div');\r\n            moduleItem.className = 'module-item';\r\n            moduleItem.innerHTML = `\r\n                <div class=\"module-order\">${module.order}</div>\r\n                <div class=\"module-info\">\r\n                    <h4>${module.title}</h4>\r\n                    <p>${module.description}</p>\r\n                </div>\r\n                <div class=\"module-actions\">\r\n                    <button class=\"action-btn\" data-module-action=\"edit\" data-module-id=\"${module.id}\">\r\n                        <i class=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button class=\"action-btn\" data-module-action=\"delete\" data-module-id=\"${module.id}\">\r\n                        <i class=\"fas fa-trash\"></i>\r\n                    </button>\r\n                    <button class=\"action-btn\" data-module-action=\"up\" data-module-id=\"${module.id}\">\r\n                        <i class=\"fas fa-arrow-up\"></i>\r\n                    </button>\r\n                    <button class=\"action-btn\" data-module-action=\"down\" data-module-id=\"${module.id}\">\r\n                        <i class=\"fas fa-arrow-down\"></i>\r\n                    </button>\r\n                </div>\r\n            `;\r\n            modulesList.appendChild(moduleItem);\r\n        });\r\n        \r\n        updateModuleCount();\r\n    }\r\n\r\n    function handleModuleAction(action, moduleId) {\r\n        switch (action) {\r\n            case 'edit':\r\n                showNotification(`\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F ${moduleId}`);\r\n                break;\r\n            case 'delete':\r\n                deleteModule(moduleId);\r\n                break;\r\n            case 'up':\r\n                moveModuleUp(moduleId);\r\n                break;\r\n            case 'down':\r\n                moveModuleDown(moduleId);\r\n                break;\r\n        }\r\n    }\r\n\r\n    function deleteModule(moduleId) {\r\n        if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043C\u043E\u0434\u0443\u043B\u044C?')) {\r\n            currentModules = currentModules.filter(module => module.id !== moduleId);\r\n            currentModules.forEach((module, index) => {\r\n                module.order = index + 1;\r\n            });\r\n            updateModulesList();\r\n            showNotification('\u041C\u043E\u0434\u0443\u043B\u044C \u0443\u0434\u0430\u043B\u0435\u043D');\r\n        }\r\n    }\r\n\r\n    function moveModuleUp(moduleId) {\r\n        const moduleIndex = currentModules.findIndex(module => module.id === moduleId);\r\n        if (moduleIndex > 0) {\r\n            [currentModules[moduleIndex - 1], currentModules[moduleIndex]] = \r\n            [currentModules[moduleIndex], currentModules[moduleIndex - 1]];\r\n            \r\n            currentModules.forEach((module, index) => {\r\n                module.order = index + 1;\r\n            });\r\n            \r\n            updateModulesList();\r\n        }\r\n    }\r\n\r\n    function moveModuleDown(moduleId) {\r\n        const moduleIndex = currentModules.findIndex(module => module.id === moduleId);\r\n        if (moduleIndex < currentModules.length - 1) {\r\n            [currentModules[moduleIndex], currentModules[moduleIndex + 1]] = \r\n            [currentModules[moduleIndex + 1], currentModules[moduleIndex]];\r\n            \r\n            currentModules.forEach((module, index) => {\r\n                module.order = index + 1;\r\n            });\r\n            \r\n            updateModulesList();\r\n        }\r\n    }\r\n\r\n    function updateModuleCount() {\r\n        const moduleCountElement = document.querySelector('.management-card:first-child h3');\r\n        if (moduleCountElement) {\r\n            moduleCountElement.textContent = currentModules.length;\r\n        }\r\n    }\r\n\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0441\u043F\u0438\u0441\u043A\u0430 \u043C\u043E\u0434\u0443\u043B\u0435\u0439\r\n    updateModulesList();\r\n}\r\n\r\nfunction initManagementCards() {\r\n    document.querySelectorAll('.management-card').forEach(card => {\r\n        card.addEventListener('click', function() {\r\n            const cardText = this.querySelector('p').textContent;\r\n            \r\n            if (cardText.includes('\u041C\u043E\u0434\u0443\u043B\u0435\u0439')) {\r\n                document.querySelector('.modules-list').scrollIntoView({ behavior: 'smooth' });\r\n            } else if (cardText.includes('\u0421\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432')) {\r\n                document.querySelector('.students-table').scrollIntoView({ behavior: 'smooth' });\r\n            } else if (cardText.includes('\u0417\u0430\u0434\u0430\u043D\u0438\u0439')) {\r\n                document.querySelector('.assignments-list').scrollIntoView({ behavior: 'smooth' });\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction initSaveButtons() {\r\n    const saveSettingsBtn = document.querySelector('.settings-form .btn');\r\n    if (saveSettingsBtn) {\r\n        saveSettingsBtn.addEventListener('click', function(e) {\r\n            e.preventDefault();\r\n            showNotification('\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A\u0443\u0440\u0441\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B');\r\n        });\r\n    }\r\n    \r\n    const saveMainBtn = document.querySelector('.course-management-actions .btn');\r\n    if (saveMainBtn) {\r\n        saveMainBtn.addEventListener('click', function(e) {\r\n            e.preventDefault();\r\n            showNotification('\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B');\r\n        });\r\n    }\r\n}\r\n\r\nfunction showNotification(message, type = 'success') {\r\n    if (typeof showToast !== 'undefined') {\r\n        showToast(message, type);\r\n    } else {\r\n        console.log(`Notification [${type}]: ${message}`);\r\n    }\r\n}", "export function initCourseCreation() {\r\n    initPreview();\r\n    initFormSubmission();\r\n    initToastSystem();\r\n    addToastStyles();\r\n}\r\n\r\nfunction initToastSystem() {\r\n    if (!document.getElementById('toast-container')) {\r\n        const toastContainer = document.createElement('div');\r\n        toastContainer.id = 'toast-container';\r\n        toastContainer.className = 'toast-container';\r\n        document.body.appendChild(toastContainer);\r\n    }\r\n}\r\n\r\nfunction showToast(message, type = 'info', duration = 4000) {\r\n    const toastContainer = document.getElementById('toast-container');\r\n    if (!toastContainer) return;\r\n\r\n    const toast = document.createElement('div');\r\n    toast.className = `toast toast-${type}`;\r\n    \r\n    const icons = {\r\n        success: 'fas fa-check-circle',\r\n        error: 'fas fa-exclamation-circle',\r\n        warning: 'fas fa-exclamation-triangle',\r\n        info: 'fas fa-info-circle'\r\n    };\r\n\r\n    toast.innerHTML = `\r\n        <div class=\"toast-content\">\r\n            <div class=\"toast-icon\">\r\n                <i class=\"${icons[type] || icons.info}\"></i>\r\n            </div>\r\n            <div class=\"toast-message\">${message}</div>\r\n            <button class=\"toast-close\">\r\n                <i class=\"fas fa-times\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"toast-progress\"></div>\r\n    `;\r\n\r\n    toastContainer.appendChild(toast);\r\n\r\n    setTimeout(() => {\r\n        toast.classList.add('show');\r\n    }, 10);\r\n\r\n    const closeBtn = toast.querySelector('.toast-close');\r\n    closeBtn.addEventListener('click', () => {\r\n        hideToast(toast);\r\n    });\r\n\r\n    if (duration > 0) {\r\n        setTimeout(() => {\r\n            hideToast(toast);\r\n        }, duration);\r\n    }\r\n\r\n    const progressBar = toast.querySelector('.toast-progress');\r\n    if (progressBar) {\r\n        progressBar.style.animation = `progress ${duration}ms linear`;\r\n    }\r\n\r\n    return toast;\r\n}\r\n\r\nfunction hideToast(toast) {\r\n    toast.classList.remove('show');\r\n    toast.classList.add('hide');\r\n    \r\n    setTimeout(() => {\r\n        if (toast.parentNode) {\r\n            toast.parentNode.removeChild(toast);\r\n        }\r\n    }, 300);\r\n}\r\n\r\nfunction initPreview() {\r\n    console.log('Initializing preview...');\r\n    \r\n    const titleInput = document.getElementById('course-title');\r\n    const descInput = document.getElementById('course-short-desc');\r\n    const levelSelect = document.getElementById('course-level');\r\n    const durationInput = document.getElementById('course-duration');\r\n    \r\n    const previewTitle = document.getElementById('preview-title');\r\n    const previewDesc = document.getElementById('preview-desc');\r\n    const previewLevel = document.getElementById('preview-level');\r\n    const previewDuration = document.getElementById('preview-duration');\r\n    \r\n    // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C, \u0447\u0442\u043E \u0432\u0441\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0442\r\n    if (!titleInput || !previewTitle) {\r\n        console.error('Title input or preview title not found');\r\n        return;\r\n    }\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u043F\u043E\u043B\u0435\u0439\r\n    titleInput.addEventListener('input', function() {\r\n        console.log('Title changed:', this.value);\r\n        previewTitle.textContent = this.value || '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430';\r\n    });\r\n    \r\n    if (descInput && previewDesc) {\r\n        descInput.addEventListener('input', function() {\r\n            previewDesc.textContent = this.value || '\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\r\n        });\r\n    }\r\n    \r\n    if (levelSelect && previewLevel) {\r\n        levelSelect.addEventListener('change', function() {\r\n            const levelText = this.options[this.selectedIndex].text;\r\n            previewLevel.textContent = `\u0423\u0440\u043E\u0432\u0435\u043D\u044C: ${levelText || '-'}`;\r\n        });\r\n    }\r\n    \r\n    if (durationInput && previewDuration) {\r\n        durationInput.addEventListener('input', function() {\r\n            previewDuration.textContent = `\u0427\u0430\u0441\u043E\u0432: ${this.value || '-'}`;\r\n        });\r\n    }\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\r\n    const imageInput = document.getElementById('course-image');\r\n    const previewImage = document.querySelector('.preview-image');\r\n    \r\n    if (imageInput && previewImage) {\r\n        imageInput.addEventListener('change', function(e) {\r\n            if (this.files && this.files[0]) {\r\n                const reader = new FileReader();\r\n                \r\n                reader.onload = function(e) {\r\n                    previewImage.innerHTML = '';\r\n                    const img = document.createElement('img');\r\n                    img.src = e.target.result;\r\n                    img.style.width = '100%';\r\n                    img.style.height = '100%';\r\n                    img.style.objectFit = 'cover';\r\n                    img.style.borderRadius = '8px';\r\n                    previewImage.appendChild(img);\r\n                };\r\n                \r\n                reader.readAsDataURL(this.files[0]);\r\n            }\r\n        });\r\n    }\r\n    \r\n    console.log('Preview initialized successfully');\r\n}\r\n\r\nfunction initFormSubmission() {\r\n    console.log('Initializing form submission...');\r\n    \r\n    const form = document.getElementById('course-form');\r\n    const saveDraftBtn = document.querySelector('.form-actions .btn-light');\r\n    \r\n    if (!form) {\r\n        console.error('Form not found');\r\n        return;\r\n    }\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430\r\n    if (saveDraftBtn) {\r\n        saveDraftBtn.addEventListener('click', function(e) {\r\n            e.preventDefault();\r\n            \r\n            const formData = {\r\n                title: document.getElementById('course-title').value,\r\n                description: document.getElementById('course-short-desc').value,\r\n                fullDescription: document.getElementById('course-full-desc').value,\r\n                category: document.getElementById('course-category').value,\r\n                level: document.getElementById('course-level').value,\r\n                duration: document.getElementById('course-duration').value,\r\n                timestamp: new Date().toISOString()\r\n            };\r\n            \r\n            localStorage.setItem('courseDraft', JSON.stringify(formData));\r\n            \r\n            showToast('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D!', 'success', 3000);\r\n            console.log('Draft saved:', formData);\r\n        });\r\n    }\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0444\u043E\u0440\u043C\u044B\r\n    form.addEventListener('submit', function(e) {\r\n        e.preventDefault();\r\n        \r\n        if (!validateForm()) {\r\n            return;\r\n        }\r\n        \r\n        const submitBtn = form.querySelector('button[type=\"submit\"]');\r\n        const originalText = submitBtn.innerHTML;\r\n        submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435...';\r\n        submitBtn.disabled = true;\r\n        \r\n        // \u0418\u043C\u0438\u0442\u0430\u0446\u0438\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\r\n        setTimeout(() => {\r\n            showToast('\u041A\u0443\u0440\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D \u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0446\u0438\u044E!', 'success', 5000);\r\n            \r\n            // \u0421\u0431\u0440\u043E\u0441 \u0444\u043E\u0440\u043C\u044B\r\n            resetForm();\r\n            \r\n            // \u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430\r\n            localStorage.removeItem('courseDraft');\r\n            \r\n            // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043D\u043E\u043F\u043A\u0438\r\n            submitBtn.innerHTML = originalText;\r\n            submitBtn.disabled = false;\r\n            \r\n            console.log('Course created successfully');\r\n        }, 2000);\r\n    });\r\n    \r\n    // \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B\r\n    loadDraft();\r\n    \r\n    console.log('Form submission initialized successfully');\r\n}\r\n\r\nfunction validateForm() {\r\n    const title = document.getElementById('course-title').value.trim();\r\n    const description = document.getElementById('course-short-desc').value.trim();\r\n    const fullDescription = document.getElementById('course-full-desc').value.trim();\r\n    const category = document.getElementById('course-category').value;\r\n    const level = document.getElementById('course-level').value;\r\n    const duration = document.getElementById('course-duration').value;\r\n    \r\n    if (!title) {\r\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430', 'error', 4000);\r\n        return false;\r\n    }\r\n    \r\n    if (!description) {\r\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430', 'error', 4000);\r\n        return false;\r\n    }\r\n    \r\n    if (!fullDescription) {\r\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430', 'error', 4000);\r\n        return false;\r\n    }\r\n    \r\n    if (!category) {\r\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u043A\u0443\u0440\u0441\u0430', 'error', 4000);\r\n        return false;\r\n    }\r\n    \r\n    if (!level) {\r\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0441\u043B\u043E\u0436\u043D\u043E\u0441\u0442\u0438', 'error', 4000);\r\n        return false;\r\n    }\r\n    \r\n    if (!duration || duration < 1) {\r\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u043A\u0443\u0440\u0441\u0430', 'error', 4000);\r\n        return false;\r\n    }\r\n    \r\n    return true;\r\n}\r\n\r\nfunction resetForm() {\r\n    const form = document.getElementById('course-form');\r\n    const previewTitle = document.getElementById('preview-title');\r\n    const previewDesc = document.getElementById('preview-desc');\r\n    const previewLevel = document.getElementById('preview-level');\r\n    const previewDuration = document.getElementById('preview-duration');\r\n    const previewImage = document.querySelector('.preview-image');\r\n    \r\n    if (form) {\r\n        form.reset();\r\n        console.log('Form reset');\r\n    }\r\n    \r\n    // \u0421\u0431\u0440\u043E\u0441 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\n    if (previewTitle) previewTitle.textContent = '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430';\r\n    if (previewDesc) previewDesc.textContent = '\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\r\n    if (previewLevel) previewLevel.textContent = '\u0423\u0440\u043E\u0432\u0435\u043D\u044C: -';\r\n    if (previewDuration) previewDuration.textContent = '\u0427\u0430\u0441\u043E\u0432: -';\r\n    \r\n    // \u0421\u0431\u0440\u043E\u0441 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\r\n    if (previewImage) {\r\n        previewImage.innerHTML = '<i class=\"fas fa-book\"></i>';\r\n    }\r\n    \r\n    console.log('Preview reset');\r\n}\r\n\r\nfunction loadDraft() {\r\n    const draft = localStorage.getItem('courseDraft');\r\n    if (draft) {\r\n        try {\r\n            const formData = JSON.parse(draft);\r\n            \r\n            document.getElementById('course-title').value = formData.title || '';\r\n            document.getElementById('course-short-desc').value = formData.description || '';\r\n            document.getElementById('course-full-desc').value = formData.fullDescription || '';\r\n            document.getElementById('course-category').value = formData.category || '';\r\n            document.getElementById('course-level').value = formData.level || '';\r\n            document.getElementById('course-duration').value = formData.duration || '';\r\n            \r\n            // \u0422\u0440\u0438\u0433\u0433\u0435\u0440\u0438\u043C \u0441\u043E\u0431\u044B\u0442\u0438\u044F \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\n            document.getElementById('course-title').dispatchEvent(new Event('input'));\r\n            document.getElementById('course-short-desc').dispatchEvent(new Event('input'));\r\n            document.getElementById('course-level').dispatchEvent(new Event('change'));\r\n            document.getElementById('course-duration').dispatchEvent(new Event('input'));\r\n            \r\n            console.log('Draft loaded:', formData);\r\n            showToast('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D', 'info', 3000);\r\n        } catch (error) {\r\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430:', error);\r\n        }\r\n    }\r\n}\r\n\r\nfunction addToastStyles() {\r\n    const toastStyles = `\r\n        .toast-container {\r\n            position: fixed;\r\n            top: 20px;\r\n            right: 20px;\r\n            z-index: 10001;\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 10px;\r\n            max-width: 400px;\r\n        }\r\n        \r\n        .toast {\r\n            background: white;\r\n            border-radius: 12px;\r\n            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\r\n            overflow: hidden;\r\n            transform: translateX(400px);\r\n            opacity: 0;\r\n            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\r\n            border-left: 4px solid;\r\n        }\r\n        \r\n        .toast.show {\r\n            transform: translateX(0);\r\n            opacity: 1;\r\n        }\r\n        \r\n        .toast.hide {\r\n            transform: translateX(400px);\r\n            opacity: 0;\r\n        }\r\n        \r\n        .toast-success {\r\n            border-left-color: #10b981;\r\n        }\r\n        \r\n        .toast-error {\r\n            border-left-color: #ef4444;\r\n        }\r\n        \r\n        .toast-warning {\r\n            border-left-color: #f59e0b;\r\n        }\r\n        \r\n        .toast-info {\r\n            border-left-color: #3b82f6;\r\n        }\r\n        \r\n        .toast-content {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 16px;\r\n            position: relative;\r\n        }\r\n        \r\n        .toast-icon {\r\n            margin-right: 12px;\r\n            font-size: 1.5em;\r\n            flex-shrink: 0;\r\n        }\r\n        \r\n        .toast-success .toast-icon {\r\n            color: #10b981;\r\n        }\r\n        \r\n        .toast-error .toast-icon {\r\n            color: #ef4444;\r\n        }\r\n        \r\n        .toast-warning .toast-icon {\r\n            color: #f59e0b;\r\n        }\r\n        \r\n        .toast-info .toast-icon {\r\n            color: #3b82f6;\r\n        }\r\n        \r\n        .toast-message {\r\n            flex: 1;\r\n            font-weight: 500;\r\n            color: #374151;\r\n            font-size: 0.95em;\r\n            line-height: 1.4;\r\n        }\r\n        \r\n        .toast-close {\r\n            background: none;\r\n            border: none;\r\n            color: #9ca3af;\r\n            cursor: pointer;\r\n            padding: 4px;\r\n            margin-left: 8px;\r\n            border-radius: 4px;\r\n            transition: all 0.2s;\r\n            flex-shrink: 0;\r\n        }\r\n        \r\n        .toast-close:hover {\r\n            background: #f3f4f6;\r\n            color: #6b7280;\r\n        }\r\n        \r\n        .toast-progress {\r\n            height: 3px;\r\n            width: 100%;\r\n            background: rgba(0, 0, 0, 0.1);\r\n            position: relative;\r\n        }\r\n        \r\n        .toast-progress::before {\r\n            content: '';\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            height: 100%;\r\n            width: 100%;\r\n            transform-origin: left;\r\n            animation: progress linear;\r\n        }\r\n        \r\n        .toast-success .toast-progress::before {\r\n            background: linear-gradient(90deg, #10b981, #34d399);\r\n        }\r\n        \r\n        .toast-error .toast-progress::before {\r\n            background: linear-gradient(90deg, #ef4444, #f87171);\r\n        }\r\n        \r\n        .toast-warning .toast-progress::before {\r\n            background: linear-gradient(90deg, #f59e0b, #fbbf24);\r\n        }\r\n        \r\n        .toast-info .toast-progress::before {\r\n            background: linear-gradient(90deg, #3b82f6, #60a5fa);\r\n        }\r\n        \r\n        @keyframes progress {\r\n            0% {\r\n                transform: scaleX(1);\r\n            }\r\n            100% {\r\n                transform: scaleX(0);\r\n            }\r\n        }\r\n        \r\n        .fa-spin {\r\n            animation: fa-spin 1s infinite linear;\r\n        }\r\n        \r\n        @keyframes fa-spin {\r\n            0% {\r\n                transform: rotate(0deg);\r\n            }\r\n            100% {\r\n                transform: rotate(360deg);\r\n            }\r\n        }\r\n        \r\n        @media (max-width: 768px) {\r\n            .toast-container {\r\n                top: 10px;\r\n                right: 10px;\r\n                left: 10px;\r\n                max-width: none;\r\n            }\r\n            \r\n            .toast {\r\n                transform: translateY(-100px);\r\n            }\r\n            \r\n            .toast.show {\r\n                transform: translateY(0);\r\n            }\r\n            \r\n            .toast.hide {\r\n                transform: translateY(-100px);\r\n            }\r\n        }\r\n    `;\r\n\r\n    if (!document.querySelector('#toast-styles')) {\r\n        const styleSheet = document.createElement('style');\r\n        styleSheet.id = 'toast-styles';\r\n        styleSheet.textContent = toastStyles;\r\n        document.head.appendChild(styleSheet);\r\n    }\r\n}", "// js/modules/course-detail-management.js\r\n\r\nexport function initCourseDetailManagement() {\r\n    initDeleteButtons();\r\n    initAddLessonModal();\r\n    initAddModuleModal();\r\n    initDragAndDrop();\r\n    addManagementStyles();\r\n}\r\n\r\nfunction initDeleteButtons() {\r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432\r\n    const materialsList = document.querySelector('.materials-list');\r\n    if (materialsList) {\r\n        materialsList.addEventListener('click', function(e) {\r\n            if (e.target.classList.contains('btn-danger') || e.target.closest('.btn-danger')) {\r\n                const materialItem = e.target.closest('.material-item');\r\n                if (materialItem) {\r\n                    if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B?')) {\r\n                        materialItem.style.animation = 'slideOut 0.3s ease';\r\n                        setTimeout(() => {\r\n                            materialItem.remove();\r\n                            showToast('\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D', 'success', 3000);\r\n                        }, 300);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u0443\u0440\u043E\u043A\u043E\u0432 (\u0435\u0441\u043B\u0438 \u0435\u0441\u0442\u044C \u0432 \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0435)\r\n    const lessonsContainer = document.querySelector('.lessons-container');\r\n    if (lessonsContainer) {\r\n        lessonsContainer.addEventListener('click', function(e) {\r\n            if (e.target.classList.contains('delete-lesson') || e.target.closest('.delete-lesson')) {\r\n                const lessonItem = e.target.closest('.lesson-item');\r\n                if (lessonItem) {\r\n                    if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0443\u0440\u043E\u043A?')) {\r\n                        lessonItem.style.animation = 'slideOut 0.3s ease';\r\n                        setTimeout(() => {\r\n                            lessonItem.remove();\r\n                            updateLessonNumbers();\r\n                            showToast('\u0423\u0440\u043E\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D', 'success', 3000);\r\n                        }, 300);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u0435\u0439 (\u0435\u0441\u043B\u0438 \u0435\u0441\u0442\u044C \u0432 \u0441\u0442\u0440\u0443\u043A\u0442\u0443\u0440\u0435)\r\n    const modulesContainer = document.querySelector('.modules-container');\r\n    if (modulesContainer) {\r\n        modulesContainer.addEventListener('click', function(e) {\r\n            if (e.target.classList.contains('delete-module') || e.target.closest('.delete-module')) {\r\n                const moduleItem = e.target.closest('.module-item');\r\n                if (moduleItem) {\r\n                    if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043C\u043E\u0434\u0443\u043B\u044C \u0438 \u0432\u0441\u0435 \u0435\u0433\u043E \u0443\u0440\u043E\u043A\u0438?')) {\r\n                        moduleItem.style.animation = 'slideOut 0.3s ease';\r\n                        setTimeout(() => {\r\n                            moduleItem.remove();\r\n                            updateModuleNumbers();\r\n                            showToast('\u041C\u043E\u0434\u0443\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D', 'success', 3000);\r\n                        }, 300);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction initAddLessonModal() {\r\n    const addLessonBtn = document.querySelector('.add-lesson-btn');\r\n    const lessonModal = document.getElementById('addLessonModal');\r\n    const closeLessonModal = document.getElementById('closeLessonModal');\r\n    const cancelLessonModal = document.getElementById('cancelLessonModal');\r\n    const confirmLessonModal = document.getElementById('confirmLessonModal');\r\n    const lessonTypeOptions = document.querySelectorAll('.lesson-type-option');\r\n\r\n    if (!addLessonBtn || !lessonModal) return;\r\n\r\n    let selectedLessonType = 'lecture';\r\n\r\n    // \u041F\u043E\u043A\u0430\u0437 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    addLessonBtn.addEventListener('click', function() {\r\n        selectedLessonType = 'lecture';\r\n        updateLessonTypeSelection();\r\n        lessonModal.style.display = 'flex';\r\n        setTimeout(() => lessonModal.classList.add('show'), 10);\r\n    });\r\n\r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    function closeLessonModalFunc() {\r\n        lessonModal.classList.remove('show');\r\n        setTimeout(() => {\r\n            lessonModal.style.display = 'none';\r\n        }, 300);\r\n    }\r\n\r\n    if (closeLessonModal) closeLessonModal.addEventListener('click', closeLessonModalFunc);\r\n    if (cancelLessonModal) cancelLessonModal.addEventListener('click', closeLessonModalFunc);\r\n\r\n    // \u0412\u044B\u0431\u043E\u0440 \u0442\u0438\u043F\u0430 \u0443\u0440\u043E\u043A\u0430\r\n    lessonTypeOptions.forEach(option => {\r\n        option.addEventListener('click', function() {\r\n            selectedLessonType = this.getAttribute('data-type');\r\n            updateLessonTypeSelection();\r\n        });\r\n    });\r\n\r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0432\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0432\u044B\u0431\u043E\u0440\u0430 \u0442\u0438\u043F\u0430 \u0443\u0440\u043E\u043A\u0430\r\n    function updateLessonTypeSelection() {\r\n        lessonTypeOptions.forEach(option => {\r\n            if (option.getAttribute('data-type') === selectedLessonType) {\r\n                option.classList.add('selected');\r\n            } else {\r\n                option.classList.remove('selected');\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u0440\u043E\u043A\u0430\r\n    if (confirmLessonModal) {\r\n        confirmLessonModal.addEventListener('click', function() {\r\n            addNewLesson(selectedLessonType);\r\n            closeLessonModalFunc();\r\n        });\r\n    }\r\n\r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    lessonModal.addEventListener('click', function(e) {\r\n        if (e.target === lessonModal) {\r\n            closeLessonModalFunc();\r\n        }\r\n    });\r\n}\r\n\r\nfunction initAddModuleModal() {\r\n    const addModuleBtn = document.querySelector('.add-module-btn');\r\n    const moduleModal = document.getElementById('addModuleModal');\r\n    const closeModuleModal = document.getElementById('closeModuleModal');\r\n    const cancelModuleModal = document.getElementById('cancelModuleModal');\r\n    const confirmModuleModal = document.getElementById('confirmModuleModal');\r\n\r\n    if (!addModuleBtn || !moduleModal) return;\r\n\r\n    // \u041F\u043E\u043A\u0430\u0437 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    addModuleBtn.addEventListener('click', function() {\r\n        // \u0421\u0431\u0440\u043E\u0441 \u0444\u043E\u0440\u043C\u044B\r\n        document.getElementById('module-title').value = '';\r\n        document.getElementById('module-description').value = '';\r\n        document.querySelector('input[name=\"module-type\"][value=\"theory\"]').checked = true;\r\n        \r\n        moduleModal.style.display = 'flex';\r\n        setTimeout(() => moduleModal.classList.add('show'), 10);\r\n    });\r\n\r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    function closeModuleModalFunc() {\r\n        moduleModal.classList.remove('show');\r\n        setTimeout(() => {\r\n            moduleModal.style.display = 'none';\r\n        }, 300);\r\n    }\r\n\r\n    if (closeModuleModal) closeModuleModal.addEventListener('click', closeModuleModalFunc);\r\n    if (cancelModuleModal) cancelModuleModal.addEventListener('click', closeModuleModalFunc);\r\n\r\n    // \u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F\r\n    if (confirmModuleModal) {\r\n        confirmModuleModal.addEventListener('click', function() {\r\n            const title = document.getElementById('module-title').value.trim();\r\n            const description = document.getElementById('module-description').value.trim();\r\n            const type = document.querySelector('input[name=\"module-type\"]:checked').value;\r\n\r\n            if (!title) {\r\n                showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F', 'error', 4000);\r\n                return;\r\n            }\r\n\r\n            addNewModule(title, description, type);\r\n            closeModuleModalFunc();\r\n        });\r\n    }\r\n\r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\r\n    moduleModal.addEventListener('click', function(e) {\r\n        if (e.target === moduleModal) {\r\n            closeModuleModalFunc();\r\n        }\r\n    });\r\n}\r\n\r\nfunction addNewLesson(type) {\r\n    const lessonsContainer = document.querySelector('.lessons-container');\r\n    if (!lessonsContainer) {\r\n        console.warn('\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0443\u0440\u043E\u043A\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D');\r\n        return;\r\n    }\r\n\r\n    const lessonId = Date.now();\r\n    const lessonNumber = lessonsContainer.children.length + 1;\r\n\r\n    let typeIcon, typeName, typeClass;\r\n    switch (type) {\r\n        case 'test':\r\n            typeIcon = 'fa-question-circle';\r\n            typeName = '\u0422\u0435\u0441\u0442';\r\n            typeClass = 'lesson-test';\r\n            break;\r\n        case 'practice':\r\n            typeIcon = 'fa-code';\r\n            typeName = '\u041F\u0440\u0430\u043A\u0442\u0438\u043A\u0430';\r\n            typeClass = 'lesson-practice';\r\n            break;\r\n        case 'lecture':\r\n        default:\r\n            typeIcon = 'fa-play-circle';\r\n            typeName = '\u041B\u0435\u043A\u0446\u0438\u044F';\r\n            typeClass = 'lesson-lecture';\r\n    }\r\n\r\n    const lessonItem = document.createElement('div');\r\n    lessonItem.className = `lesson-item ${typeClass}`;\r\n    lessonItem.setAttribute('data-lesson-id', lessonId);\r\n    lessonItem.setAttribute('draggable', 'true');\r\n    \r\n    lessonItem.innerHTML = `\r\n        <div class=\"lesson-drag-handle\">\r\n            <i class=\"fas fa-grip-vertical\"></i>\r\n        </div>\r\n        <div class=\"lesson-icon\">\r\n            <i class=\"fas ${typeIcon}\"></i>\r\n        </div>\r\n        <div class=\"lesson-content\">\r\n            <div class=\"lesson-header\">\r\n                <h4 class=\"lesson-title\">\u0423\u0440\u043E\u043A ${lessonNumber}: \u041D\u043E\u0432\u0430\u044F ${typeName}</h4>\r\n                <span class=\"lesson-type-badge\">${typeName}</span>\r\n            </div>\r\n            <p class=\"lesson-description\">\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0437\u0434\u0435\u0441\u044C</p>\r\n            <div class=\"lesson-meta\">\r\n                <span class=\"lesson-duration\"><i class=\"far fa-clock\"></i> 0 \u043C\u0438\u043D.</span>\r\n                <span class=\"lesson-status\"><i class=\"far fa-edit\"></i> \u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"lesson-actions\">\r\n            <button type=\"button\" class=\"btn btn-small btn-light edit-lesson\" title=\"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C\">\r\n                <i class=\"fas fa-edit\"></i>\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-small btn-danger delete-lesson\" title=\"\u0423\u0434\u0430\u043B\u0438\u0442\u044C\">\r\n                <i class=\"fas fa-trash\"></i>\r\n            </button>\r\n        </div>\r\n    `;\r\n\r\n    lessonsContainer.appendChild(lessonItem);\r\n    \r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n    lessonItem.style.animation = 'slideIn 0.3s ease';\r\n    \r\n    showToast(`\u041D\u043E\u0432\u044B\u0439 \u0443\u0440\u043E\u043A \"${typeName}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D`, 'success', 3000);\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0434\u043B\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\r\n    initLessonItemEvents(lessonItem);\r\n}\r\n\r\nfunction addNewModule(title, description, type) {\r\n    const modulesContainer = document.querySelector('.modules-container');\r\n    if (!modulesContainer) {\r\n        console.warn('\u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u043C\u043E\u0434\u0443\u043B\u0435\u0439 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D');\r\n        return;\r\n    }\r\n\r\n    const moduleId = Date.now();\r\n    const moduleNumber = modulesContainer.children.length + 1;\r\n\r\n    let typeIcon, typeName;\r\n    switch (type) {\r\n        case 'practice':\r\n            typeIcon = 'fa-tasks';\r\n            typeName = '\u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439';\r\n            break;\r\n        case 'project':\r\n            typeIcon = 'fa-project-diagram';\r\n            typeName = '\u041F\u0440\u043E\u0435\u043A\u0442\u043D\u044B\u0439';\r\n            break;\r\n        case 'theory':\r\n        default:\r\n            typeIcon = 'fa-book';\r\n            typeName = '\u0422\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439';\r\n    }\r\n\r\n    const moduleItem = document.createElement('div');\r\n    moduleItem.className = 'module-item';\r\n    moduleItem.setAttribute('data-module-id', moduleId);\r\n    moduleItem.setAttribute('draggable', 'true');\r\n    \r\n    moduleItem.innerHTML = `\r\n        <div class=\"module-header\">\r\n            <div class=\"module-drag-handle\">\r\n                <i class=\"fas fa-grip-vertical\"></i>\r\n            </div>\r\n            <div class=\"module-info\">\r\n                <h3 class=\"module-title\">\u041C\u043E\u0434\u0443\u043B\u044C ${moduleNumber}: ${title}</h3>\r\n                <span class=\"module-type-badge\">\r\n                    <i class=\"fas ${typeIcon}\"></i> ${typeName}\r\n                </span>\r\n            </div>\r\n            <div class=\"module-actions\">\r\n                <button type=\"button\" class=\"btn btn-small btn-light add-lesson-btn\" title=\"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0440\u043E\u043A\">\r\n                    <i class=\"fas fa-plus\"></i> \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0440\u043E\u043A\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-small btn-danger delete-module\" title=\"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u043E\u0434\u0443\u043B\u044C\">\r\n                    <i class=\"fas fa-trash\"></i>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class=\"module-description\">\r\n            <p>${description || '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u044F \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0437\u0434\u0435\u0441\u044C'}</p>\r\n        </div>\r\n        <div class=\"lessons-container\">\r\n            <!-- \u0423\u0440\u043E\u043A\u0438 \u0431\u0443\u0434\u0443\u0442 \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C\u0441\u044F \u0441\u044E\u0434\u0430 -->\r\n        </div>\r\n    `;\r\n\r\n    modulesContainer.appendChild(moduleItem);\r\n    \r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n    moduleItem.style.animation = 'slideIn 0.3s ease';\r\n    \r\n    showToast(`\u041C\u043E\u0434\u0443\u043B\u044C \"${title}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D`, 'success', 3000);\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0434\u043B\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u043C\u043E\u0434\u0443\u043B\u044F\r\n    initModuleItemEvents(moduleItem);\r\n}\r\n\r\nfunction initLessonItemEvents(lessonItem) {\r\n    // \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u0430\r\n    const editBtn = lessonItem.querySelector('.edit-lesson');\r\n    if (editBtn) {\r\n        editBtn.addEventListener('click', function() {\r\n            const lessonId = lessonItem.getAttribute('data-lesson-id');\r\n            showToast(`\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u0430 ${lessonId}`, 'info', 3000);\r\n            // \u0417\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0443\u0440\u043E\u043A\u0430\r\n        });\r\n    }\r\n\r\n    // Drag and drop\r\n    lessonItem.addEventListener('dragstart', handleDragStart);\r\n    lessonItem.addEventListener('dragend', handleDragEnd);\r\n}\r\n\r\nfunction initModuleItemEvents(moduleItem) {\r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u0430 \u0432 \u043C\u043E\u0434\u0443\u043B\u044C\r\n    const addLessonBtn = moduleItem.querySelector('.add-lesson-btn');\r\n    if (addLessonBtn) {\r\n        addLessonBtn.addEventListener('click', function() {\r\n            // \u0417\u0434\u0435\u0441\u044C \u043C\u043E\u0436\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043B\u043E\u0433\u0438\u043A\u0443 \u0434\u043B\u044F \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0443\u0440\u043E\u043A\u0430 \u0432 \u043A\u043E\u043D\u043A\u0440\u0435\u0442\u043D\u044B\u0439 \u043C\u043E\u0434\u0443\u043B\u044C\r\n            showToast('\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0443\u0440\u043E\u043A\u0430 \u0432 \u043C\u043E\u0434\u0443\u043B\u044C', 'info', 3000);\r\n        });\r\n    }\r\n\r\n    // Drag and drop\r\n    moduleItem.addEventListener('dragstart', handleDragStart);\r\n    moduleItem.addEventListener('dragend', handleDragEnd);\r\n}\r\n\r\nfunction initDragAndDrop() {\r\n    const containers = document.querySelectorAll('.lessons-container, .modules-container');\r\n    \r\n    containers.forEach(container => {\r\n        container.addEventListener('dragover', handleDragOver);\r\n        container.addEventListener('drop', handleDrop);\r\n    });\r\n}\r\n\r\nfunction handleDragStart(e) {\r\n    e.target.classList.add('dragging');\r\n    e.dataTransfer.setData('text/plain', e.target.getAttribute('data-lesson-id') || e.target.getAttribute('data-module-id'));\r\n}\r\n\r\nfunction handleDragEnd(e) {\r\n    e.target.classList.remove('dragging');\r\n}\r\n\r\nfunction handleDragOver(e) {\r\n    e.preventDefault();\r\n    const draggingElement = document.querySelector('.dragging');\r\n    if (!draggingElement) return;\r\n\r\n    const afterElement = getDragAfterElement(e.currentTarget, e.clientY);\r\n    if (afterElement) {\r\n        e.currentTarget.insertBefore(draggingElement, afterElement);\r\n    } else {\r\n        e.currentTarget.appendChild(draggingElement);\r\n    }\r\n}\r\n\r\nfunction handleDrop(e) {\r\n    e.preventDefault();\r\n    updateLessonNumbers();\r\n    updateModuleNumbers();\r\n    showToast('\u041F\u043E\u0440\u044F\u0434\u043E\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D', 'success', 2000);\r\n}\r\n\r\nfunction getDragAfterElement(container, y) {\r\n    const draggableElements = [...container.querySelectorAll('.lesson-item:not(.dragging), .module-item:not(.dragging)')];\r\n    \r\n    return draggableElements.reduce((closest, child) => {\r\n        const box = child.getBoundingClientRect();\r\n        const offset = y - box.top - box.height / 2;\r\n        \r\n        if (offset < 0 && offset > closest.offset) {\r\n            return { offset: offset, element: child };\r\n        } else {\r\n            return closest;\r\n        }\r\n    }, { offset: Number.NEGATIVE_INFINITY }).element;\r\n}\r\n\r\nfunction updateLessonNumbers() {\r\n    const lessons = document.querySelectorAll('.lesson-item');\r\n    lessons.forEach((lesson, index) => {\r\n        const titleElement = lesson.querySelector('.lesson-title');\r\n        if (titleElement) {\r\n            const currentText = titleElement.textContent;\r\n            const newText = currentText.replace(/\u0423\u0440\u043E\u043A \\d+:/, `\u0423\u0440\u043E\u043A ${index + 1}:`);\r\n            titleElement.textContent = newText;\r\n        }\r\n    });\r\n}\r\n\r\nfunction updateModuleNumbers() {\r\n    const modules = document.querySelectorAll('.module-item');\r\n    modules.forEach((module, index) => {\r\n        const titleElement = module.querySelector('.module-title');\r\n        if (titleElement) {\r\n            const currentText = titleElement.textContent;\r\n            const newText = currentText.replace(/\u041C\u043E\u0434\u0443\u043B\u044C \\d+:/, `\u041C\u043E\u0434\u0443\u043B\u044C ${index + 1}:`);\r\n            titleElement.textContent = newText;\r\n        }\r\n    });\r\n}\r\n\r\nfunction addManagementStyles() {\r\n    const styles = `\r\n        /* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0445 \u043E\u043A\u043E\u043D */\r\n        .modal {\r\n            display: none;\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.5);\r\n            z-index: 10000;\r\n            align-items: center;\r\n            justify-content: center;\r\n            opacity: 0;\r\n            transition: opacity 0.3s ease;\r\n        }\r\n        \r\n        .modal.show {\r\n            opacity: 1;\r\n        }\r\n        \r\n        .modal-content {\r\n            background: white;\r\n            border-radius: 12px;\r\n            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\r\n            width: 90%;\r\n            max-width: 600px;\r\n            max-height: 90vh;\r\n            overflow: hidden;\r\n            transform: translateY(-50px);\r\n            transition: transform 0.3s ease;\r\n        }\r\n        \r\n        .modal.show .modal-content {\r\n            transform: translateY(0);\r\n        }\r\n        \r\n        .modal-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            padding: 20px 25px;\r\n            border-bottom: 1px solid #eee;\r\n        }\r\n        \r\n        .modal-header h3 {\r\n            margin: 0;\r\n            color: var(--primary);\r\n        }\r\n        \r\n        .modal-close {\r\n            background: none;\r\n            border: none;\r\n            font-size: 1.2em;\r\n            color: #666;\r\n            cursor: pointer;\r\n            padding: 5px;\r\n            border-radius: 4px;\r\n            transition: all 0.2s;\r\n        }\r\n        \r\n        .modal-close:hover {\r\n            background: #f5f5f5;\r\n            color: #333;\r\n        }\r\n        \r\n        .modal-body {\r\n            padding: 25px;\r\n            max-height: 60vh;\r\n            overflow-y: auto;\r\n        }\r\n        \r\n        .modal-footer {\r\n            display: flex;\r\n            justify-content: flex-end;\r\n            gap: 15px;\r\n            padding: 20px 25px;\r\n            border-top: 1px solid #eee;\r\n        }\r\n        \r\n        /* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 \u0442\u0438\u043F\u0430 \u0443\u0440\u043E\u043A\u0430 */\r\n        .lesson-type-options {\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 15px;\r\n        }\r\n        \r\n        .lesson-type-option {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 20px;\r\n            border: 2px solid #e0e0e0;\r\n            border-radius: 8px;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n            position: relative;\r\n        }\r\n        \r\n        .lesson-type-option:hover {\r\n            border-color: var(--accent);\r\n            transform: translateY(-2px);\r\n        }\r\n        \r\n        .lesson-type-option.selected {\r\n            border-color: var(--accent);\r\n            background-color: rgba(74, 144, 226, 0.05);\r\n        }\r\n        \r\n        .type-icon {\r\n            margin-right: 15px;\r\n            font-size: 2em;\r\n            color: var(--accent);\r\n            flex-shrink: 0;\r\n        }\r\n        \r\n        .type-info {\r\n            flex: 1;\r\n        }\r\n        \r\n        .type-info h4 {\r\n            margin: 0 0 5px 0;\r\n            color: var(--primary);\r\n        }\r\n        \r\n        .type-info p {\r\n            margin: 0;\r\n            color: #666;\r\n            font-size: 0.9em;\r\n        }\r\n        \r\n        .type-check {\r\n            color: var(--accent);\r\n            font-size: 1.2em;\r\n            opacity: 0;\r\n            transition: opacity 0.3s;\r\n        }\r\n        \r\n        .lesson-type-option.selected .type-check {\r\n            opacity: 1;\r\n        }\r\n        \r\n        /* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u0432\u044B\u0431\u043E\u0440\u0430 \u0442\u0438\u043F\u0430 \u043C\u043E\u0434\u0443\u043B\u044F */\r\n        .radio-options {\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 10px;\r\n        }\r\n        \r\n        .radio-option {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 15px;\r\n            border: 2px solid #e0e0e0;\r\n            border-radius: 8px;\r\n            cursor: pointer;\r\n            transition: all 0.3s;\r\n            position: relative;\r\n        }\r\n        \r\n        .radio-option:hover {\r\n            border-color: var(--accent);\r\n        }\r\n        \r\n        .radio-option input[type=\"radio\"] {\r\n            position: absolute;\r\n            opacity: 0;\r\n        }\r\n        \r\n        .radio-checkmark {\r\n            width: 20px;\r\n            height: 20px;\r\n            border: 2px solid #ddd;\r\n            border-radius: 50%;\r\n            margin-right: 15px;\r\n            position: relative;\r\n            flex-shrink: 0;\r\n            transition: all 0.3s;\r\n        }\r\n        \r\n        .radio-option input[type=\"radio\"]:checked + .radio-checkmark {\r\n            border-color: var(--accent);\r\n            background-color: var(--accent);\r\n        }\r\n        \r\n        .radio-option input[type=\"radio\"]:checked + .radio-checkmark::after {\r\n            content: '';\r\n            position: absolute;\r\n            top: 4px;\r\n            left: 4px;\r\n            width: 8px;\r\n            height: 8px;\r\n            background: white;\r\n            border-radius: 50%;\r\n        }\r\n        \r\n        .radio-label {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 10px;\r\n            font-weight: 500;\r\n            color: var(--primary);\r\n        }\r\n        \r\n        /* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u0443\u0440\u043E\u043A\u043E\u0432 \u0438 \u043C\u043E\u0434\u0443\u043B\u0435\u0439 */\r\n        .lesson-item, .module-item {\r\n            border: 1px solid #e0e0e0;\r\n            border-radius: 8px;\r\n            margin-bottom: 15px;\r\n            background: white;\r\n            transition: all 0.3s;\r\n        }\r\n        \r\n        .lesson-item:hover, .module-item:hover {\r\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n        }\r\n        \r\n        .lesson-item {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 15px;\r\n            gap: 15px;\r\n        }\r\n        \r\n        .lesson-lecture {\r\n            border-left: 4px solid #4a90e2;\r\n        }\r\n        \r\n        .lesson-test {\r\n            border-left: 4px solid #f39c12;\r\n        }\r\n        \r\n        .lesson-practice {\r\n            border-left: 4px solid #27ae60;\r\n        }\r\n        \r\n        .lesson-drag-handle {\r\n            color: #ccc;\r\n            cursor: grab;\r\n            padding: 5px;\r\n        }\r\n        \r\n        .lesson-drag-handle:active {\r\n            cursor: grabbing;\r\n        }\r\n        \r\n        .lesson-icon {\r\n            font-size: 1.5em;\r\n            color: var(--accent);\r\n            flex-shrink: 0;\r\n        }\r\n        \r\n        .lesson-content {\r\n            flex: 1;\r\n        }\r\n        \r\n        .lesson-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 5px;\r\n        }\r\n        \r\n        .lesson-title {\r\n            margin: 0;\r\n            color: var(--primary);\r\n            font-size: 1.1em;\r\n        }\r\n        \r\n        .lesson-type-badge {\r\n            background: var(--accent);\r\n            color: white;\r\n            padding: 4px 8px;\r\n            border-radius: 4px;\r\n            font-size: 0.8em;\r\n            font-weight: 500;\r\n        }\r\n        \r\n        .lesson-test .lesson-type-badge {\r\n            background: #f39c12;\r\n        }\r\n        \r\n        .lesson-practice .lesson-type-badge {\r\n            background: #27ae60;\r\n        }\r\n        \r\n        .lesson-description {\r\n            margin: 0 0 10px 0;\r\n            color: #666;\r\n            font-size: 0.9em;\r\n        }\r\n        \r\n        .lesson-meta {\r\n            display: flex;\r\n            gap: 15px;\r\n            font-size: 0.8em;\r\n            color: #888;\r\n        }\r\n        \r\n        .lesson-actions {\r\n            display: flex;\r\n            gap: 5px;\r\n            flex-shrink: 0;\r\n        }\r\n        \r\n        .module-item {\r\n            padding: 0;\r\n            overflow: hidden;\r\n        }\r\n        \r\n        .module-header {\r\n            display: flex;\r\n            align-items: center;\r\n            padding: 20px;\r\n            background: #f8f9fa;\r\n            border-bottom: 1px solid #e0e0e0;\r\n        }\r\n        \r\n        .module-drag-handle {\r\n            color: #ccc;\r\n            cursor: grab;\r\n            padding: 5px;\r\n            margin-right: 15px;\r\n        }\r\n        \r\n        .module-info {\r\n            flex: 1;\r\n        }\r\n        \r\n        .module-title {\r\n            margin: 0 0 5px 0;\r\n            color: var(--primary);\r\n        }\r\n        \r\n        .module-type-badge {\r\n            background: #e9ecef;\r\n            color: #495057;\r\n            padding: 4px 8px;\r\n            border-radius: 4px;\r\n            font-size: 0.8em;\r\n            display: inline-flex;\r\n            align-items: center;\r\n            gap: 5px;\r\n        }\r\n        \r\n        .module-actions {\r\n            display: flex;\r\n            gap: 10px;\r\n        }\r\n        \r\n        .module-description {\r\n            padding: 15px 20px;\r\n            border-bottom: 1px solid #e0e0e0;\r\n        }\r\n        \r\n        .module-description p {\r\n            margin: 0;\r\n            color: #666;\r\n        }\r\n        \r\n        .lessons-container {\r\n            padding: 20px;\r\n            min-height: 100px;\r\n        }\r\n        \r\n        .dragging {\r\n            opacity: 0.5;\r\n            transform: rotate(5deg);\r\n        }\r\n        \r\n        /* \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438 */\r\n        @keyframes slideIn {\r\n            from {\r\n                opacity: 0;\r\n                transform: translateY(-20px);\r\n            }\r\n            to {\r\n                opacity: 1;\r\n                transform: translateY(0);\r\n            }\r\n        }\r\n        \r\n        @keyframes slideOut {\r\n            from {\r\n                opacity: 1;\r\n                transform: translateX(0);\r\n            }\r\n            to {\r\n                opacity: 0;\r\n                transform: translateX(-100%);\r\n            }\r\n        }\r\n        \r\n        /* \u0410\u0434\u0430\u043F\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C */\r\n        @media (max-width: 768px) {\r\n            .modal-content {\r\n                width: 95%;\r\n                margin: 20px;\r\n            }\r\n            \r\n            .lesson-item {\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n            }\r\n            \r\n            .lesson-actions {\r\n                align-self: flex-end;\r\n            }\r\n            \r\n            .module-header {\r\n                flex-direction: column;\r\n                align-items: flex-start;\r\n                gap: 15px;\r\n            }\r\n            \r\n            .module-actions {\r\n                align-self: stretch;\r\n                justify-content: space-between;\r\n            }\r\n        }\r\n    `;\r\n\r\n    if (!document.querySelector('#management-styles')) {\r\n        const styleSheet = document.createElement('style');\r\n        styleSheet.id = 'management-styles';\r\n        styleSheet.textContent = styles;\r\n        document.head.appendChild(styleSheet);\r\n    }\r\n}\r\n\r\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u043F\u043E\u043A\u0430\u0437\u0430 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 (\u0435\u0441\u043B\u0438 \u043D\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0438\u0437 \u0434\u0440\u0443\u0433\u043E\u0433\u043E \u043C\u043E\u0434\u0443\u043B\u044F)\r\nfunction showToast(message, type = 'info', duration = 4000) {\r\n    // \u0420\u0435\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F showToast \u0438\u0437 course-editor.js\r\n    console.log(`Toast [${type}]: ${message}`);\r\n    // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u0432\u044B\u0437\u043E\u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0439 \u0444\u0443\u043D\u043A\u0446\u0438\u0438 showToast\r\n}", "// js/modules/course-editor.js\n\n// \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 PDF.js worker\nif (typeof pdfjsLib !== 'undefined') {\n    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';\n}\n\nexport function initCreateCourseDetailPage() {\n    initTabs();\n    initVideoOptions();\n    initEditor();\n    initImportFunctionality();\n    initPreview();\n    initFormSubmission();\n    initMaterialsPanel();\n    addEditorStyles();\n    initToastSystem();\n}\n\nfunction initToastSystem() {\n    if (!document.getElementById('toast-container')) {\n        const toastContainer = document.createElement('div');\n        toastContainer.id = 'toast-container';\n        toastContainer.className = 'toast-container';\n        document.body.appendChild(toastContainer);\n    }\n}\n\nfunction showToast(message, type = 'info', duration = 4000) {\n    const toastContainer = document.getElementById('toast-container');\n    if (!toastContainer) return;\n\n    const toast = document.createElement('div');\n    toast.className = `toast toast-${type}`;\n    \n    const icons = {\n        success: 'fas fa-check-circle',\n        error: 'fas fa-exclamation-circle',\n        warning: 'fas fa-exclamation-triangle',\n        info: 'fas fa-info-circle'\n    };\n\n    toast.innerHTML = `\n        <div class=\"toast-content\">\n            <div class=\"toast-icon\">\n                <i class=\"${icons[type] || icons.info}\"></i>\n            </div>\n            <div class=\"toast-message\">${message}</div>\n            <button class=\"toast-close\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        </div>\n        <div class=\"toast-progress\"></div>\n    `;\n\n    toastContainer.appendChild(toast);\n\n    setTimeout(() => {\n        toast.classList.add('show');\n    }, 10);\n\n    const closeBtn = toast.querySelector('.toast-close');\n    closeBtn.addEventListener('click', () => {\n        hideToast(toast);\n    });\n\n    if (duration > 0) {\n        setTimeout(() => {\n            hideToast(toast);\n        }, duration);\n    }\n\n    const progressBar = toast.querySelector('.toast-progress');\n    if (progressBar) {\n        progressBar.style.animation = `progress ${duration}ms linear`;\n    }\n\n    return toast;\n}\n\nfunction hideToast(toast) {\n    toast.classList.remove('show');\n    toast.classList.add('hide');\n    \n    setTimeout(() => {\n        if (toast.parentNode) {\n            toast.parentNode.removeChild(toast);\n        }\n    }, 300);\n}\n\nfunction initTabs() {\n    const contentTabs = document.querySelectorAll('.content-tab');\n    const contentPanels = document.querySelectorAll('.content-panel');\n    \n    contentTabs.forEach(tab => {\n        tab.addEventListener('click', function() {\n            const tabId = this.getAttribute('data-tab');\n            \n            contentTabs.forEach(t => t.classList.remove('active'));\n            contentPanels.forEach(p => p.classList.remove('active'));\n            \n            this.classList.add('active');\n            document.getElementById(`${tabId}-panel`).classList.add('active');\n        });\n    });\n}\n\nfunction initVideoOptions() {\n    const videoOptions = document.querySelectorAll('.video-option');\n    const videoTypeInput = document.getElementById('video-type');\n    const uploadSection = document.getElementById('upload-section');\n    const youtubeSection = document.getElementById('youtube-section');\n    \n    // \u0412\u0438\u0434\u0435\u043E \u0442\u0435\u043F\u0435\u0440\u044C \u043D\u0435\u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E - \u0443\u0431\u0438\u0440\u0430\u0435\u043C \u0432\u0441\u0435 required \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044B\n    const videoInput = document.getElementById('lecture-video');\n    const youtubeInput = document.getElementById('youtube-url');\n    \n    if (videoInput) videoInput.removeAttribute('required');\n    if (youtubeInput) youtubeInput.removeAttribute('required');\n    if (videoTypeInput) videoTypeInput.removeAttribute('required');\n    \n    videoOptions.forEach(option => {\n        option.addEventListener('click', function() {\n            videoOptions.forEach(opt => opt.classList.remove('active'));\n            this.classList.add('active');\n            \n            const type = this.getAttribute('data-type');\n            if (videoTypeInput) videoTypeInput.value = type;\n            \n            if (type === 'upload') {\n                if (uploadSection) uploadSection.style.display = 'block';\n                if (youtubeSection) youtubeSection.style.display = 'none';\n            } else {\n                if (uploadSection) uploadSection.style.display = 'none';\n                if (youtubeSection) youtubeSection.style.display = 'block';\n            }\n        });\n    });\n}\n\nfunction initEditor() {\n    const editorButtons = document.querySelectorAll('.editor-button');\n    const editorContent = document.getElementById('lecture-content');\n    const lectureTextInput = document.getElementById('lecture-text');\n    \n    if (!editorContent || !lectureTextInput) return;\n\n    let savedSelection = null;\n    let linkModal, imageModal;\n\n    function createModals() {\n        linkModal = document.createElement('div');\n        linkModal.className = 'editor-modal';\n        linkModal.innerHTML = `\n            <div class=\"modal-content\">\n                <h3>\u0412\u0441\u0442\u0430\u0432\u043A\u0430 \u0441\u0441\u044B\u043B\u043A\u0438</h3>\n                <div class=\"form-group\">\n                    <label for=\"link-url\">URL \u0441\u0441\u044B\u043B\u043A\u0438:</label>\n                    <input type=\"url\" id=\"link-url\" class=\"form-control\" placeholder=\"https://example.com\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"link-text\">\u0422\u0435\u043A\u0441\u0442 \u0441\u0441\u044B\u043B\u043A\u0438:</label>\n                    <input type=\"text\" id=\"link-text\" class=\"form-control\" placeholder=\"\u0422\u0435\u043A\u0441\u0442 \u0441\u0441\u044B\u043B\u043A\u0438\">\n                </div>\n                <div class=\"modal-actions\">\n                    <button type=\"button\" class=\"btn btn-light\" id=\"link-cancel\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n                    <button type=\"button\" class=\"btn btn-success\" id=\"link-insert\">\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044C</button>\n                </div>\n            </div>\n        `;\n        \n        imageModal = document.createElement('div');\n        imageModal.className = 'editor-modal';\n        imageModal.innerHTML = `\n            <div class=\"modal-content\">\n                <h3>\u0412\u0441\u0442\u0430\u0432\u043A\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F</h3>\n                <div class=\"form-group\">\n                    <label>\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0441\u0442\u043E\u0447\u043D\u0438\u043A:</label>\n                    <div class=\"image-source-tabs\">\n                        <button type=\"button\" class=\"source-tab active\" data-source=\"url\">\u0418\u0437 URL</button>\n                        <button type=\"button\" class=\"source-tab\" data-source=\"upload\">\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u0430\u0439\u043B</button>\n                    </div>\n                </div>\n                <div class=\"image-source-content\">\n                    <div class=\"source-panel active\" id=\"url-panel\">\n                        <div class=\"form-group\">\n                            <label for=\"image-url\">URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F:</label>\n                            <input type=\"url\" id=\"image-url\" class=\"form-control\" placeholder=\"https://example.com/image.jpg\">\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"image-alt\">\u0410\u043B\u044C\u0442\u0435\u0440\u043D\u0430\u0442\u0438\u0432\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442:</label>\n                            <input type=\"text\" id=\"image-alt\" class=\"form-control\" placeholder=\"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\">\n                        </div>\n                    </div>\n                    <div class=\"source-panel\" id=\"upload-panel\">\n                        <div class=\"form-group\">\n                            <label>\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B:</label>\n                            <div class=\"file-upload\">\n                                <input type=\"file\" id=\"image-file\" class=\"file-upload-input\" accept=\"image/*\">\n                                <label for=\"image-file\" class=\"file-upload-label\">\n                                    <div>\n                                        <i class=\"fas fa-upload\"></i>\n                                        <span>\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435</span>\n                                        <span style=\"font-size: 0.8rem;\">\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F JPG, PNG, GIF, WebP</span>\n                                    </div>\n                                </label>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"upload-image-alt\">\u0410\u043B\u044C\u0442\u0435\u0440\u043D\u0430\u0442\u0438\u0432\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442:</label>\n                            <input type=\"text\" id=\"upload-image-alt\" class=\"form-control\" placeholder=\"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"modal-actions\">\n                    <button type=\"button\" class=\"btn btn-light\" id=\"image-cancel\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n                    <button type=\"button\" class=\"btn btn-success\" id=\"image-insert\">\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044C</button>\n                </div>\n            </div>\n        `;\n        \n        document.body.appendChild(linkModal);\n        document.body.appendChild(imageModal);\n        \n        setupModalEvents();\n    }\n\n    function setupModalEvents() {\n        document.addEventListener('click', function(e) {\n            if (e.target === linkModal) hideModal(linkModal);\n            if (e.target === imageModal) hideModal(imageModal);\n        });\n        \n        const linkCancelBtn = document.getElementById('link-cancel');\n        const linkInsertBtn = document.getElementById('link-insert');\n        if (linkCancelBtn && linkInsertBtn) {\n            linkCancelBtn.addEventListener('click', () => hideModal(linkModal));\n            linkInsertBtn.addEventListener('click', insertLink);\n        }\n        \n        const imageCancelBtn = document.getElementById('image-cancel');\n        const imageInsertBtn = document.getElementById('image-insert');\n        if (imageCancelBtn && imageInsertBtn) {\n            imageCancelBtn.addEventListener('click', () => hideModal(imageModal));\n            imageInsertBtn.addEventListener('click', insertImage);\n        }\n        \n        const sourceTabs = imageModal.querySelectorAll('.source-tab');\n        sourceTabs.forEach(tab => {\n            tab.addEventListener('click', function() {\n                const source = this.getAttribute('data-source');\n                \n                sourceTabs.forEach(t => t.classList.remove('active'));\n                imageModal.querySelectorAll('.source-panel').forEach(p => p.classList.remove('active'));\n                \n                this.classList.add('active');\n                const sourcePanel = document.getElementById(`${source}-panel`);\n                if (sourcePanel) sourcePanel.classList.add('active');\n            });\n        });\n        \n        const imageFileInput = document.getElementById('image-file');\n        if (imageFileInput) {\n            imageFileInput.addEventListener('change', function(e) {\n                const file = e.target.files[0];\n                if (file) {\n                    const reader = new FileReader();\n                    reader.onload = function(e) {\n                        console.log('\u0424\u0430\u0439\u043B \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D:', file.name);\n                    };\n                    reader.readAsDataURL(file);\n                }\n            });\n        }\n    }\n\n    function executeEditorCommand(command) {\n        saveSelection();\n        \n        switch(command) {\n            case 'bold':\n            case 'italic':\n            case 'underline':\n            case 'insertUnorderedList':\n            case 'insertOrderedList':\n                document.execCommand(command, false, null);\n                break;\n                \n            case 'createLink':\n                showLinkModal();\n                break;\n                \n            case 'insertImage':\n                showImageModal();\n                break;\n                \n            case 'code':\n                insertCodeBlock();\n                break;\n        }\n        \n        editorContent.focus();\n        updateHiddenField();\n    }\n\n    function showLinkModal() {\n        const selection = getSelectionText();\n        const linkTextInput = document.getElementById('link-text');\n        if (linkTextInput) linkTextInput.value = selection || '';\n        showModal(linkModal);\n    }\n\n    function showImageModal() {\n        showModal(imageModal);\n    }\n\n    function insertLink() {\n        const linkUrlInput = document.getElementById('link-url');\n        const linkTextInput = document.getElementById('link-text');\n        \n        if (!linkUrlInput || !linkTextInput) return;\n        \n        const url = linkUrlInput.value.trim();\n        const text = linkTextInput.value.trim();\n        \n        if (!url) {\n            showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0441\u0441\u044B\u043B\u043A\u0438', 'error', 4000);\n            return;\n        }\n        \n        restoreSelection();\n        \n        if (text) {\n            document.execCommand('createLink', false, url);\n        } else {\n            document.execCommand('insertHTML', false, `<a href=\"${url}\" target=\"_blank\">${url}</a>`);\n        }\n        \n        hideModal(linkModal);\n        updateHiddenField();\n    }\n\n    function insertImage() {\n        const urlPanel = document.getElementById('url-panel');\n        const uploadPanel = document.getElementById('upload-panel');\n        \n        let imageUrl, altText;\n        \n        if (urlPanel && urlPanel.classList.contains('active')) {\n            const imageUrlInput = document.getElementById('image-url');\n            const imageAltInput = document.getElementById('image-alt');\n            if (imageUrlInput && imageAltInput) {\n                imageUrl = imageUrlInput.value.trim();\n                altText = imageAltInput.value.trim();\n            }\n        } else {\n            const fileInput = document.getElementById('image-file');\n            if (!fileInput || !fileInput.files[0]) {\n                showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F', 'error', 4000);\n                return;\n            }\n            \n            const file = fileInput.files[0];\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                imageUrl = e.target.result;\n                const uploadImageAltInput = document.getElementById('upload-image-alt');\n                if (uploadImageAltInput) {\n                    altText = uploadImageAltInput.value.trim();\n                }\n                insertImageElement(imageUrl, altText);\n            };\n            reader.readAsDataURL(file);\n            return;\n        }\n        \n        if (!imageUrl) {\n            showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F', 'error', 4000);\n            return;\n        }\n        \n        insertImageElement(imageUrl, altText);\n    }\n\n    function insertImageElement(url, alt) {\n        restoreSelection();\n        \n        const img = document.createElement('img');\n        img.src = url;\n        img.alt = alt || '\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435';\n        img.style.maxWidth = '100%';\n        img.style.height = 'auto';\n        \n        document.execCommand('insertHTML', false, img.outerHTML);\n        \n        hideModal(imageModal);\n        updateHiddenField();\n    }\n\n    function insertCodeBlock() {\n        restoreSelection();\n        \n        const selection = getSelectionText();\n        if (selection) {\n            document.execCommand('formatBlock', false, '<pre>');\n            const pre = editorContent.querySelector('pre:last-child');\n            if (pre) {\n                pre.innerHTML = `<code>${selection}</code>`;\n            }\n        } else {\n            document.execCommand('insertHTML', false, '<pre><code>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434 \u0437\u0434\u0435\u0441\u044C...</code></pre>');\n        }\n        \n        updateHiddenField();\n    }\n\n    function saveSelection() {\n        const sel = window.getSelection();\n        if (sel.rangeCount > 0) {\n            savedSelection = sel.getRangeAt(0);\n        }\n    }\n\n    function restoreSelection() {\n        if (savedSelection) {\n            const sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(savedSelection);\n        }\n    }\n\n    function getSelectionText() {\n        const sel = window.getSelection();\n        return sel.toString();\n    }\n\n    function showModal(modal) {\n        if (modal) {\n            modal.style.display = 'flex';\n            if (modal === linkModal) {\n                const linkUrlInput = document.getElementById('link-url');\n                if (linkUrlInput) linkUrlInput.value = '';\n                if (!getSelectionText()) {\n                    const linkTextInput = document.getElementById('link-text');\n                    if (linkTextInput) linkTextInput.value = '';\n                }\n            } else if (modal === imageModal) {\n                const imageUrlInput = document.getElementById('image-url');\n                const imageAltInput = document.getElementById('image-alt');\n                const imageFileInput = document.getElementById('image-file');\n                const uploadImageAltInput = document.getElementById('upload-image-alt');\n                \n                if (imageUrlInput) imageUrlInput.value = '';\n                if (imageAltInput) imageAltInput.value = '';\n                if (imageFileInput) imageFileInput.value = '';\n                if (uploadImageAltInput) uploadImageAltInput.value = '';\n            }\n        }\n    }\n\n    function hideModal(modal) {\n        if (modal) modal.style.display = 'none';\n    }\n\n    function updateHiddenField() {\n        lectureTextInput.value = editorContent.innerHTML;\n    }\n\n    function cleanPastedContent() {\n        const elements = editorContent.querySelectorAll('*');\n        elements.forEach(el => {\n            el.removeAttribute('style');\n            el.removeAttribute('class');\n            ['id', 'dir', 'lang', 'xmlns'].forEach(attr => {\n                el.removeAttribute(attr);\n            });\n        });\n        \n        updateHiddenField();\n    }\n\n    createModals();\n    \n    editorButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            const command = this.getAttribute('data-command');\n            executeEditorCommand(command);\n        });\n    });\n    \n    editorContent.addEventListener('input', function() {\n        updateHiddenField();\n    });\n    \n    editorContent.addEventListener('paste', function(e) {\n        setTimeout(() => {\n            cleanPastedContent();\n        }, 10);\n    });\n    \n    updateHiddenField();\n}\n\nfunction initImportFunctionality() {\n    const importWordBtn = document.getElementById('import-word-btn');\n    const wordFileInput = document.getElementById('word-file-input');\n    const importPdfBtn = document.getElementById('import-pdf-btn');\n    const pdfFileInput = document.getElementById('pdf-file-input');\n    const importStatus = document.getElementById('import-status');\n    const progressBar = document.getElementById('import-progress-bar');\n    const progress = document.getElementById('import-progress');\n    const editorContent = document.getElementById('lecture-content');\n    const lectureTextInput = document.getElementById('lecture-text');\n\n    if (!importWordBtn || !importPdfBtn) return;\n\n    importWordBtn.addEventListener('click', function() {\n        if (wordFileInput) wordFileInput.click();\n    });\n\n    importPdfBtn.addEventListener('click', function() {\n        if (pdfFileInput) pdfFileInput.click();\n    });\n\n    if (wordFileInput) {\n        wordFileInput.addEventListener('change', handleWordImport);\n    }\n\n    if (pdfFileInput) {\n        pdfFileInput.addEventListener('change', handlePdfImport);\n    }\n\n    function handleWordImport(e) {\n        const file = e.target.files[0];\n        if (!file) return;\n\n        if (!file.name.match(/\\.(docx|doc)$/)) {\n            showImportStatus('error', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0444\u043E\u0440\u043C\u0430\u0442\u0430 .docx \u0438\u043B\u0438 .doc');\n            return;\n        }\n\n        showImportStatus('info', '\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 Word \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430...');\n        if (progressBar) progressBar.style.display = 'block';\n        if (progress) progress.style.width = '30%';\n\n        if (typeof mammoth !== 'undefined') {\n            const readFileAsArrayBuffer = (file) => {\n                return new Promise((resolve, reject) => {\n                    const reader = new FileReader();\n                    reader.onload = function(e) {\n                        resolve(e.target.result);\n                    };\n                    reader.onerror = function(e) {\n                        reject(e);\n                    };\n                    reader.readAsArrayBuffer(file);\n                });\n            };\n\n            readFileAsArrayBuffer(file)\n                .then(arrayBuffer => mammoth.convertToHtml({arrayBuffer}))\n                .then(function(result) {\n                    const html = result.value;\n                    if (editorContent) editorContent.innerHTML = html;\n                    if (lectureTextInput) lectureTextInput.value = html;\n                    \n                    if (progress) progress.style.width = '100%';\n                    setTimeout(() => {\n                        if (progressBar) progressBar.style.display = 'none';\n                        showImportStatus('success', 'Word \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D!');\n                    }, 500);\n                })\n                .catch(function(error) {\n                    console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u043C\u043F\u043E\u0440\u0442\u0435 Word \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430:', error);\n                    if (progressBar) progressBar.style.display = 'none';\n                    showImportStatus('error', '\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u043C\u043F\u043E\u0440\u0442\u0435 Word \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.');\n                });\n        } else {\n            showImportStatus('error', '\u0411\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0430 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 Word \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430');\n        }\n\n        e.target.value = '';\n    }\n\n    function handlePdfImport(e) {\n        const file = e.target.files[0];\n        if (!file) return;\n\n        if (!file.name.match(/\\.pdf$/)) {\n            showImportStatus('error', '\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0444\u043E\u0440\u043C\u0430\u0442\u0430 .pdf');\n            return;\n        }\n\n        showImportStatus('info', '\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 PDF \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430...');\n        if (progressBar) progressBar.style.display = 'block';\n        if (progress) progress.style.width = '10%';\n\n        const fileReader = new FileReader();\n        \n        fileReader.onload = function() {\n            const typedarray = new Uint8Array(this.result);\n            \n            if (typeof pdfjsLib !== 'undefined') {\n                pdfjsLib.getDocument(typedarray).promise.then(function(pdf) {\n                    let totalPages = pdf.numPages;\n                    let pagesProcessed = 0;\n                    \n                    function extractPageText(pageNum) {\n                        return pdf.getPage(pageNum).then(function(page) {\n                            return page.getTextContent().then(function(textContentObj) {\n                                let pageText = '';\n                                textContentObj.items.forEach(function(textItem) {\n                                    pageText += textItem.str + ' ';\n                                });\n                                return pageText;\n                            });\n                        });\n                    }\n                    \n                    let pagePromises = [];\n                    for (let i = 1; i <= totalPages; i++) {\n                        pagePromises.push(extractPageText(i));\n                    }\n                    \n                    Promise.all(pagePromises).then(function(pagesText) {\n                        const textContent = pagesText.join('\\n\\n');\n                        const formattedText = formatPdfText(textContent);\n                        \n                        if (editorContent) editorContent.innerHTML = formattedText;\n                        if (lectureTextInput) lectureTextInput.value = formattedText;\n                        \n                        if (progress) progress.style.width = '100%';\n                        setTimeout(() => {\n                            if (progressBar) progressBar.style.display = 'none';\n                            showImportStatus('success', `PDF \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D! \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043E ${totalPages} \u0441\u0442\u0440\u0430\u043D\u0438\u0446.`);\n                        }, 500);\n                    });\n                    \n                    const updateProgress = function() {\n                        pagesProcessed++;\n                        const progressPercent = 10 + (pagesProcessed / totalPages) * 90;\n                        if (progress) progress.style.width = `${progressPercent}%`;\n                    };\n                    \n                    pagePromises.forEach(promise => {\n                        promise.then(updateProgress);\n                    });\n                    \n                }).catch(function(error) {\n                    console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0435 PDF:', error);\n                    if (progressBar) progressBar.style.display = 'none';\n                    showImportStatus('error', '\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u043C\u043F\u043E\u0440\u0442\u0435 PDF \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.');\n                });\n            } else {\n                showImportStatus('error', '\u0411\u0438\u0431\u043B\u0438\u043E\u0442\u0435\u043A\u0430 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 PDF \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430');\n            }\n        };\n        \n        fileReader.readAsArrayBuffer(file);\n        e.target.value = '';\n    }\n\n    function showImportStatus(type, message) {\n        if (importStatus) {\n            importStatus.textContent = message;\n            importStatus.className = 'import-status ' + type;\n        }\n    }\n\n    function formatPdfText(text) {\n        let lines = text.split('\\n');\n        let formattedLines = [];\n        \n        for (let i = 0; i < lines.length; i++) {\n            let line = lines[i].trim();\n            if (!line) continue;\n            \n            if (line.length < 100 && \n                line === line.toUpperCase() && \n                !line.endsWith('.') && \n                !line.endsWith(',') && \n                !line.match(/\\d/)) {\n                formattedLines.push(`<h3>${line}</h3>`);\n            } else if (line.length < 150 && \n                     line[0] === line[0].toUpperCase() && \n                     !line.endsWith('.') && \n                     !line.endsWith(',')) {\n                formattedLines.push(`<h4>${line}</h4>`);\n            } else {\n                let sentences = line.split('. ');\n                for (let j = 0; j < sentences.length; j++) {\n                    let sentence = sentences[j].trim();\n                    if (sentence) {\n                        if (!sentence.endsWith('.') && j < sentences.length - 1) {\n                            sentence += '.';\n                        }\n                        formattedLines.push(`<p>${sentence}</p>`);\n                    }\n                }\n            }\n        }\n        \n        return formattedLines.join('\\n');\n    }\n}\n\nfunction initPreview() {\n    const titleInput = document.getElementById('lecture-title');\n    const descInput = document.getElementById('lecture-desc');\n    const durationInput = document.getElementById('lecture-duration');\n    const orderInput = document.getElementById('lecture-order');\n    \n    const previewTitle = document.getElementById('preview-title');\n    const previewDesc = document.getElementById('preview-desc');\n    const previewDuration = document.getElementById('preview-duration');\n    const previewOrder = document.getElementById('preview-order');\n    \n    if (titleInput && previewTitle) {\n        titleInput.addEventListener('input', function() {\n            previewTitle.textContent = this.value || '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438';\n        });\n    }\n    \n    if (descInput && previewDesc) {\n        descInput.addEventListener('input', function() {\n            previewDesc.textContent = this.value || '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\n        });\n    }\n    \n    if (durationInput && previewDuration) {\n        durationInput.addEventListener('input', function() {\n            if (this.value) {\n                previewDuration.textContent = `\u0412\u0440\u0435\u043C\u044F: ${this.value} \u043C\u0438\u043D.`;\n            } else {\n                previewDuration.textContent = '\u0412\u0440\u0435\u043C\u044F: -';\n            }\n        });\n    }\n    \n    if (orderInput && previewOrder) {\n        orderInput.addEventListener('input', function() {\n            if (this.value) {\n                previewOrder.textContent = `\u041F\u043E\u0440\u044F\u0434\u043E\u043A: ${this.value}`;\n            } else {\n                previewOrder.textContent = '\u041F\u043E\u0440\u044F\u0434\u043E\u043A: -';\n            }\n        });\n    }\n}\n\nfunction validateForm() {\n    const title = document.getElementById('lecture-title').value.trim();\n    const description = document.getElementById('lecture-desc').value.trim();\n    const duration = document.getElementById('lecture-duration').value;\n    const order = document.getElementById('lecture-order').value;\n    const content = document.getElementById('lecture-text').value.trim();\n    \n    if (!title) {\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438', 'error', 4000);\n        return false;\n    }\n    \n    if (!description) {\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438', 'error', 4000);\n        return false;\n    }\n    \n    if (!duration || duration < 1) {\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u0443\u044E \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u043B\u0435\u043A\u0446\u0438\u0438', 'error', 4000);\n        return false;\n    }\n    \n    if (!order || order < 1) {\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 \u043F\u043E\u0440\u044F\u0434\u043A\u043E\u0432\u044B\u0439 \u043D\u043E\u043C\u0435\u0440', 'error', 4000);\n        return false;\n    }\n    \n    if (!content || content === '<p>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438 \u0437\u0434\u0435\u0441\u044C...</p><p>\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F, \u0441\u043F\u0438\u0441\u043A\u0438, \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0438 \u043A\u043E\u0434.</p>') {\n        showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0434\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438', 'error', 4000);\n        return false;\n    }\n    \n    return true;\n}\n\nfunction resetForm() {\n    const form = document.getElementById('lecture-form');\n    const editorContent = document.getElementById('lecture-content');\n    const previewTitle = document.getElementById('preview-title');\n    const previewDesc = document.getElementById('preview-desc');\n    const previewDuration = document.getElementById('preview-duration');\n    const previewOrder = document.getElementById('preview-order');\n    \n    if (form) form.reset();\n    if (editorContent) editorContent.innerHTML = '<p>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438 \u0437\u0434\u0435\u0441\u044C...</p><p>\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u0435 \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F, \u0441\u043F\u0438\u0441\u043A\u0438, \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0438 \u043A\u043E\u0434.</p>';\n    \n    if (previewTitle) previewTitle.textContent = '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438';\n    if (previewDesc) previewDesc.textContent = '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043B\u0435\u043A\u0446\u0438\u0438 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\n    if (previewDuration) previewDuration.textContent = '\u0412\u0440\u0435\u043C\u044F: -';\n    if (previewOrder) previewOrder.textContent = '\u041F\u043E\u0440\u044F\u0434\u043E\u043A: -';\n    \n    // \u0421\u0431\u0440\u0430\u0441\u044B\u0432\u0430\u0435\u043C \u0442\u0438\u043F \u0432\u0438\u0434\u0435\u043E \u043A \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\n    const uploadOption = document.querySelector('.video-option[data-type=\"upload\"]');\n    if (uploadOption) uploadOption.click();\n}\n\nfunction loadDraft() {\n    const draft = localStorage.getItem('lectureDraft');\n    if (draft) {\n        try {\n            const formData = JSON.parse(draft);\n            \n            document.getElementById('lecture-title').value = formData.title || '';\n            document.getElementById('lecture-desc').value = formData.description || '';\n            document.getElementById('lecture-duration').value = formData.duration || '';\n            document.getElementById('lecture-order').value = formData.order || '';\n            document.getElementById('lecture-text').value = formData.content || '';\n            \n            const editorContent = document.getElementById('lecture-content');\n            if (editorContent && formData.content) {\n                editorContent.innerHTML = formData.content;\n            }\n            \n            if (formData.videoType === 'youtube') {\n                const youtubeOption = document.querySelector('.video-option[data-type=\"youtube\"]');\n                if (youtubeOption) youtubeOption.click();\n                document.getElementById('youtube-url').value = formData.youtubeUrl || '';\n            }\n            \n            initPreview();\n            \n            console.log('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D');\n        } catch (error) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430:', error);\n        }\n    }\n}\n\nfunction initFormSubmission() {\n    const form = document.getElementById('lecture-form');\n    const saveDraftBtn = document.querySelector('.form-actions .btn-light');\n    \n    // \u041E\u0442\u043A\u043B\u044E\u0447\u0430\u0435\u043C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0443\u044E \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u044E \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430\n    if (form) {\n        form.setAttribute('novalidate', 'novalidate');\n    }\n    \n    if (saveDraftBtn) {\n        saveDraftBtn.addEventListener('click', function(e) {\n            e.preventDefault();\n            \n            const formData = {\n                title: document.getElementById('lecture-title').value,\n                description: document.getElementById('lecture-desc').value,\n                duration: document.getElementById('lecture-duration').value,\n                order: document.getElementById('lecture-order').value,\n                videoType: document.getElementById('video-type').value,\n                content: document.getElementById('lecture-text').value,\n                youtubeUrl: document.getElementById('youtube-url').value || '',\n                videoFile: document.getElementById('lecture-video').files[0] ? '\u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E' : null\n            };\n            \n            localStorage.setItem('lectureDraft', JSON.stringify(formData));\n            \n            showToast('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D!', 'success', 3000);\n        });\n    }\n    \n    if (form) {\n        form.addEventListener('submit', function(e) {\n            e.preventDefault();\n            \n            if (!validateForm()) {\n                return;\n            }\n            \n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            const originalText = submitBtn.innerHTML;\n            submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435...';\n            submitBtn.disabled = true;\n            \n            setTimeout(() => {\n                showToast('\u041B\u0435\u043A\u0446\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u0430!', 'success', 5000);\n                \n                resetForm();\n                \n                localStorage.removeItem('lectureDraft');\n                \n                submitBtn.innerHTML = originalText;\n                submitBtn.disabled = false;\n            }, 2000);\n        });\n    }\n    \n    loadDraft();\n}\n\nfunction initMaterialsPanel() {\n    const materialsList = document.querySelector('.materials-list');\n    const addMaterialBtn = document.querySelector('#materials-panel .btn-light');\n    \n    if (!materialsList || !addMaterialBtn) return;\n    \n    materialsList.addEventListener('click', function(e) {\n        if (e.target.classList.contains('btn-danger') || e.target.closest('.btn-danger')) {\n            const materialItem = e.target.closest('.material-item');\n            if (materialItem) {\n                if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B?')) {\n                    materialItem.remove();\n                }\n            }\n        }\n        \n        if (e.target.classList.contains('btn-light') || e.target.closest('.btn-light')) {\n            const materialItem = e.target.closest('.material-item');\n            if (materialItem) {\n                showToast('\u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u0431\u0443\u0434\u0435\u0442 \u0440\u0435\u0430\u043B\u0438\u0437\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0434\u0443\u0449\u0435\u043C', 'info', 3000);\n            }\n        }\n    });\n    \n    addMaterialBtn.addEventListener('click', function() {\n        const newMaterial = document.createElement('div');\n        newMaterial.className = 'material-item';\n        newMaterial.innerHTML = `\n            <div class=\"material-icon\">\n                <i class=\"far fa-file-pdf\"></i>\n            </div>\n            <div class=\"material-info\">\n                <div class=\"material-title\">\u041D\u043E\u0432\u044B\u0439 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B</div>\n                <div class=\"material-meta\">PDF \u2022 0 MB</div>\n            </div>\n            <div class=\"material-actions\">\n                <button type=\"button\" class=\"btn btn-small btn-light\">\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C</button>\n                <button type=\"button\" class=\"btn btn-small btn-danger\">\u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\n            </div>\n        `;\n        materialsList.appendChild(newMaterial);\n        \n        showToast('\u041D\u043E\u0432\u044B\u0439 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D. \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u0444\u0430\u0439\u043B\u0430.', 'info', 4000);\n    });\n}\n\nfunction addEditorStyles() {\n    const editorStyles = `\n        .editor-modal {\n            display: none;\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: rgba(0, 0, 0, 0.5);\n            z-index: 10000;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .editor-modal .modal-content {\n            background: white;\n            padding: 25px;\n            border-radius: 12px;\n            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n            width: 90%;\n            max-width: 500px;\n            max-height: 90vh;\n            overflow-y: auto;\n        }\n        \n        .editor-modal h3 {\n            margin-bottom: 20px;\n            color: var(--primary);\n            text-align: center;\n        }\n        \n        .editor-modal .form-group {\n            margin-bottom: 20px;\n        }\n        \n        .editor-modal label {\n            display: block;\n            margin-bottom: 8px;\n            font-weight: bold;\n            color: var(--primary);\n        }\n        \n        .modal-actions {\n            display: flex;\n            gap: 15px;\n            justify-content: flex-end;\n            margin-top: 25px;\n            padding-top: 20px;\n            border-top: 1px solid #eee;\n        }\n        \n        .image-source-tabs {\n            display: flex;\n            border-bottom: 1px solid #ddd;\n            margin-bottom: 15px;\n        }\n        \n        .source-tab {\n            padding: 10px 20px;\n            background: none;\n            border: none;\n            cursor: pointer;\n            border-bottom: 3px solid transparent;\n            transition: all 0.3s;\n            color: var(--secondary);\n        }\n        \n        .source-tab.active {\n            color: var(--accent);\n            border-bottom-color: var(--accent);\n            font-weight: bold;\n        }\n        \n        .source-panel {\n            display: none;\n        }\n        \n        .source-panel.active {\n            display: block;\n        }\n        \n        #lecture-content pre {\n            background: #f5f5f5;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            padding: 15px;\n            margin: 10px 0;\n            overflow-x: auto;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9em;\n        }\n        \n        #lecture-content code {\n            background: #f5f5f5;\n            padding: 2px 4px;\n            border-radius: 3px;\n            font-family: 'Courier New', monospace;\n        }\n        \n        #lecture-content pre code {\n            background: none;\n            padding: 0;\n        }\n        \n        #lecture-content img {\n            max-width: 100%;\n            height: auto;\n            border-radius: 8px;\n            margin: 10px 0;\n        }\n        \n        #lecture-content a {\n            color: var(--accent);\n            text-decoration: underline;\n        }\n        \n        #lecture-content ul, #lecture-content ol {\n            margin: 10px 0;\n            padding-left: 30px;\n        }\n        \n        #lecture-content li {\n            margin: 5px 0;\n        }\n        \n        .import-status {\n            padding: 10px;\n            border-radius: 4px;\n            margin: 10px 0;\n            font-size: 0.9em;\n        }\n        \n        .import-status.info {\n            background-color: #e3f2fd;\n            color: #1565c0;\n            border: 1px solid #bbdefb;\n        }\n        \n        .import-status.success {\n            background-color: #e8f5e9;\n            color: #2e7d32;\n            border: 1px solid #c8e6c9;\n        }\n        \n        .import-status.error {\n            background-color: #ffebee;\n            color: #c62828;\n            border: 1px solid #ffcdd2;\n        }\n        \n        .progress-bar {\n            width: 100%;\n            height: 6px;\n            background-color: #f0f0f0;\n            border-radius: 3px;\n            margin: 10px 0;\n            overflow: hidden;\n            display: none;\n        }\n        \n        .progress {\n            height: 100%;\n            background: linear-gradient(90deg, var(--accent), var(--primary));\n            border-radius: 3px;\n            transition: width 0.3s ease;\n            width: 0%;\n        }\n        \n        .toast-container {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10001;\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n            max-width: 400px;\n        }\n        \n        .toast {\n            background: white;\n            border-radius: 12px;\n            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n            overflow: hidden;\n            transform: translateX(400px);\n            opacity: 0;\n            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n            border-left: 4px solid;\n        }\n        \n        .toast.show {\n            transform: translateX(0);\n            opacity: 1;\n        }\n        \n        .toast.hide {\n            transform: translateX(400px);\n            opacity: 0;\n        }\n        \n        .toast-success {\n            border-left-color: #10b981;\n        }\n        \n        .toast-error {\n            border-left-color: #ef4444;\n        }\n        \n        .toast-warning {\n            border-left-color: #f59e0b;\n        }\n        \n        .toast-info {\n            border-left-color: #3b82f6;\n        }\n        \n        .toast-content {\n            display: flex;\n            align-items: center;\n            padding: 16px;\n            position: relative;\n        }\n        \n        .toast-icon {\n            margin-right: 12px;\n            font-size: 1.5em;\n            flex-shrink: 0;\n        }\n        \n        .toast-success .toast-icon {\n            color: #10b981;\n        }\n        \n        .toast-error .toast-icon {\n            color: #ef4444;\n        }\n        \n        .toast-warning .toast-icon {\n            color: #f59e0b;\n        }\n        \n        .toast-info .toast-icon {\n            color: #3b82f6;\n        }\n        \n        .toast-message {\n            flex: 1;\n            font-weight: 500;\n            color: #374151;\n            font-size: 0.95em;\n            line-height: 1.4;\n        }\n        \n        .toast-close {\n            background: none;\n            border: none;\n            color: #9ca3af;\n            cursor: pointer;\n            padding: 4px;\n            margin-left: 8px;\n            border-radius: 4px;\n            transition: all 0.2s;\n            flex-shrink: 0;\n        }\n        \n        .toast-close:hover {\n            background: #f3f4f6;\n            color: #6b7280;\n        }\n        \n        .toast-progress {\n            height: 3px;\n            width: 100%;\n            background: rgba(0, 0, 0, 0.1);\n            position: relative;\n        }\n        \n        .toast-progress::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            height: 100%;\n            width: 100%;\n            transform-origin: left;\n            animation: progress linear;\n        }\n        \n        .toast-success .toast-progress::before {\n            background: linear-gradient(90deg, #10b981, #34d399);\n        }\n        \n        .toast-error .toast-progress::before {\n            background: linear-gradient(90deg, #ef4444, #f87171);\n        }\n        \n        .toast-warning .toast-progress::before {\n            background: linear-gradient(90deg, #f59e0b, #fbbf24);\n        }\n        \n        .toast-info .toast-progress::before {\n            background: linear-gradient(90deg, #3b82f6, #60a5fa);\n        }\n        \n        @keyframes progress {\n            0% {\n                transform: scaleX(1);\n            }\n            100% {\n                transform: scaleX(0);\n            }\n        }\n        \n        .fa-spin {\n            animation: fa-spin 1s infinite linear;\n        }\n        \n        @keyframes fa-spin {\n            0% {\n                transform: rotate(0deg);\n            }\n            100% {\n                transform: rotate(360deg);\n            }\n        }\n        \n        @media (max-width: 768px) {\n            .toast-container {\n                top: 10px;\n                right: 10px;\n                left: 10px;\n                max-width: none;\n            }\n            \n            .toast {\n                transform: translateY(-100px);\n            }\n            \n            .toast.show {\n                transform: translateY(0);\n            }\n            \n            .toast.hide {\n                transform: translateY(-100px);\n            }\n        }\n    `;\n\n    if (!document.querySelector('#editor-styles')) {\n        const styleSheet = document.createElement('style');\n        styleSheet.id = 'editor-styles';\n        styleSheet.textContent = editorStyles;\n        document.head.appendChild(styleSheet);\n    }\n}", "// js/modules/courses.js\nexport function initCoursePages() {\n    const currentPath = window.location.pathname;\n    \n    if (currentPath.includes('courses.html')) {\n        initCoursesPage();\n    } else if (currentPath.includes('courses-list.html')) {\n        initCoursesListPage();\n    } else if (currentPath.includes('courses-detail.html')) {\n        initCourseDetailPage();\n    } else if (currentPath.includes('create-courses.html')) {\n        initCreateCoursePage();\n    }\n}\n\nfunction initCoursesPage() {\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438 \u0443\u0436\u0435 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 main.js\n    console.log('Initialized courses page');\n}\n\nfunction initCoursesListPage() {\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438 \u0443\u0436\u0435 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 main.js\n    console.log('Initialized courses list page');\n}\n\nfunction initCourseDetailPage() {\n    // \u041E\u0442\u043C\u0435\u0442\u0438\u0442\u044C \u043B\u0435\u043A\u0446\u0438\u044E \u043A\u0430\u043A \u043F\u0440\u043E\u0439\u0434\u0435\u043D\u043D\u0443\u044E\n    document.addEventListener('DOMContentLoaded', function() {\n        const video = document.querySelector('iframe');\n        if (video) {\n            video.addEventListener('load', function() {\n                // \u0417\u0434\u0435\u0441\u044C \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043B\u043E\u0433\u0438\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u0432\u0438\u0434\u0435\u043E\n                console.log('\u0412\u0438\u0434\u0435\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E, \u043B\u0435\u043A\u0446\u0438\u044F \u043E\u0442\u043C\u0435\u0447\u0435\u043D\u0430 \u043A\u0430\u043A \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u043D\u043D\u0430\u044F');\n            });\n        }\n    });\n}\n\nfunction initCreateCoursePage() {\n    // \u0423\u0431\u0440\u0430\u0442\u044C \u0432\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u0439 DOMContentLoaded - \u043E\u043D \u0443\u0436\u0435 \u0435\u0441\u0442\u044C \u0432 main.js\n    const titleInput = document.getElementById('course-title');\n    const descInput = document.getElementById('course-short-desc');\n    const levelSelect = document.getElementById('course-level');\n    const durationInput = document.getElementById('course-duration');\n    \n    const previewTitle = document.getElementById('preview-title');\n    const previewDesc = document.getElementById('preview-desc');\n    const previewLevel = document.getElementById('preview-level');\n    const previewDuration = document.getElementById('preview-duration');\n    \n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u043F\u043E\u043B\u0435\u0439\n    if (titleInput && previewTitle) {\n        titleInput.addEventListener('input', function() {\n            previewTitle.textContent = this.value || '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430';\n        });\n    }\n    \n    if (descInput && previewDesc) {\n        descInput.addEventListener('input', function() {\n            previewDesc.textContent = this.value || '\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\n        });\n    }\n    \n    if (levelSelect && previewLevel) {\n        levelSelect.addEventListener('change', function() {\n            const levelText = this.options[this.selectedIndex].text;\n            previewLevel.textContent = `\u0423\u0440\u043E\u0432\u0435\u043D\u044C: ${levelText || '-'}`;\n        });\n    }\n    \n    if (durationInput && previewDuration) {\n        durationInput.addEventListener('input', function() {\n            previewDuration.textContent = `\u0427\u0430\u0441\u043E\u0432: ${this.value || '-'}`;\n        });\n    }\n    \n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\n    const imageInput = document.getElementById('course-image');\n    const previewImage = document.querySelector('.preview-image');\n    \n    if (imageInput && previewImage) {\n        imageInput.addEventListener('change', function(e) {\n            if (this.files && this.files[0]) {\n                const reader = new FileReader();\n                \n                reader.onload = function(e) {\n                    previewImage.innerHTML = '';\n                    const img = document.createElement('img');\n                    img.src = e.target.result;\n                    img.style.width = '100%';\n                    img.style.height = '100%';\n                    img.style.objectFit = 'cover';\n                    img.style.borderRadius = '8px';\n                    previewImage.appendChild(img);\n                };\n                \n                reader.readAsDataURL(this.files[0]);\n            }\n        });\n    }\n    \n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0444\u043E\u0440\u043C\u044B\n    const form = document.getElementById('course-form');\n    if (form) {\n        form.addEventListener('submit', function(e) {\n            e.preventDefault();\n            \n            // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\n            alert('\u041A\u0443\u0440\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D \u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0446\u0438\u044E!');\n            \n            // \u0421\u0431\u0440\u043E\u0441 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\n            if (previewTitle) previewTitle.textContent = '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430';\n            if (previewDesc) previewDesc.textContent = '\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C';\n            if (previewLevel) previewLevel.textContent = '\u0423\u0440\u043E\u0432\u0435\u043D\u044C: -';\n            if (previewDuration) previewDuration.textContent = '\u0427\u0430\u0441\u043E\u0432: -';\n            \n            // \u0421\u0431\u0440\u043E\u0441 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\n            if (previewImage) previewImage.innerHTML = '<i class=\"fas fa-book\"></i>';\n        });\n    }\n}", "import { initCourseCreation } from '../modules/course-creation.js';\r\nimport { initCourseDetailManagement } from '../modules/course-detail-management.js';\r\nimport { initCourseManagement } from '../modules/course-management.js';\r\nimport { initCreateCourseDetailPage } from '../modules/course-editor.js';\r\nimport { initCoursePages } from '../modules/courses.js';\r\n\r\nexport function initCoursesModule() {\r\n    const currentPath = window.location.pathname;\r\n    console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043C\u043E\u0434\u0443\u043B\u044F \"\u041A\u0443\u0440\u0441\u044B\":', currentPath);\r\n\r\n    initCoursePages();\r\n\r\n    if (currentPath.includes('create-courses.html') || document.getElementById('course-form')) {\r\n        console.log('\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043A\u0443\u0440\u0441\u0430');\r\n        initCourseCreation();\r\n        initCourseManagement();\r\n    }\r\n    \r\n    if (currentPath.includes('create-course-detail.html')) {\r\n        console.log('\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u043E\u0439 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438 \u043E \u043A\u0443\u0440\u0441\u0435');\r\n        initCreateCourseDetailPage();\r\n        initCourseDetailManagement();\r\n    }\r\n    \r\n    if (currentPath.includes('course-management.html') || \r\n        currentPath.includes('courses.html') && document.querySelector('.module-card')) {\r\n        console.log('\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u0443\u0440\u0441\u043E\u043C');\r\n        initCourseManagement();\r\n    }\r\n\r\n    initSpecificCourseComponents();\r\n}\r\n\r\nfunction initSpecificCourseComponents() {\r\n    if (document.getElementById('course-form')) {\r\n        initCourseCreation();\r\n    }\r\n    \r\n    if (document.querySelector('.module-card') || document.querySelector('.add-module-btn')) {\r\n        initCourseManagement();\r\n    }\r\n    \r\n    if (document.getElementById('lecture-content') || document.querySelector('.content-tabs')) {\r\n        initCreateCourseDetailPage();\r\n    }\r\n    \r\n    if (document.querySelector('.materials-list') || document.querySelector('.add-lesson-btn')) {\r\n        initCourseDetailManagement();\r\n    }\r\n}\r\n\r\nexport function createCourseModule(title, description, type = 'theory') {\r\n    return {\r\n        id: Date.now(),\r\n        title,\r\n        description,\r\n        type,\r\n        lessons: [],\r\n        createdAt: new Date().toISOString()\r\n    };\r\n}\r\n\r\nexport function createCourseLesson(title, type = 'lecture', content = '') {\r\n    return {\r\n        id: Date.now(),\r\n        title,\r\n        type,\r\n        content,\r\n        duration: 0,\r\n        order: 0,\r\n        materials: [],\r\n        createdAt: new Date().toISOString()\r\n    };\r\n}\r\n\r\nexport function validateCourseData(courseData) {\r\n    const errors = [];\r\n    \r\n    if (!courseData.title || courseData.title.trim().length < 3) {\r\n        errors.push('\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 3 \u0441\u0438\u043C\u0432\u043E\u043B\u0430');\r\n    }\r\n    \r\n    if (!courseData.description || courseData.description.trim().length < 10) {\r\n        errors.push('\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0443\u0440\u0441\u0430 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C 10 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432');\r\n    }\r\n    \r\n    if (!courseData.category) {\r\n        errors.push('\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u044B\u0431\u0440\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u043A\u0443\u0440\u0441\u0430');\r\n    }\r\n    \r\n    if (!courseData.level) {\r\n        errors.push('\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0441\u043B\u043E\u0436\u043D\u043E\u0441\u0442\u0438');\r\n    }\r\n    \r\n    if (!courseData.duration || courseData.duration < 1) {\r\n        errors.push('\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u043A\u0443\u0440\u0441\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u043C \u0447\u0438\u0441\u043B\u043E\u043C');\r\n    }\r\n    \r\n    return {\r\n        isValid: errors.length === 0,\r\n        errors\r\n    };\r\n}\r\n\r\nexport function saveCourseDraft(courseData) {\r\n    try {\r\n        const draft = {\r\n            ...courseData,\r\n            savedAt: new Date().toISOString(),\r\n            version: '1.0'\r\n        };\r\n        \r\n        localStorage.setItem('courseDraft', JSON.stringify(draft));\r\n        return true;\r\n    } catch (error) {\r\n        console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function loadCourseDraft() {\r\n    try {\r\n        const draft = localStorage.getItem('courseDraft');\r\n        return draft ? JSON.parse(draft) : null;\r\n    } catch (error) {\r\n        console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport function clearCourseDraft() {\r\n    try {\r\n        localStorage.removeItem('courseDraft');\r\n        return true;\r\n    } catch (error) {\r\n        console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0447\u0438\u0441\u0442\u043A\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430:', error);\r\n        return false;\r\n    }\r\n}\r\n\r\n\r\nexport const CourseUtils = {\r\n    formatDuration(minutes) {\r\n        const hours = Math.floor(minutes / 60);\r\n        const mins = minutes % 60;\r\n        \r\n        if (hours > 0) {\r\n            return mins > 0 ? `${hours}\u0447 ${mins}\u043C` : `${hours}\u0447`;\r\n        }\r\n        return `${mins}\u043C`;\r\n    },\r\n    \r\n    getLevelText(level) {\r\n        const levels = {\r\n            beginner: '\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439',\r\n            intermediate: '\u0421\u0440\u0435\u0434\u043D\u0438\u0439',\r\n            advanced: '\u041F\u0440\u043E\u0434\u0432\u0438\u043D\u0443\u0442\u044B\u0439'\r\n        };\r\n        return levels[level] || '\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D';\r\n    },\r\n    \r\n    getLessonTypeText(type) {\r\n        const types = {\r\n            lecture: '\u041B\u0435\u043A\u0446\u0438\u044F',\r\n            test: '\u0422\u0435\u0441\u0442',\r\n            practice: '\u041F\u0440\u0430\u043A\u0442\u0438\u043A\u0430'\r\n        };\r\n        return types[type] || '\u041B\u0435\u043A\u0446\u0438\u044F';\r\n    },\r\n    \r\n    isValidYouTubeUrl(url) {\r\n        const regex = /^(https?:\\/\\/)?(www\\.)?(youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\r\n        return regex.test(url);\r\n    },\r\n    \r\n    extractYouTubeId(url) {\r\n        const regex = /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\r\n        const match = url.match(regex);\r\n        return match ? match[1] : null;\r\n    }\r\n};\r\n\r\nif (typeof window !== 'undefined') {\r\n    window.CourseUtils = CourseUtils;\r\n    window.createCourseModule = createCourseModule;\r\n    window.createCourseLesson = createCourseLesson;\r\n}", "let toastContainer;\r\n\r\nexport function initToastSystem() {\r\n    if (!document.querySelector('.toast-container')) {\r\n        toastContainer = document.createElement('div');\r\n        toastContainer.className = 'toast-container';\r\n        document.body.appendChild(toastContainer);\r\n    } else {\r\n        toastContainer = document.querySelector('.toast-container');\r\n    }\r\n}\r\n\r\nexport function showToast(message, type = 'success', title = '', duration = 4000) {\r\n    if (!toastContainer) initToastSystem();\r\n\r\n    const toast = document.createElement('div');\r\n    toast.className = `toast ${type}`;\r\n    \r\n    const icons = {\r\n        success: 'fas fa-check-circle',\r\n        warning: 'fas fa-exclamation-triangle',\r\n        error: 'fas fa-times-circle',\r\n        info: 'fas fa-info-circle'\r\n    };\r\n\r\n    toast.innerHTML = `\r\n        <div class=\"toast-icon\">\r\n            <i class=\"${icons[type] || icons.info}\"></i>\r\n        </div>\r\n        <div class=\"toast-content\">\r\n            ${title ? `<div class=\"toast-title\">${title}</div>` : ''}\r\n            <p class=\"toast-message\">${message}</p>\r\n        </div>\r\n        <button class=\"toast-close\" onclick=\"this.parentElement.remove()\">\r\n            <i class=\"fas fa-times\"></i>\r\n        </button>\r\n    `;\r\n\r\n    toastContainer.appendChild(toast);\r\n\r\n    setTimeout(() => toast.classList.add('show'), 10);\r\n\r\n    if (duration > 0) {\r\n        setTimeout(() => {\r\n            toast.classList.remove('show');\r\n            setTimeout(() => toast.remove(), 300);\r\n        }, duration);\r\n    }\r\n\r\n    return toast;\r\n}", "import { showToast } from '../modules/toast.js';\n\nexport function initPracticExecution() {\n    // \u042D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u0435\u043C\n    const codeInput = document.getElementById('code-input');\n    const runBtn = document.getElementById('run-btn');\n    const submitBtn = document.getElementById('submit-btn');\n    const resetBtn = document.getElementById('reset-btn');\n    const hintBtn = document.getElementById('hint-btn');\n    const resultsSection = document.getElementById('results');\n    const outputDisplay = document.getElementById('output-display');\n    const feedbackText = document.getElementById('feedback-text');\n    const resultStatus = document.getElementById('result-status');\n    const nextTaskBtn = document.getElementById('next-task-btn');\n    const tryAgainBtn = document.getElementById('try-again-btn');\n\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u0430 \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432\n    const fileManager = initFileAttachment();\n\n    // \u0418\u0441\u0445\u043E\u0434\u043D\u044B\u0439 \u043A\u043E\u0434 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E\n    const defaultCode = `# \u0412\u0430\u0448 \u043A\u043E\u0434 \u0437\u0434\u0435\u0441\u044C\nname = \"\u0410\u043D\u043D\u0430\"\nage = 20\nheight = 1.65\nis_student = True\n\n# \u0412\u044B\u0432\u043E\u0434 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0430\nprint(f\"\u041C\u0435\u043D\u044F \u0437\u043E\u0432\u0443\u0442 {name}, \u043C\u043D\u0435 {age} \u043B\u0435\u0442, \u043C\u043E\u0439 \u0440\u043E\u0441\u0442 {height} \u043C, \u0441\u0442\u0443\u0434\u0435\u043D\u0442: {is_student}\")`;\n\n    // \u0417\u0430\u043F\u0443\u0441\u043A \u043A\u043E\u0434\u0430\n    runBtn?.addEventListener('click', function() {\n        const code = codeInput?.value;\n        \n        if (!code || code.trim() === defaultCode.trim()) {\n            showToast('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043E\u0439 \u043A\u043E\u0434 \u043F\u0435\u0440\u0435\u0434 \u0437\u0430\u043F\u0443\u0441\u043A\u043E\u043C', 'warning', '\u041A\u043E\u0434 \u043D\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D');\n            return;\n        }\n        \n        // \u041F\u041E\u041A\u0410\u0417\u042B\u0412\u0410\u0415\u041C \u0441\u0435\u043A\u0446\u0438\u044E \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\n        resultsSection?.classList.add('active');\n        \n        // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0434\u043B\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043A\u043E\u0434\u0430\n        if (outputDisplay) outputDisplay.textContent = \"\u041C\u0435\u043D\u044F \u0437\u043E\u0432\u0443\u0442 \u0410\u043D\u043D\u0430, \u043C\u043D\u0435 20 \u043B\u0435\u0442, \u043C\u043E\u0439 \u0440\u043E\u0441\u0442 1.65 \u043C, \u0441\u0442\u0443\u0434\u0435\u043D\u0442: True\";\n        if (feedbackText) feedbackText.textContent = \"\u041A\u043E\u0434 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E! \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0432\u044B\u0432\u043E\u0434 \u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F\u043C \u0437\u0430\u0434\u0430\u043D\u0438\u044F.\";\n        if (resultStatus) {\n            resultStatus.textContent = \"\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u043E\";\n            resultStatus.className = \"result-status status-success\";\n        }\n        \n        // \u041E\u0447\u0438\u0449\u0430\u0435\u043C \u0441\u0435\u043A\u0446\u0438\u044E \u0444\u0430\u0439\u043B\u043E\u0432 \u0434\u043B\u044F \u0437\u0430\u043F\u0443\u0441\u043A\u0430 (\u0442\u043E\u043B\u044C\u043A\u043E \u0432\u044B\u0432\u043E\u0434 \u043A\u043E\u0434\u0430)\n        const submittedFiles = document.getElementById('submitted-files');\n        if (submittedFiles) submittedFiles.innerHTML = '';\n        \n        resultsSection?.scrollIntoView({ behavior: 'smooth' });\n        \n        // \u0417\u0430\u043F\u0443\u0441\u043A\u0430\u0435\u043C \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u044E \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\n        setTimeout(() => {\n            const fadeElements = resultsSection?.querySelectorAll('.fade-in');\n            fadeElements?.forEach(element => {\n                element.classList.add('visible');\n            });\n        }, 100);\n        \n        showToast('\u041A\u043E\u0434 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D', 'success', '\u0417\u0430\u043F\u0443\u0441\u043A');\n    });\n\n    // \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0440\u0435\u0448\u0435\u043D\u0438\u044F\n    submitBtn?.addEventListener('click', function() {\n        const code = codeInput?.value;\n        \n        // \u0421\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u0444\u0430\u0439\u043B\u044B \u043F\u0435\u0440\u0435\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u043E\u0439\n        fileManager.syncFiles();\n        const attachedFiles = fileManager.getAttachedFiles();\n        \n        console.log('\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0440\u0435\u0448\u0435\u043D\u0438\u044F. \u0424\u0430\u0439\u043B\u044B:', attachedFiles);\n        \n        if (!code || code.trim() === defaultCode.trim()) {\n            showToast('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u043E\u0439', 'warning', '\u0420\u0435\u0448\u0435\u043D\u0438\u0435 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442');\n            return;\n        }\n        \n        // \u041F\u041E\u041A\u0410\u0417\u042B\u0412\u0410\u0415\u041C \u0441\u0435\u043A\u0446\u0438\u044E \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432\n        resultsSection?.classList.add('active');\n        resultsSection?.scrollIntoView({ behavior: 'smooth' });\n        \n        // \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0432\u0440\u0435\u043C\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438\n        const now = new Date();\n        const submissionTimeElement = document.getElementById('submission-time');\n        if (submissionTimeElement) {\n            submissionTimeElement.textContent = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();\n        }\n        \n        // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u0432 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0430\u0445\n        const submittedFiles = document.getElementById('submitted-files');\n        if (submittedFiles) {\n            if (attachedFiles.length > 0) {\n                let filesHtml = '<div class=\"submitted-files-title\"><strong>\u041F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B:</strong></div>';\n                \n                attachedFiles.forEach(file => {\n                    const fileIcon = getFileIcon(file.name);\n                    const fileSize = formatFileSize(file.size);\n                    \n                    filesHtml += `\n                        <div class=\"submitted-file-item\">\n                            <i class=\"fas ${fileIcon}\"></i>\n                            <span>${file.name}</span>\n                            <small>(${fileSize})</small>\n                        </div>\n                    `;\n                });\n                \n                submittedFiles.innerHTML = filesHtml;\n            } else {\n                submittedFiles.innerHTML = '<div class=\"submitted-files-title\">\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u044B</div>';\n            }\n        }\n        \n        // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u043A\u043E\u0434 \u0432 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0430\u0445\n        if (outputDisplay) outputDisplay.textContent = code;\n        \n        // \u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u043C \u0441\u0442\u0430\u0442\u0443\u0441 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438\n        if (feedbackText) {\n            feedbackText.textContent = \n                '\u0412\u0430\u0448\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443. \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0431\u0443\u0434\u0443\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u043F\u043E\u0441\u043B\u0435 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0435\u043C.';\n        }\n        \n        if (resultStatus) {\n            resultStatus.textContent = \"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E\";\n            resultStatus.className = \"result-status status-success\";\n        }\n        \n        // \u0417\u0430\u043F\u0443\u0441\u043A\u0430\u0435\u043C \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u044E \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\n        setTimeout(() => {\n            const fadeElements = resultsSection?.querySelectorAll('.fade-in');\n            fadeElements?.forEach(element => {\n                element.classList.add('visible');\n            });\n        }, 100);\n        \n        // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B\u0430 \u0431\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\n        console.log('\u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u0437\u0430\u0434\u0430\u043D\u0438\u044F:', {\n            code: code,\n            files: attachedFiles\n        });\n        \n        showToast('\u0420\u0435\u0448\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443!', 'success', '\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E');\n        \n        // \u041E\u0447\u0438\u0449\u0430\u0435\u043C \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043D\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u043F\u043E\u0441\u043B\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438\n        fileManager.clearAttachedFiles();\n    });\n\n    // \u0421\u0431\u0440\u043E\u0441 \u043A\u043E\u0434\u0430\n    resetBtn?.addEventListener('click', function() {\n        const confirmToast = showToast(\n            '\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043A\u043E\u0434 \u043A \u0438\u0441\u0445\u043E\u0434\u043D\u043E\u043C\u0443 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044E?', \n            'warning', \n            '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0441\u0431\u0440\u043E\u0441\u0430', \n            0\n        );\n\n        confirmToast.querySelector('.toast-close').remove();\n\n        const toastActions = document.createElement('div');\n        toastActions.className = 'toast-actions';\n        toastActions.style.marginTop = '10px';\n        toastActions.style.display = 'flex';\n        toastActions.style.gap = '8px';\n        toastActions.style.justifyContent = 'flex-end';\n        \n        toastActions.innerHTML = `\n            <button class=\"btn btn-danger btn-small confirm-reset\">\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C</button>\n            <button class=\"btn btn-light btn-small cancel-reset\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n        `;\n        \n        const toastContent = confirmToast.querySelector('.toast-content');\n        toastContent.appendChild(toastActions);\n\n        confirmToast.querySelector('.confirm-reset').addEventListener('click', function() {\n            if (codeInput) codeInput.value = defaultCode;\n            showToast('\u041A\u043E\u0434 \u0441\u0431\u0440\u043E\u0448\u0435\u043D \u043A \u0438\u0441\u0445\u043E\u0434\u043D\u043E\u043C\u0443 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044E', 'info', '\u0421\u0431\u0440\u043E\u0441');\n            confirmToast.remove();\n        });\n        \n        confirmToast.querySelector('.cancel-reset').addEventListener('click', function() {\n            confirmToast.remove();\n        });\n    });\n\n    // \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0443\n    hintBtn?.addEventListener('click', function() {\n        showToast('\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 f-\u0441\u0442\u0440\u043E\u043A\u0438 \u0434\u043B\u044F \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0432\u044B\u0432\u043E\u0434\u0430. \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: print(f\"\u0422\u0435\u043A\u0441\u0442 {\u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0430\u044F} \u0442\u0435\u043A\u0441\u0442\")', 'info', '\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0430');\n    });\n\n    // \u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u0435\n    nextTaskBtn?.addEventListener('click', function() {\n        showToast('\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0437\u0430\u0434\u0430\u043D\u0438\u044E...', 'info', '\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u0435');\n        // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C\u0443 \u0437\u0430\u0434\u0430\u043D\u0438\u044E\n    });\n\n    // \u041F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u0435\u0449\u0435 \u0440\u0430\u0437\n    tryAgainBtn?.addEventListener('click', function() {\n        // \u0421\u041A\u0420\u042B\u0412\u0410\u0415\u041C \u0441\u0435\u043A\u0446\u0438\u044E \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432\n        resultsSection?.classList.remove('active');\n        \n        // \u0421\u0431\u0440\u0430\u0441\u044B\u0432\u0430\u0435\u043C \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0438\n        const fadeElements = resultsSection?.querySelectorAll('.fade-in');\n        fadeElements?.forEach(element => {\n            element.classList.remove('visible');\n        });\n        \n        // \u0424\u043E\u043A\u0443\u0441\u0438\u0440\u0443\u0435\u043C\u0441\u044F \u043D\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0435 \u043A\u043E\u0434\u0430\n        codeInput?.focus();\n        \n        showToast('\u041C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0448\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u043D\u0438\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437', 'info', '\u041F\u043E\u0432\u0442\u043E\u0440\u043D\u0430\u044F \u043F\u043E\u043F\u044B\u0442\u043A\u0430');\n    });\n\n    \n\n    // \u0410\u0432\u0442\u043E-\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043A\u043E\u0434\u0430\n    let saveTimeout;\n    codeInput?.addEventListener('input', function() {\n        clearTimeout(saveTimeout);\n        saveTimeout = setTimeout(() => {\n            localStorage.setItem('practic_code_autosave', this.value);\n        }, 1000);\n    });\n\n    // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0430\u0432\u0442\u043E-\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0433\u043E \u043A\u043E\u0434\u0430\n    const savedCode = localStorage.getItem('practic_code_autosave');\n    if (savedCode && codeInput) {\n        const restoreToast = showToast(\n            '\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u043E \u0430\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435. \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C?', \n            'info', \n            '\u0410\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435', \n            5000\n        );\n\n        restoreToast.querySelector('.toast-close').remove();\n\n        const toastActions = document.createElement('div');\n        toastActions.className = 'toast-actions';\n        toastActions.style.marginTop = '10px';\n        toastActions.style.display = 'flex';\n        toastActions.style.gap = '8px';\n        toastActions.style.justifyContent = 'flex-end';\n        \n        toastActions.innerHTML = `\n            <button class=\"btn btn-success btn-small confirm-restore\">\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C</button>\n            <button class=\"btn btn-light btn-small cancel-restore\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n        `;\n        \n        const toastContent = restoreToast.querySelector('.toast-content');\n        toastContent.appendChild(toastActions);\n\n        restoreToast.querySelector('.confirm-restore').addEventListener('click', function() {\n            codeInput.value = savedCode;\n            showToast('\u0420\u0435\u0448\u0435\u043D\u0438\u0435 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E', 'success', '\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E');\n            restoreToast.remove();\n        });\n        \n        restoreToast.querySelector('.cancel-restore').addEventListener('click', function() {\n            localStorage.removeItem('practic_code_autosave');\n            showToast('\u0410\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043E\u0447\u0438\u0449\u0435\u043D\u043E', 'info', '\u041E\u0442\u043C\u0435\u043D\u0435\u043D\u043E');\n            restoreToast.remove();\n        });\n    }\n}\n\nexport function initFileAttachment() {\n    const attachFileBtn = document.getElementById('attach-file-btn');\n    const fileAttachmentSection = document.getElementById('file-attachment-section');\n    const fileInput = document.getElementById('file-input');\n    const fileList = document.getElementById('file-list');\n    const hideAttachmentsBtn = document.getElementById('hide-attachments-btn');\n    const saveAttachmentsBtn = document.getElementById('save-attachments-btn');\n    const fileUploadLabel = document.querySelector('.file-upload-label');\n    const fileLabelText = document.getElementById('file-label-text');\n    \n    // \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0444\u0430\u0439\u043B\u044B \u0438\u0437 localStorage \u0441 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u043E\u0439\n    let attachedFiles = [];\n    try {\n        const storedFiles = localStorage.getItem('practic_attached_files');\n        if (storedFiles) {\n            attachedFiles = JSON.parse(storedFiles);\n            // \u0423\u0431\u0435\u0434\u0438\u043C\u0441\u044F, \u0447\u0442\u043E \u044D\u0442\u043E \u043C\u0430\u0441\u0441\u0438\u0432\n            if (!Array.isArray(attachedFiles)) {\n                attachedFiles = [];\n            }\n        }\n    } catch (e) {\n        console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0444\u0430\u0439\u043B\u043E\u0432 \u0438\u0437 localStorage:', e);\n        attachedFiles = [];\n    }\n\n    // \u0423\u0431\u0435\u0434\u0438\u043C\u0441\u044F, \u0447\u0442\u043E \u0443 \u0432\u0441\u0435\u0445 \u0444\u0430\u0439\u043B\u043E\u0432 \u0435\u0441\u0442\u044C \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u0435\n    attachedFiles = attachedFiles.map(file => {\n        if (!file.extension) {\n            file.extension = getFileExtension(file.name);\n        }\n        return file;\n    });\n\n    // \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C/\u0441\u043A\u0440\u044B\u0442\u044C \u0441\u0435\u043A\u0446\u0438\u044E \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432\n    attachFileBtn?.addEventListener('click', function() {\n        fileAttachmentSection?.classList.toggle('active');\n        if (fileAttachmentSection?.classList.contains('active')) {\n            renderFileList();\n        }\n    });\n\n    // \u0421\u043A\u0440\u044B\u0442\u044C \u0441\u0435\u043A\u0446\u0438\u044E \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432\n    hideAttachmentsBtn?.addEventListener('click', function() {\n        fileAttachmentSection?.classList.remove('active');\n    });\n\n    // Drag and drop \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\n    if (fileUploadLabel) {\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n            fileUploadLabel.addEventListener(eventName, preventDefaults, false);\n        });\n\n        function preventDefaults(e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        ['dragenter', 'dragover'].forEach(eventName => {\n            fileUploadLabel.addEventListener(eventName, highlight, false);\n        });\n\n        ['dragleave', 'drop'].forEach(eventName => {\n            fileUploadLabel.addEventListener(eventName, unhighlight, false);\n        });\n\n        function highlight() {\n            fileUploadLabel.classList.add('drag-over');\n        }\n\n        function unhighlight() {\n            fileUploadLabel.classList.remove('drag-over');\n        }\n\n        fileUploadLabel.addEventListener('drop', handleDrop, false);\n\n        function handleDrop(e) {\n            const dt = e.dataTransfer;\n            const files = dt.files;\n            handleFiles(files);\n        }\n    }\n\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0432\u044B\u0431\u043E\u0440\u0430 \u0444\u0430\u0439\u043B\u043E\u0432 \u0447\u0435\u0440\u0435\u0437 input\n    fileInput?.addEventListener('change', function(e) {\n        handleFiles(e.target.files);\n        fileInput.value = '';\n    });\n\n    function handleFiles(files) {\n        const fileArray = Array.from(files);\n        let filesAdded = 0;\n        \n        fileArray.forEach(file => {\n            // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0444\u0430\u0439\u043B\u043E\u0432\n            if (attachedFiles.length >= 5) {\n                showToast('\u041C\u043E\u0436\u043D\u043E \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u0438\u0442\u044C \u043D\u0435 \u0431\u043E\u043B\u0435\u0435 5 \u0444\u0430\u0439\u043B\u043E\u0432', 'warning', '\u041E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0435');\n                return;\n            }\n            \n            // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0440\u0430\u0437\u043C\u0435\u0440\u0430 \u0444\u0430\u0439\u043B\u0430\n            if (file.size > 10 * 1024 * 1024) {\n                showToast(`\u0424\u0430\u0439\u043B \"${file.name}\" \u0441\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0439. \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0430\u0437\u043C\u0435\u0440: 10 MB`, 'warning', '\u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u0444\u0430\u0439\u043B');\n                return;\n            }\n            \n            // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0442\u0438\u043F\u0430 \u0444\u0430\u0439\u043B\u0430\n            const allowedTypes = ['.pdf', '.doc', '.docx', '.txt', '.py', '.jpg', '.jpeg', '.png', '.zip'];\n            const fileExtension = getFileExtension(file.name);\n            \n            if (!allowedTypes.includes(fileExtension)) {\n                showToast(`\u0424\u0430\u0439\u043B \"${file.name}\" \u0438\u043C\u0435\u0435\u0442 \u043D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442`, 'warning', '\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442');\n                return;\n            }\n            \n            // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043D\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u044B\n            const isDuplicate = attachedFiles.some(f => \n                f.name === file.name && f.size === file.size\n            );\n            \n            if (isDuplicate) {\n                showToast(`\u0424\u0430\u0439\u043B \"${file.name}\" \u0443\u0436\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D`, 'warning', '\u0414\u0443\u0431\u043B\u0438\u043A\u0430\u0442');\n                return;\n            }\n            \n            // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0444\u0430\u0439\u043B\n            attachedFiles.push({\n                name: file.name,\n                size: file.size,\n                type: file.type,\n                extension: fileExtension,\n                lastModified: file.lastModified,\n                // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u0443\u044E \u043C\u0435\u0442\u043A\u0443 \u0434\u043B\u044F \u0443\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438\n                id: Date.now() + Math.random()\n            });\n            \n            filesAdded++;\n        });\n        \n        if (filesAdded > 0) {\n            // \u041D\u0415\u041C\u0415\u0414\u041B\u0415\u041D\u041D\u041E \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u0432 localStorage\n            saveFilesToStorage();\n            renderFileList();\n            updateFileLabel();\n            showToast(`\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E ${filesAdded} \u0444\u0430\u0439\u043B(\u043E\u0432)`, 'success', '\u0424\u0430\u0439\u043B\u044B \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B');\n            \n            // \u0414\u0415\u0411\u0410\u0413: \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C, \u0447\u0442\u043E \u0444\u0430\u0439\u043B\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0441\u044C\n            console.log('\u0424\u0430\u0439\u043B\u044B \u043F\u043E\u0441\u043B\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F:', attachedFiles);\n            console.log('\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E \u0432 localStorage:', localStorage.getItem('practic_attached_files'));\n        }\n    }\n\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0441\u043F\u0438\u0441\u043A\u0430 \u0444\u0430\u0439\u043B\u043E\u0432\n    function renderFileList() {\n        if (!fileList) return;\n        \n        fileList.innerHTML = '';\n        \n        if (attachedFiles.length === 0) {\n            fileList.innerHTML = `\n                <div class=\"file-item\" style=\"text-align: center; color: #6c757d;\">\n                    <i class=\"fas fa-folder-open\" style=\"font-size: 2rem; margin-bottom: 10px; display: block;\"></i>\n                    <div>\u0424\u0430\u0439\u043B\u044B \u043D\u0435 \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u044B</div>\n                </div>\n            `;\n            return;\n        }\n        \n        attachedFiles.forEach((file, index) => {\n            const fileItem = document.createElement('div');\n            fileItem.className = 'file-item';\n            \n            const fileSize = formatFileSize(file.size);\n            const fileIcon = getFileIcon(file.name);\n            const displayExtension = file.extension ? file.extension.replace('.', '').toUpperCase() : 'FILE';\n            \n            fileItem.innerHTML = `\n                <div class=\"file-info\">\n                    <i class=\"fas ${fileIcon} file-icon\"></i>\n                    <div class=\"file-details\">\n                        <div class=\"file-name\">${file.name}</div>\n                        <div class=\"file-meta\">\n                            <span class=\"file-size\">${fileSize}</span>\n                            <span class=\"file-type\">${displayExtension}</span>\n                        </div>\n                    </div>\n                </div>\n                <button class=\"file-remove\" data-index=\"${index}\" title=\"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B\">\n                    <i class=\"fas fa-times\"></i>\n                </button>\n            `;\n            \n            fileList.appendChild(fileItem);\n        });\n        \n        // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F\n        document.querySelectorAll('.file-remove').forEach(btn => {\n            btn.addEventListener('click', function() {\n                const index = parseInt(this.getAttribute('data-index'));\n                if (index >= 0 && index < attachedFiles.length) {\n                    const fileName = attachedFiles[index].name;\n                    attachedFiles.splice(index, 1);\n                    saveFilesToStorage(); // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F\n                    renderFileList();\n                    updateFileLabel();\n                    showToast(`\u0424\u0430\u0439\u043B \"${fileName}\" \u0443\u0434\u0430\u043B\u0435\u043D`, 'info', '\u0424\u0430\u0439\u043B \u0443\u0434\u0430\u043B\u0435\u043D');\n                }\n            });\n        });\n    }\n\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0442\u0435\u043A\u0441\u0442\u0430 \u0432 label\n    function updateFileLabel() {\n        if (fileLabelText) {\n            fileLabelText.textContent = attachedFiles.length > 0 \n                ? `\u041F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043E \u0444\u0430\u0439\u043B\u043E\u0432: ${attachedFiles.length}` \n                : '\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043B\u044B \u0440\u0435\u0448\u0435\u043D\u0438\u044F';\n        }\n    }\n\n    // \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043D\u044B\u0445 \u0444\u0430\u0439\u043B\u043E\u0432\n    saveAttachmentsBtn?.addEventListener('click', function() {\n        console.log('\u041D\u0430\u0436\u0430\u0442\u0430 \u043A\u043D\u043E\u043F\u043A\u0430 \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0444\u0430\u0439\u043B\u044B. attachedFiles:', attachedFiles);\n        \n        // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C \u043A\u0430\u043A attachedFiles, \u0442\u0430\u043A \u0438 localStorage \u0434\u043B\u044F \u043D\u0430\u0434\u0435\u0436\u043D\u043E\u0441\u0442\u0438\n        const storedFiles = getStoredFiles();\n        const totalFiles = attachedFiles.length > 0 ? attachedFiles.length : storedFiles.length;\n        \n        if (totalFiles === 0) {\n            showToast('\u041D\u0435\u0442 \u0444\u0430\u0439\u043B\u043E\u0432 \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F', 'warning', '\u0424\u0430\u0439\u043B\u044B');\n            return;\n        }\n        \n        // \u0415\u0441\u043B\u0438 attachedFiles \u043F\u0443\u0441\u0442, \u043D\u043E \u0432 localStorage \u0435\u0441\u0442\u044C \u0444\u0430\u0439\u043B\u044B, \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u0438\u0445\n        if (attachedFiles.length === 0 && storedFiles.length > 0) {\n            attachedFiles = storedFiles;\n            saveFilesToStorage();\n            renderFileList();\n            updateFileLabel();\n        }\n        \n        showToast(`\u0424\u0430\u0439\u043B\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B (${attachedFiles.length} \u0444\u0430\u0439\u043B(\u043E\u0432))`, 'success', '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E');\n        fileAttachmentSection?.classList.remove('active');\n    });\n\n    // \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432 \u0432 localStorage\n    function saveFilesToStorage() {\n        try {\n            localStorage.setItem('practic_attached_files', JSON.stringify(attachedFiles));\n            console.log('\u0424\u0430\u0439\u043B\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0432 localStorage:', attachedFiles);\n        } catch (e) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432 \u0432 localStorage:', e);\n            showToast('\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432', 'error', '\u041E\u0448\u0438\u0431\u043A\u0430');\n        }\n    }\n\n    // \u041F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432 \u0438\u0437 localStorage\n    function getStoredFiles() {\n        try {\n            const stored = localStorage.getItem('practic_attached_files');\n            return stored ? JSON.parse(stored) : [];\n        } catch (e) {\n            console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u0447\u0442\u0435\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432 \u0438\u0437 localStorage:', e);\n            return [];\n        }\n    }\n\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\n    renderFileList();\n    updateFileLabel();\n\n    // \u0414\u0415\u0411\u0410\u0413: \u0412\u044B\u0432\u043E\u0434\u0438\u043C \u043D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435\n    console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432\u043E\u0433\u043E \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440\u0430. attachedFiles:', attachedFiles);\n    console.log('\u0424\u0430\u0439\u043B\u044B \u0432 localStorage:', getStoredFiles());\n\n    // \u042D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u0443\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044E \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u043F\u0440\u0438\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u043D\u044B\u0445 \u0444\u0430\u0439\u043B\u043E\u0432\n    return {\n        getAttachedFiles: () => [...attachedFiles], // \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043C \u043A\u043E\u043F\u0438\u044E \u043C\u0430\u0441\u0441\u0438\u0432\u0430\n        clearAttachedFiles: () => {\n            attachedFiles = [];\n            localStorage.removeItem('practic_attached_files');\n            renderFileList();\n            updateFileLabel();\n            showToast('\u0412\u0441\u0435 \u0444\u0430\u0439\u043B\u044B \u0443\u0434\u0430\u043B\u0435\u043D\u044B', 'info', '\u041E\u0447\u0438\u0441\u0442\u043A\u0430');\n        },\n        // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043C\u0435\u0442\u043E\u0434 \u0434\u043B\u044F \u043F\u0440\u0438\u043D\u0443\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0439 \u0441\u0438\u043D\u0445\u0440\u043E\u043D\u0438\u0437\u0430\u0446\u0438\u0438\n        syncFiles: () => {\n            const stored = getStoredFiles();\n            if (stored.length !== attachedFiles.length) {\n                attachedFiles = stored;\n                renderFileList();\n                updateFileLabel();\n            }\n        }\n    };\n}\n\n// \u0412\u0441\u043F\u043E\u043C\u043E\u0433\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0438 \u043E\u0441\u0442\u0430\u044E\u0442\u0441\u044F \u0431\u0435\u0437 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439\nfunction getFileExtension(filename) {\n    if (!filename) return '';\n    const parts = filename.split('.');\n    return parts.length > 1 ? '.' + parts.pop().toLowerCase() : '';\n}\n\nfunction getFileIcon(filename) {\n    const extension = getFileExtension(filename);\n    \n    switch(extension) {\n        case '.pdf': return 'fa-file-pdf';\n        case '.doc': case '.docx': return 'fa-file-word';\n        case '.txt': return 'fa-file-alt';\n        case '.py': return 'fa-file-code';\n        case '.jpg': case '.jpeg': case '.png': return 'fa-file-image';\n        case '.zip': return 'fa-file-archive';\n        default: return 'fa-file';\n    }\n}\n\nfunction formatFileSize(bytes) {\n    if (bytes === 0) return '0 Bytes';\n    \n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}", "export function initPracticReview() {\n    // \u041C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438\n    const reviewModal = document.getElementById('review-modal');\n    const openReviewButtons = document.querySelectorAll('.open-review');\n    const closeModalButton = document.getElementById('close-modal');\n    const cancelReviewButton = document.getElementById('cancel-review');\n    const gradeOptions = document.querySelectorAll('.grade-option');\n    const submitReviewButton = document.getElementById('submit-review');\n    const saveDraftButton = document.getElementById('save-draft');\n\n    // \u041E\u0442\u043A\u0440\u044B\u0442\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\n    openReviewButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            reviewModal?.classList.add('active');\n            document.body.style.overflow = 'hidden';\n        });\n    });\n\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\n    function closeModal() {\n        reviewModal?.classList.remove('active');\n        document.body.style.overflow = 'auto';\n    }\n\n    closeModalButton?.addEventListener('click', closeModal);\n    cancelReviewButton?.addEventListener('click', closeModal);\n\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u0440\u0438 \u043A\u043B\u0438\u043A\u0435 \u0432\u043D\u0435 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u043E\u043A\u043D\u0430\n    reviewModal?.addEventListener('click', function(e) {\n        if (e.target === reviewModal) {\n            closeModal();\n        }\n    });\n\n    // \u0412\u044B\u0431\u043E\u0440 \u043E\u0446\u0435\u043D\u043A\u0438\n    gradeOptions.forEach(option => {\n        option.addEventListener('click', function() {\n            gradeOptions.forEach(opt => opt.classList.remove('selected'));\n            this.classList.add('selected');\n        });\n    });\n\n    // \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438\n    submitReviewButton?.addEventListener('click', function() {\n        const selectedGrade = document.querySelector('.grade-option.selected');\n        if (!selectedGrade) {\n            alert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043E\u0446\u0435\u043D\u043A\u0443');\n            return;\n        }\n        \n        const gradeValue = selectedGrade.getAttribute('data-value');\n        const comment = document.getElementById('review-comment')?.value;\n        \n        // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443\n        alert(`\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0432\u0435\u0440\u0435\u043D\u043E! \u041E\u0446\u0435\u043D\u043A\u0430: ${gradeValue}/5`);\n        closeModal();\n        \n        // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438\n        const card = document.querySelector('.submission-card.pending');\n        if (card) {\n            card.classList.remove('pending');\n            card.classList.add('reviewed');\n            const statusElement = card.querySelector('.submission-status');\n            if (statusElement) {\n                statusElement.textContent = '\u041F\u0440\u043E\u0432\u0435\u0440\u0435\u043D\u043E';\n                statusElement.className = 'submission-status status-reviewed';\n            }\n            \n            const actions = card.querySelector('.submission-actions');\n            if (actions) {\n                actions.innerHTML = `\n                    <button class=\"btn btn-light btn-small\">\n                        <i class=\"fas fa-eye\"></i> \u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C\n                    </button>\n                    <button class=\"btn btn-success btn-small\">\n                        <i class=\"fas fa-check\"></i> \u041E\u0446\u0435\u043D\u043A\u0430: ${gradeValue}/5\n                    </button>\n                `;\n            }\n        }\n    });\n\n    // \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430\n    saveDraftButton?.addEventListener('click', function() {\n        alert('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D');\n    });\n\n    // \u0424\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u0439\n    const filters = document.querySelectorAll('.filter-select');\n    filters.forEach(filter => {\n        filter.addEventListener('change', function() {\n            // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B\u0430 \u0431\u044B \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u044F \u0447\u0435\u0440\u0435\u0437 AJAX\n            console.log('\u0424\u0438\u043B\u044C\u0442\u0440 \u0438\u0437\u043C\u0435\u043D\u0435\u043D:', this.id, this.value);\n        });\n    });\n}", "import { showToast } from '../modules/toast.js';\r\n\r\nexport function initPracticCreation() {\r\n    // \u041E\u0431\u044A\u044F\u0432\u043B\u044F\u0435\u043C \u0412\u0421\u0415 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435 \u0432 \u043D\u0430\u0447\u0430\u043B\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0438\r\n    const subjectSelect = document.getElementById('practice-subject');\r\n    const subjectSections = document.querySelectorAll('.subject-specific-section');\r\n    const programmingLanguageGroup = document.getElementById('programming-language-group');\r\n    const codeBtn = document.getElementById('code-btn');\r\n    const currentSubjectSpan = document.getElementById('current-subject');\r\n    const examplesTitle = document.getElementById('examples-title');\r\n    const inputLabel = document.getElementById('input-label-1');\r\n    const outputLabel = document.getElementById('output-label-1');\r\n    const addRequirementBtn = document.getElementById('add-requirement-btn');\r\n    const requirementsList = document.getElementById('requirements-list');\r\n    const addTestCaseBtn = document.getElementById('add-test-case-btn');\r\n    const testCasesContainer = document.querySelector('.test-cases');\r\n    const savePracticeBtn = document.getElementById('save-practice-btn');\r\n    const previewBtn = document.querySelector('.practice-creation-navigation .btn-light');\r\n    \r\n    // Map subjects to display names\r\n    const subjectNames = {\r\n        'russian': '\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A',\r\n        'literature': '\u041B\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430',\r\n        'math': '\u041C\u0430\u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0430',\r\n        'economics': '\u042D\u043A\u043E\u043D\u043E\u043C\u0438\u043A\u0430',\r\n        'programming': '\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435'\r\n    };\r\n    \r\n    // Map subjects to labels for examples\r\n    const exampleLabels = {\r\n        'russian': { input: '\u0422\u0435\u043A\u0441\u0442 \u0437\u0430\u0434\u0430\u043D\u0438\u044F', output: '\u041F\u0440\u0438\u043C\u0435\u0440 \u043E\u0442\u0432\u0435\u0442\u0430' },\r\n        'literature': { input: '\u0412\u043E\u043F\u0440\u043E\u0441/\u0437\u0430\u0434\u0430\u043D\u0438\u0435', output: '\u041F\u0440\u0438\u043C\u0435\u0440 \u0430\u043D\u0430\u043B\u0438\u0437\u0430' },\r\n        'math': { input: '\u0423\u0441\u043B\u043E\u0432\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438', output: '\u0420\u0435\u0448\u0435\u043D\u0438\u0435/\u043E\u0442\u0432\u0435\u0442' },\r\n        'economics': { input: '\u0423\u0441\u043B\u043E\u0432\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438', output: '\u0420\u0435\u0448\u0435\u043D\u0438\u0435/\u043E\u0442\u0432\u0435\u0442' },\r\n        'programming': { input: '\u0412\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435', output: '\u041E\u0436\u0438\u0434\u0430\u0435\u043C\u044B\u0439 \u0432\u044B\u0432\u043E\u0434' }\r\n    };\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043E\u0442 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430\r\n    function updateSubjectUI() {\r\n        const selectedSubject = subjectSelect?.value;\r\n        if (!selectedSubject) return;\r\n        \r\n        // Hide all subject sections\r\n        subjectSections.forEach(section => {\r\n            section.classList.remove('active');\r\n        });\r\n        \r\n        // Show selected subject section\r\n        const selectedSection = document.getElementById(`${selectedSubject}-section`);\r\n        if (selectedSection) selectedSection.classList.add('active');\r\n        \r\n        // Update current subject in sidebar\r\n        if (currentSubjectSpan) currentSubjectSpan.textContent = subjectNames[selectedSubject];\r\n        \r\n        // Show/hide programming language selector\r\n        if (selectedSubject === 'programming') {\r\n            if (programmingLanguageGroup) programmingLanguageGroup.style.display = 'block';\r\n            if (codeBtn) codeBtn.style.display = 'flex';\r\n            if (examplesTitle) examplesTitle.textContent = '\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0435 \u0441\u043B\u0443\u0447\u0430\u0438';\r\n            if (inputLabel) inputLabel.textContent = exampleLabels[selectedSubject].input;\r\n            if (outputLabel) outputLabel.textContent = exampleLabels[selectedSubject].output;\r\n        } else {\r\n            if (programmingLanguageGroup) programmingLanguageGroup.style.display = 'none';\r\n            if (codeBtn) codeBtn.style.display = 'none';\r\n            if (examplesTitle) examplesTitle.textContent = '\u041F\u0440\u0438\u043C\u0435\u0440\u044B';\r\n            if (inputLabel) inputLabel.textContent = exampleLabels[selectedSubject].input;\r\n            if (outputLabel) outputLabel.textContent = exampleLabels[selectedSubject].output;\r\n        }\r\n        \r\n        // Update section class for subject-specific styling\r\n        const practiceCreationSection = document.querySelector('.practice-creation');\r\n        if (practiceCreationSection) {\r\n            practiceCreationSection.className = `section practice-creation subject-${selectedSubject}`;\r\n        }\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0439\r\n    function initRequirementEvents(requirementItem) {\r\n        const deleteBtn = requirementItem.querySelector('.delete-requirement');\r\n        const moveUpBtn = requirementItem.querySelector('.move-up');\r\n        const moveDownBtn = requirementItem.querySelector('.move-down');\r\n        \r\n        deleteBtn?.addEventListener('click', function() {\r\n            const confirmToast = showToast(\r\n                '\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435?', \r\n                'warning', \r\n                '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F', \r\n                0\r\n            );\r\n\r\n            confirmToast.querySelector('.toast-close').remove();\r\n\r\n            const toastActions = document.createElement('div');\r\n            toastActions.className = 'toast-actions';\r\n            toastActions.style.marginTop = '10px';\r\n            toastActions.style.display = 'flex';\r\n            toastActions.style.gap = '8px';\r\n            toastActions.style.justifyContent = 'flex-end';\r\n            \r\n            toastActions.innerHTML = `\r\n                <button class=\"btn btn-danger btn-small confirm-delete\">\u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\r\n                <button class=\"btn btn-light btn-small cancel-delete\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n            `;\r\n            \r\n            const toastContent = confirmToast.querySelector('.toast-content');\r\n            toastContent.appendChild(toastActions);\r\n\r\n            toastContent.querySelector('.confirm-delete').addEventListener('click', function() {\r\n                if (requirementsList && requirementItem.parentNode === requirementsList) {\r\n                    requirementsList.removeChild(requirementItem);\r\n                    updateRequirementsSummary();\r\n                    showToast('\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u043E', 'success', '\u0423\u0434\u0430\u043B\u0435\u043D\u043E');\r\n                }\r\n                confirmToast.remove();\r\n            });\r\n            \r\n            toastContent.querySelector('.cancel-delete').addEventListener('click', function() {\r\n                confirmToast.remove();\r\n            });\r\n        });\r\n        \r\n        moveUpBtn?.addEventListener('click', function() {\r\n            const prev = requirementItem.previousElementSibling;\r\n            if (prev && requirementsList) {\r\n                requirementsList.insertBefore(requirementItem, prev);\r\n                updateRequirementNumbers();\r\n                showToast('\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u043E \u0432\u0432\u0435\u0440\u0445', 'info', '\u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u0438\u0435');\r\n            } else {\r\n                showToast('\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0436\u0435 \u043D\u0430 \u043F\u0435\u0440\u0432\u043E\u0439 \u043F\u043E\u0437\u0438\u0446\u0438\u0438', 'warning', '\u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u0438\u0435');\r\n            }\r\n        });\r\n        \r\n        moveDownBtn?.addEventListener('click', function() {\r\n            const next = requirementItem.nextElementSibling;\r\n            if (next && requirementsList) {\r\n                requirementsList.insertBefore(next, requirementItem);\r\n                updateRequirementNumbers();\r\n                showToast('\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u043E \u0432\u043D\u0438\u0437', 'info', '\u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u0438\u0435');\r\n            } else {\r\n                showToast('\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435 \u0443\u0436\u0435 \u043D\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0439 \u043F\u043E\u0437\u0438\u0446\u0438\u0438', 'warning', '\u041F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u0438\u0435');\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u043D\u043E\u043C\u0435\u0440\u043E\u0432 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0439\r\n    function updateRequirementNumbers() {\r\n        const requirements = document.querySelectorAll('.requirement-item');\r\n        requirements.forEach((item, index) => {\r\n            // \u0415\u0441\u043B\u0438 \u043D\u0443\u0436\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u043C\u0435\u0440\u0430, \u043C\u043E\u0436\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0434\u0435\u0441\u044C\r\n        });\r\n    }\r\n\r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0432\u043E\u0434\u043A\u0438 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0439\r\n    function updateRequirementsSummary() {\r\n        const requirementsCount = document.querySelectorAll('.requirement-item').length;\r\n        const summaryElement = document.querySelector('.summary-item:nth-child(4) .summary-value');\r\n        if (summaryElement) {\r\n            summaryElement.textContent = requirementsCount;\r\n        }\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u043E\u0431\u044B\u0442\u0438\u0439 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0445 \u0441\u043B\u0443\u0447\u0430\u0435\u0432\r\n    function initTestCaseEvents(testCase) {\r\n        const deleteBtn = testCase.querySelector('.delete-test-case');\r\n        const toggleBtn = testCase.querySelector('.toggle-visibility');\r\n        const editBtn = testCase.querySelector('.edit-test-case');\r\n        \r\n        deleteBtn?.addEventListener('click', function() {\r\n            const confirmToast = showToast(\r\n                '\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439?', \r\n                'warning', \r\n                '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F', \r\n                0\r\n            );\r\n\r\n            confirmToast.querySelector('.toast-close').remove();\r\n\r\n            const toastActions = document.createElement('div');\r\n            toastActions.className = 'toast-actions';\r\n            toastActions.style.marginTop = '10px';\r\n            toastActions.style.display = 'flex';\r\n            toastActions.style.gap = '8px';\r\n            toastActions.style.justifyContent = 'flex-end';\r\n            \r\n            toastActions.innerHTML = `\r\n                <button class=\"btn btn-danger btn-small confirm-delete\">\u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\r\n                <button class=\"btn btn-light btn-small cancel-delete\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n            `;\r\n            \r\n            const toastContent = confirmToast.querySelector('.toast-content');\r\n            toastContent.appendChild(toastActions);\r\n\r\n            toastContent.querySelector('.confirm-delete').addEventListener('click', function() {\r\n                if (testCasesContainer && testCase.parentNode === testCasesContainer) {\r\n                    testCasesContainer.removeChild(testCase);\r\n                    updateTestCasesSummary();\r\n                    showToast('\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439 \u0443\u0434\u0430\u043B\u0435\u043D', 'success', '\u0423\u0434\u0430\u043B\u0435\u043D\u043E');\r\n                }\r\n                confirmToast.remove();\r\n            });\r\n            \r\n            toastContent.querySelector('.cancel-delete').addEventListener('click', function() {\r\n                confirmToast.remove();\r\n            });\r\n        });\r\n        \r\n        toggleBtn?.addEventListener('click', function() {\r\n            const isVisible = this.innerHTML.includes('fa-eye');\r\n            if (isVisible) {\r\n                this.innerHTML = '<i class=\"fas fa-eye-slash\"></i> \u0421\u043A\u0440\u044B\u0442\u044C \u043E\u0442 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432';\r\n                showToast('\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439 \u0441\u043A\u0440\u044B\u0442 \u043E\u0442 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432', 'info', '\u0412\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u044C');\r\n            } else {\r\n                this.innerHTML = '<i class=\"fas fa-eye\"></i> \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C';\r\n                showToast('\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439 \u043F\u043E\u043A\u0430\u0437\u0430\u043D \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C', 'info', '\u0412\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u044C');\r\n            }\r\n        });\r\n        \r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C\"\r\n        editBtn?.addEventListener('click', function() {\r\n            const isEditing = this.classList.contains('editing');\r\n            \r\n            if (isEditing) {\r\n                // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F\r\n                saveTestCaseEdits(testCase, this);\r\n            } else {\r\n                // \u0412\u043A\u043B\u044E\u0447\u0430\u0435\u043C \u0440\u0435\u0436\u0438\u043C \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n                enableTestCaseEditing(testCase, this);\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u044F \u0440\u0435\u0436\u0438\u043C\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0441\u043B\u0443\u0447\u0430\u044F\r\n    function enableTestCaseEditing(testCase, editButton) {\r\n        const inputElement = testCase.querySelector('.test-case-input');\r\n        const outputElement = testCase.querySelector('.test-case-output');\r\n        \r\n        // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B\u044C\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442\r\n        const originalInput = inputElement.textContent;\r\n        const originalOutput = outputElement.textContent;\r\n        \r\n        // \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C div \u043D\u0430 textarea \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n        const inputTextarea = document.createElement('textarea');\r\n        inputTextarea.className = 'form-control test-case-edit-input';\r\n        inputTextarea.value = originalInput;\r\n        inputTextarea.rows = 3;\r\n        \r\n        const outputTextarea = document.createElement('textarea');\r\n        outputTextarea.className = 'form-control test-case-edit-output';\r\n        outputTextarea.value = originalOutput;\r\n        outputTextarea.rows = 3;\r\n        \r\n        inputElement.replaceWith(inputTextarea);\r\n        outputElement.replaceWith(outputTextarea);\r\n        \r\n        // \u041C\u0435\u043D\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u043D\u0430 \"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C\"\r\n        editButton.innerHTML = '<i class=\"fas fa-save\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C';\r\n        editButton.classList.add('editing');\r\n        editButton.classList.remove('btn-light');\r\n        editButton.classList.add('btn-success');\r\n        \r\n        // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u0442\u043C\u0435\u043D\u044B\r\n        const cancelButton = document.createElement('button');\r\n        cancelButton.className = 'btn btn-warning btn-small cancel-edit';\r\n        cancelButton.innerHTML = '<i class=\"fas fa-times\"></i> \u041E\u0442\u043C\u0435\u043D\u0430';\r\n        cancelButton.style.marginLeft = '5px';\r\n        \r\n        editButton.parentNode.insertBefore(cancelButton, editButton.nextSibling);\r\n        \r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \u043E\u0442\u043C\u0435\u043D\u044B\r\n        cancelButton.addEventListener('click', function() {\r\n            // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B\r\n            const inputDiv = document.createElement('div');\r\n            inputDiv.className = 'test-case-input';\r\n            inputDiv.textContent = originalInput;\r\n            \r\n            const outputDiv = document.createElement('div');\r\n            outputDiv.className = 'test-case-output';\r\n            outputDiv.textContent = originalOutput;\r\n            \r\n            const editInput = testCase.querySelector('.test-case-edit-input');\r\n            const editOutput = testCase.querySelector('.test-case-edit-output');\r\n            \r\n            if (editInput) editInput.replaceWith(inputDiv);\r\n            if (editOutput) editOutput.replaceWith(outputDiv);\r\n            \r\n            // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n            editButton.innerHTML = '<i class=\"fas fa-edit\"></i> \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C';\r\n            editButton.classList.remove('editing', 'btn-success');\r\n            editButton.classList.add('btn-light');\r\n            \r\n            // \u0423\u0434\u0430\u043B\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u0442\u043C\u0435\u043D\u044B\r\n            cancelButton.remove();\r\n            \r\n            showToast('\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043E\u0442\u043C\u0435\u043D\u0435\u043D\u043E', 'info', '\u041E\u0442\u043C\u0435\u043D\u0430');\r\n        });\r\n        \r\n        showToast('\u0420\u0435\u0436\u0438\u043C \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0432\u043A\u043B\u044E\u0447\u0435\u043D', 'info', '\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435');\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0439 \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0441\u043B\u0443\u0447\u0430\u044F\r\n    function saveTestCaseEdits(testCase, editButton) {\r\n        const inputTextarea = testCase.querySelector('.test-case-edit-input');\r\n        const outputTextarea = testCase.querySelector('.test-case-edit-output');\r\n        const cancelButton = testCase.querySelector('.cancel-edit');\r\n        \r\n        const newInput = inputTextarea?.value || '';\r\n        const newOutput = outputTextarea?.value || '';\r\n        \r\n        // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C, \u0447\u0442\u043E \u043F\u043E\u043B\u044F \u043D\u0435 \u043F\u0443\u0441\u0442\u044B\u0435\r\n        if (!newInput.trim() || !newOutput.trim()) {\r\n            showToast('\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043F\u043E\u043B\u044F', 'warning', '\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435');\r\n            return;\r\n        }\r\n        \r\n        // \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C textarea \u043D\u0430 div \u0441 \u043D\u043E\u0432\u044B\u043C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u044B\u043C\r\n        const inputDiv = document.createElement('div');\r\n        inputDiv.className = 'test-case-input';\r\n        inputDiv.textContent = newInput;\r\n        \r\n        const outputDiv = document.createElement('div');\r\n        outputDiv.className = 'test-case-output';\r\n        outputDiv.textContent = newOutput;\r\n        \r\n        if (inputTextarea) inputTextarea.replaceWith(inputDiv);\r\n        if (outputTextarea) outputTextarea.replaceWith(outputDiv);\r\n        \r\n        // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F\r\n        editButton.innerHTML = '<i class=\"fas fa-edit\"></i> \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C';\r\n        editButton.classList.remove('editing', 'btn-success');\r\n        editButton.classList.add('btn-light');\r\n        \r\n        // \u0423\u0434\u0430\u043B\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u043E\u0442\u043C\u0435\u043D\u044B\r\n        if (cancelButton) {\r\n            cancelButton.remove();\r\n        }\r\n        \r\n        showToast('\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B', 'success', '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E');\r\n    }\r\n\r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0432\u043E\u0434\u043A\u0438 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0445 \u0441\u043B\u0443\u0447\u0430\u0435\u0432\r\n    function updateTestCasesSummary() {\r\n        const testCasesCount = document.querySelectorAll('.test-case-card').length;\r\n        const summaryElement = document.querySelector('.summary-item:nth-child(3) .summary-value');\r\n        if (summaryElement) {\r\n            summaryElement.textContent = testCasesCount;\r\n        }\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0441\u0431\u043E\u0440\u0430 \u0434\u0430\u043D\u043D\u044B\u0445 \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n    function collectPracticeData() {\r\n        return {\r\n            title: document.getElementById('practice-title')?.value || '',\r\n            description: document.getElementById('practice-description')?.value || '',\r\n            subject: subjectSelect?.value || 'programming',\r\n            requirements: Array.from(document.querySelectorAll('.requirement-item input')).map(input => input.value),\r\n            testCases: Array.from(document.querySelectorAll('.test-case-card')).map(card => ({\r\n                input: card.querySelector('.test-case-input')?.textContent || '',\r\n                output: card.querySelector('.test-case-output')?.textContent || ''\r\n            }))\r\n        };\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043F\u043E\u043A\u0430\u0437\u0430 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\n    function showPreviewModal(practiceData) {\r\n        const modal = document.createElement('div');\r\n        modal.className = 'modal-overlay active';\r\n        modal.innerHTML = `\r\n            <div class=\"modal\" style=\"max-width: 800px;\">\r\n                <div class=\"modal-header\">\r\n                    <h3 class=\"modal-title\">\u041F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0437\u0430\u0434\u0430\u043D\u0438\u044F</h3>\r\n                    <button class=\"modal-close\">&times;</button>\r\n                </div>\r\n                <div class=\"modal-body\" style=\"max-height: 60vh; overflow-y: auto;\">\r\n                    <div class=\"preview-content\">\r\n                        <h2>${practiceData.title}</h2>\r\n                        <p class=\"text-muted\">${practiceData.description}</p>\r\n                        <div class=\"preview-meta\">\r\n                            <span><strong>\u041F\u0440\u0435\u0434\u043C\u0435\u0442:</strong> ${subjectNames[practiceData.subject]}</span>\r\n                        </div>\r\n                        <hr>\r\n                        \r\n                        ${practiceData.requirements.length > 0 ? `\r\n                            <div class=\"preview-section\">\r\n                                <h4>\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u043A \u0440\u0435\u0448\u0435\u043D\u0438\u044E:</h4>\r\n                                <ul>\r\n                                    ${practiceData.requirements.map(req => `<li>${req}</li>`).join('')}\r\n                                </ul>\r\n                            </div>\r\n                        ` : ''}\r\n                        \r\n                        ${practiceData.testCases.length > 0 ? `\r\n                            <div class=\"preview-section\">\r\n                                <h4>${practiceData.subject === 'programming' ? '\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0435 \u0441\u043B\u0443\u0447\u0430\u0438' : '\u041F\u0440\u0438\u043C\u0435\u0440\u044B'}:</h4>\r\n                                ${practiceData.testCases.map((testCase, index) => `\r\n                                    <div class=\"preview-test-case\">\r\n                                        <h5>${practiceData.subject === 'programming' ? '\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439' : '\u041F\u0440\u0438\u043C\u0435\u0440'} ${index + 1}</h5>\r\n                                        <div class=\"preview-test-case-content\">\r\n                                            <div>\r\n                                                <strong>${exampleLabels[practiceData.subject].input}:</strong>\r\n                                                <div class=\"code-block\">${testCase.input}</div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <strong>${exampleLabels[practiceData.subject].output}:</strong>\r\n                                                <div class=\"code-block\">${testCase.output}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                `).join('')}\r\n                            </div>\r\n                        ` : ''}\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button class=\"btn btn-light\" id=\"preview-close\">\u0417\u0430\u043A\u0440\u044B\u0442\u044C</button>\r\n                </div>\r\n            </div>\r\n        `;\r\n        \r\n        document.body.appendChild(modal);\r\n        \r\n        modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());\r\n        modal.querySelector('#preview-close').addEventListener('click', () => modal.remove());\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) modal.remove();\r\n        });\r\n        \r\n        showToast('\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0437\u0430\u0434\u0430\u043D\u0438\u044F \u043E\u0442\u043A\u0440\u044B\u0442', 'info', '\u0413\u043E\u0442\u043E\u0432\u043E');\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0445 \u043E\u043A\u043E\u043D\r\n    function initModals() {\r\n        const settingsBtn = document.getElementById('settings-btn');\r\n        const requirementsBtn = document.getElementById('requirements-btn');\r\n        const examplesBtn = document.getElementById('examples-btn');\r\n        const hintsBtn = document.getElementById('hints-btn');\r\n        const codeBtn = document.getElementById('code-btn');\r\n        \r\n        const settingsModal = document.getElementById('settings-modal');\r\n        const requirementsModal = document.getElementById('requirements-modal');\r\n        const examplesModal = document.getElementById('examples-modal');\r\n        const hintsModal = document.getElementById('hints-modal');\r\n        const codeModal = document.getElementById('code-modal');\r\n        \r\n        const settingsClose = document.getElementById('settings-close');\r\n        const requirementsClose = document.getElementById('requirements-close');\r\n        const examplesClose = document.getElementById('examples-close');\r\n        const hintsClose = document.getElementById('hints-close');\r\n        const codeClose = document.getElementById('code-close');\r\n        \r\n        const settingsCancel = document.getElementById('settings-cancel');\r\n        const requirementsCancel = document.getElementById('requirements-cancel');\r\n        const examplesCancel = document.getElementById('examples-cancel');\r\n        const hintsCancel = document.getElementById('hints-cancel');\r\n        const codeCancel = document.getElementById('code-cancel');\r\n        \r\n        const settingsSave = document.getElementById('settings-save');\r\n        const requirementsSave = document.getElementById('requirements-save');\r\n        const examplesSave = document.getElementById('examples-save');\r\n        const hintsSave = document.getElementById('hints-save');\r\n        const codeSave = document.getElementById('code-save');\r\n\r\n        // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C, \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0442 \u043B\u0438 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B\r\n        if (!settingsBtn || !settingsModal) {\r\n            console.log('\u041C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0435 \u043E\u043A\u043D\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435');\r\n            return;\r\n        }\r\n        \r\n        // Open modals\r\n        settingsBtn.addEventListener('click', () => {\r\n            settingsModal.classList.add('active');\r\n        });\r\n        \r\n        requirementsBtn?.addEventListener('click', () => {\r\n            requirementsModal?.classList.add('active');\r\n        });\r\n        \r\n        examplesBtn?.addEventListener('click', () => {\r\n            examplesModal?.classList.add('active');\r\n        });\r\n        \r\n        hintsBtn?.addEventListener('click', () => {\r\n            hintsModal?.classList.add('active');\r\n        });\r\n        \r\n        codeBtn?.addEventListener('click', () => {\r\n            codeModal?.classList.add('active');\r\n        });\r\n        \r\n        // Close modals\r\n        function closeAllModals() {\r\n            settingsModal?.classList.remove('active');\r\n            requirementsModal?.classList.remove('active');\r\n            examplesModal?.classList.remove('active');\r\n            hintsModal?.classList.remove('active');\r\n            codeModal?.classList.remove('active');\r\n        }\r\n        \r\n        settingsClose?.addEventListener('click', closeAllModals);\r\n        requirementsClose?.addEventListener('click', closeAllModals);\r\n        examplesClose?.addEventListener('click', closeAllModals);\r\n        hintsClose?.addEventListener('click', closeAllModals);\r\n        codeClose?.addEventListener('click', closeAllModals);\r\n        \r\n        settingsCancel?.addEventListener('click', closeAllModals);\r\n        requirementsCancel?.addEventListener('click', closeAllModals);\r\n        examplesCancel?.addEventListener('click', closeAllModals);\r\n        hintsCancel?.addEventListener('click', closeAllModals);\r\n        codeCancel?.addEventListener('click', closeAllModals);\r\n        \r\n        // Save actions\r\n        settingsSave?.addEventListener('click', () => {\r\n            showToast('\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0437\u0430\u0434\u0430\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B!', 'success', '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438');\r\n            closeAllModals();\r\n        });\r\n        \r\n        requirementsSave?.addEventListener('click', () => {\r\n            showToast('\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B!', 'success', '\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F');\r\n            closeAllModals();\r\n        });\r\n        \r\n        examplesSave?.addEventListener('click', () => {\r\n            showToast('\u041F\u0440\u0438\u043C\u0435\u0440\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B!', 'success', '\u041F\u0440\u0438\u043C\u0435\u0440\u044B');\r\n            closeAllModals();\r\n        });\r\n        \r\n        hintsSave?.addEventListener('click', () => {\r\n            showToast('\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B!', 'success', '\u041F\u043E\u0434\u0441\u043A\u0430\u0437\u043A\u0438');\r\n            closeAllModals();\r\n        });\r\n        \r\n        codeSave?.addEventListener('click', () => {\r\n            showToast('\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043E\u0434 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D!', 'success', '\u041A\u043E\u0434');\r\n            closeAllModals();\r\n        });\r\n        \r\n        // Close modal when clicking outside\r\n        window.addEventListener('click', (e) => {\r\n            if (e.target.classList.contains('modal-overlay')) {\r\n                closeAllModals();\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u0435\u043C \u043F\u0430\u0440\u043E\u043B\u044F \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445\r\n    function initPasswordFieldManagement() {\r\n        const requireRegistration = document.getElementById('require-registration');\r\n        const passwordField = document.getElementById('password-field');\r\n        \r\n        // \u041F\u0440\u043E\u0432\u0435\u0440\u044F\u0435\u043C, \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0442 \u043B\u0438 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435\r\n        if (!requireRegistration || !passwordField) {\r\n            return; // \u042D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B, \u0432\u044B\u0445\u043E\u0434\u0438\u043C \u0438\u0437 \u0444\u0443\u043D\u043A\u0446\u0438\u0438\r\n        }\r\n        \r\n        function togglePasswordField() {\r\n            if (requireRegistration.checked) {\r\n                passwordField.style.display = 'block';\r\n            } else {\r\n                passwordField.style.display = 'none';\r\n            }\r\n        }\r\n        \r\n        // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\r\n        togglePasswordField();\r\n        \r\n        // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u0447\u0435\u043A\u0431\u043E\u043A\u0441\u0430\r\n        requireRegistration.addEventListener('change', togglePasswordField);\r\n        \r\n        // \u0422\u0430\u043A\u0436\u0435 \u0434\u043E\u0431\u0430\u0432\u0438\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A\r\n        const settingsSave = document.getElementById('settings-save');\r\n        if (settingsSave) {\r\n            settingsSave.addEventListener('click', function() {\r\n                // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u0430\u0440\u043E\u043B\u044F\r\n                if (requireRegistration.checked) {\r\n                    const password = document.getElementById('practice-password')?.value;\r\n                    if (password) {\r\n                        showToast('\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043B\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D', 'success', '\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438');\r\n                    } else {\r\n                        showToast('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C \u0434\u043B\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F', 'warning', '\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435');\r\n                        return; // \u041D\u0435 \u0437\u0430\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E \u0435\u0441\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C \u043D\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0445 \u0441\u043B\u0443\u0447\u0430\u0435\u0432\r\n    function initExistingTestCases() {\r\n        const testCases = document.querySelectorAll('.test-case-card');\r\n        \r\n        testCases.forEach(testCase => {\r\n            const toggleBtn = testCase.querySelector('.btn-light');\r\n            const editBtn = testCase.querySelector('.btn-light:nth-child(1)');\r\n            const deleteBtn = testCase.querySelector('.btn-danger');\r\n            \r\n            // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C\"\r\n            toggleBtn?.addEventListener('click', function() {\r\n                const isVisible = this.innerHTML.includes('fa-eye');\r\n                if (isVisible) {\r\n                    this.innerHTML = '<i class=\"fas fa-eye-slash\"></i> \u0421\u043A\u0440\u044B\u0442\u044C \u043E\u0442 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432';\r\n                    showToast('\u041F\u0440\u0438\u043C\u0435\u0440 \u0441\u043A\u0440\u044B\u0442 \u043E\u0442 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u043E\u0432', 'info', '\u0412\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u044C');\r\n                } else {\r\n                    this.innerHTML = '<i class=\"fas fa-eye\"></i> \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C';\r\n                    showToast('\u041F\u0440\u0438\u043C\u0435\u0440 \u043F\u043E\u043A\u0430\u0437\u0430\u043D \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C', 'info', '\u0412\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u044C');\r\n                }\r\n            });\r\n            \r\n            // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C\"\r\n            editBtn?.addEventListener('click', function() {\r\n                const testCaseContent = this.closest('.test-case-card').querySelector('.test-case-content');\r\n                const inputs = testCaseContent.querySelectorAll('.test-case-input, .test-case-output');\r\n                \r\n                inputs.forEach(input => {\r\n                    const currentText = input.textContent;\r\n                    input.innerHTML = `<textarea class=\"form-control\" style=\"height: 80px;\">${currentText}</textarea>`;\r\n                });\r\n                \r\n                // \u0417\u0430\u043C\u0435\u043D\u044F\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\r\n                this.innerHTML = '<i class=\"fas fa-save\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C';\r\n                this.classList.remove('btn-light');\r\n                this.classList.add('btn-success');\r\n                \r\n                // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B\u044C\u043D\u044B\u0439 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\r\n                const originalClickHandler = this.onclick;\r\n                this.onclick = null;\r\n                \r\n                this.addEventListener('click', function saveHandler() {\r\n                    const textareas = testCaseContent.querySelectorAll('textarea');\r\n                    textareas.forEach((textarea, index) => {\r\n                        const div = document.createElement('div');\r\n                        div.className = index === 0 ? 'test-case-input' : 'test-case-output';\r\n                        div.textContent = textarea.value;\r\n                        div.style.border = 'none';\r\n                        div.style.padding = '8px';\r\n                        div.style.backgroundColor = 'transparent';\r\n                        textarea.parentNode.replaceChild(div, textarea);\r\n                    });\r\n                    \r\n                    // \u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043C \u043A\u043D\u043E\u043F\u043A\u0443 \u0432 \u0438\u0441\u0445\u043E\u0434\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435\r\n                    this.innerHTML = '<i class=\"fas fa-edit\"></i> \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C';\r\n                    this.classList.remove('btn-success');\r\n                    this.classList.add('btn-light');\r\n                    this.onclick = originalClickHandler;\r\n                    \r\n                    showToast('\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B', 'success', '\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435');\r\n                }, { once: true });\r\n            });\r\n            \r\n            // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043A\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F\r\n            deleteBtn?.addEventListener('click', function() {\r\n                const testCaseCard = this.closest('.test-case-card');\r\n                const confirmToast = showToast(\r\n                    '\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u043F\u0440\u0438\u043C\u0435\u0440?', \r\n                    'warning', \r\n                    '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F', \r\n                    0\r\n                );\r\n\r\n                confirmToast.querySelector('.toast-close').remove();\r\n\r\n                const toastActions = document.createElement('div');\r\n                toastActions.className = 'toast-actions';\r\n                toastActions.style.marginTop = '10px';\r\n                toastActions.style.display = 'flex';\r\n                toastActions.style.gap = '8px';\r\n                toastActions.style.justifyContent = 'flex-end';\r\n                \r\n                toastActions.innerHTML = `\r\n                    <button class=\"btn btn-danger btn-small confirm-delete\">\u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\r\n                    <button class=\"btn btn-light btn-small cancel-delete\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n                `;\r\n                \r\n                const toastContent = confirmToast.querySelector('.toast-content');\r\n                toastContent.appendChild(toastActions);\r\n\r\n                toastContent.querySelector('.confirm-delete').addEventListener('click', function() {\r\n                    testCaseCard.remove();\r\n                    updateTestCasesSummary();\r\n                    showToast('\u041F\u0440\u0438\u043C\u0435\u0440 \u0443\u0434\u0430\u043B\u0435\u043D', 'success', '\u0423\u0434\u0430\u043B\u0435\u043D\u043E');\r\n                    confirmToast.remove();\r\n                });\r\n                \r\n                toastContent.querySelector('.cancel-delete').addEventListener('click', function() {\r\n                    confirmToast.remove();\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    // === \u041E\u0421\u041D\u041E\u0412\u041D\u041E\u0419 \u041A\u041E\u0414 \u0418\u041D\u0418\u0426\u0418\u0410\u041B\u0418\u0417\u0410\u0426\u0418\u0418 ===\r\n\r\n    // Initial call to set up UI\r\n    updateSubjectUI();\r\n    \r\n    // Add event listener for subject change\r\n    subjectSelect?.addEventListener('change', updateSubjectUI);\r\n    \r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F\r\n    addRequirementBtn?.addEventListener('click', function() {\r\n        if (!requirementsList) return;\r\n        \r\n        const newRequirement = document.createElement('li');\r\n        newRequirement.className = 'requirement-item';\r\n        newRequirement.innerHTML = `\r\n            <div class=\"requirement-text\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435\">\r\n            </div>\r\n            <div class=\"requirement-actions\">\r\n                <button class=\"btn btn-light btn-small move-up\"><i class=\"fas fa-arrow-up\"></i></button>\r\n                <button class=\"btn btn-light btn-small move-down\"><i class=\"fas fa-arrow-down\"></i></button>\r\n                <button class=\"btn btn-danger btn-small delete-requirement\"><i class=\"fas fa-trash\"></i></button>\r\n            </div>\r\n        `;\r\n        \r\n        requirementsList.appendChild(newRequirement);\r\n        \r\n        // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043D\u043E\u0432\u043E\u0439 \u043A\u043D\u043E\u043F\u043A\u0438\r\n        initRequirementEvents(newRequirement);\r\n        updateRequirementsSummary();\r\n        showToast('\u041D\u043E\u0432\u043E\u0435 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E', 'success', '\u0422\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u0435');\r\n    });\r\n\r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u043F\u0440\u0438\u043C\u0435\u0440\u0430/\u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0441\u043B\u0443\u0447\u0430\u044F\r\n    addTestCaseBtn?.addEventListener('click', function() {\r\n        if (!testCasesContainer) return;\r\n        \r\n        const selectedSubject = subjectSelect?.value || 'programming';\r\n        const testCases = document.querySelectorAll('.test-case-card');\r\n        const newTestCaseNumber = testCases.length + 1;\r\n        \r\n        const newTestCase = document.createElement('div');\r\n        newTestCase.className = 'test-case-card';\r\n        newTestCase.innerHTML = `\r\n            <div class=\"test-case-header\">\r\n                <div class=\"test-case-title\">${selectedSubject === 'programming' ? '\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439' : '\u041F\u0440\u0438\u043C\u0435\u0440'} ${newTestCaseNumber}</div>\r\n                <div>\r\n                    <button class=\"btn btn-light btn-small toggle-visibility\"><i class=\"fas fa-eye\"></i> \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430\u043C</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"test-case-content\">\r\n                <div>\r\n                    <div class=\"form-label\">${exampleLabels[selectedSubject].input}</div>\r\n                    <div class=\"test-case-input\">${selectedSubject === 'programming' ? '\u0412\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435...' : '\u0423\u0441\u043B\u043E\u0432\u0438\u0435...'}</div>\r\n                </div>\r\n                <div>\r\n                    <div class=\"form-label\">${exampleLabels[selectedSubject].output}</div>\r\n                    <div class=\"test-case-output\">${selectedSubject === 'programming' ? '\u041E\u0436\u0438\u0434\u0430\u0435\u043C\u044B\u0439 \u0432\u044B\u0432\u043E\u0434...' : '\u0420\u0435\u0448\u0435\u043D\u0438\u0435...'}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"test-case-actions\">\r\n                <button class=\"btn btn-light btn-small edit-test-case\"><i class=\"fas fa-edit\"></i> \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C</button>\r\n                <button class=\"btn btn-danger btn-small delete-test-case\"><i class=\"fas fa-trash\"></i> \u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\r\n            </div>\r\n        `;\r\n        \r\n        testCasesContainer.appendChild(newTestCase);\r\n        \r\n        // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u0434\u043B\u044F \u043D\u043E\u0432\u043E\u0433\u043E \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0441\u043B\u0443\u0447\u0430\u044F\r\n        initTestCaseEvents(newTestCase);\r\n        updateTestCasesSummary();\r\n        showToast('\u041D\u043E\u0432\u044B\u0439 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D', 'success', '\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0441\u043B\u0443\u0447\u0430\u0439');\r\n    });\r\n\r\n    // \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n    savePracticeBtn?.addEventListener('click', function() {\r\n        const practiceTitle = document.getElementById('practice-title')?.value;\r\n        const selectedSubject = subjectSelect?.value;\r\n        \r\n        if (!practiceTitle) {\r\n            showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F', 'warning', '\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445');\r\n            document.getElementById('practice-title')?.focus();\r\n            return;\r\n        }\r\n        \r\n        if (!selectedSubject) {\r\n            showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442', 'warning', '\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445');\r\n            return;\r\n        }\r\n        \r\n        const saveButton = this;\r\n        const originalText = saveButton.innerHTML;\r\n        saveButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435...';\r\n        saveButton.disabled = true;\r\n        \r\n        // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u043A\u043E\u0434 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n        setTimeout(() => {\r\n            saveButton.innerHTML = originalText;\r\n            saveButton.disabled = false;\r\n            \r\n            showToast(`\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \"${practiceTitle}\" \u043F\u043E \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0443 \"${subjectNames[selectedSubject]}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E!`, 'success', '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E');\r\n        }, 1500);\r\n    });\r\n\r\n    // \u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n    previewBtn?.addEventListener('click', function() {\r\n        const practiceData = collectPracticeData();\r\n        \r\n        if (!practiceData.title) {\r\n            showToast('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430', 'warning', '\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445');\r\n            return;\r\n        }\r\n        \r\n        showPreviewModal(practiceData);\r\n    });\r\n\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432\r\n    document.querySelectorAll('.requirement-item').forEach(initRequirementEvents);\r\n    document.querySelectorAll('.test-case-card').forEach(initTestCaseEvents);\r\n    updateRequirementsSummary();\r\n    updateTestCasesSummary();\r\n\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0445 \u043E\u043A\u043E\u043D\r\n    initModals();\r\n\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u043F\u0430\u0440\u043E\u043B\u0435\u043C\r\n    initPasswordFieldManagement();\r\n\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u0430 \u0434\u043B\u044F \u043A\u043D\u043E\u043F\u043E\u043A \u0432 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0445 \u0441\u043B\u0443\u0447\u0430\u044F\u0445\r\n    initExistingTestCases();\r\n\r\n    // \u0410\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\r\n    let autoSaveTimeout;\r\n    const autoSaveElements = document.querySelectorAll('#practice-title, #practice-description, .requirement-item input, .test-case-input, .test-case-output');\r\n    \r\n    autoSaveElements.forEach(element => {\r\n        element.addEventListener('input', function() {\r\n            clearTimeout(autoSaveTimeout);\r\n            autoSaveTimeout = setTimeout(() => {\r\n                const data = collectPracticeData();\r\n                localStorage.setItem('practice_autosave', JSON.stringify(data));\r\n            }, 2000);\r\n        });\r\n    });\r\n\r\n    // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0430\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F\r\n    const savedPractice = localStorage.getItem('practice_autosave');\r\n    if (savedPractice) {\r\n        try {\r\n            const practiceData = JSON.parse(savedPractice);\r\n            const restoreToast = showToast(\r\n                '\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u043E \u0430\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u0435. \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C?', \r\n                'info', \r\n                '\u0410\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435', \r\n                5000\r\n            );\r\n\r\n            restoreToast.querySelector('.toast-close').remove();\r\n\r\n            const toastActions = document.createElement('div');\r\n            toastActions.className = 'toast-actions';\r\n            toastActions.style.marginTop = '10px';\r\n            toastActions.style.display = 'flex';\r\n            toastActions.style.gap = '8px';\r\n            toastActions.style.justifyContent = 'flex-end';\r\n            \r\n            toastActions.innerHTML = `\r\n                <button class=\"btn btn-success btn-small confirm-restore\">\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C</button>\r\n                <button class=\"btn btn-light btn-small cancel-restore\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\r\n            `;\r\n            \r\n            const toastContent = restoreToast.querySelector('.toast-content');\r\n            toastContent.appendChild(toastActions);\r\n\r\n            restoreToast.querySelector('.confirm-restore').addEventListener('click', function() {\r\n                // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0434\u0430\u043D\u043D\u044B\u0445\r\n                document.getElementById('practice-title').value = practiceData.title;\r\n                document.getElementById('practice-description').value = practiceData.description;\r\n                subjectSelect.value = practiceData.subject;\r\n                updateSubjectUI();\r\n                \r\n                showToast('\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E \u0438\u0437 \u0430\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F', 'success', '\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E');\r\n                restoreToast.remove();\r\n            });\r\n            \r\n            restoreToast.querySelector('.cancel-restore').addEventListener('click', function() {\r\n                localStorage.removeItem('practice_autosave');\r\n                showToast('\u0410\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u043E\u0447\u0438\u0449\u0435\u043D\u043E', 'info', '\u041E\u0442\u043C\u0435\u043D\u0435\u043D\u043E');\r\n                restoreToast.remove();\r\n            });\r\n        } catch (e) {\r\n            console.error('Error restoring autosave:', e);\r\n        }\r\n    }\r\n\r\n    // \u041E\u0447\u0438\u0441\u0442\u043A\u0430 \u0430\u0432\u0442\u043E\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043F\u0440\u0438 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u043C \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438\r\n    savePracticeBtn?.addEventListener('click', function() {\r\n        localStorage.removeItem('practice_autosave');\r\n    });\r\n}", "// practic-pages.js\nimport { initPracticExecution } from '../modules/practic-execution.js';\nimport { initPracticReview } from '../modules/practic-review.js';\nimport { initPracticCreation } from '../modules/practic-creation.js';\nimport { initCommonAnimations, initPracticeAnimations } from '../modules/animations.js';\nimport { initToastSystem } from '../modules/toast.js';\n\n// \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u0435 \u0442\u0438\u043F\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0438 \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0433\u043E \u043C\u043E\u0434\u0443\u043B\u044F\nfunction initPracticePage() {\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u043E\u0431\u0449\u0438\u0435 \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0438\n    initCommonAnimations();\n    \n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u0443\u0435\u043C \u0441\u0438\u0441\u0442\u0435\u043C\u0443 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439\n    initToastSystem();\n    \n    // \u041E\u043F\u0440\u0435\u0434\u0435\u043B\u044F\u0435\u043C \u0442\u0438\u043F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043F\u043E \u043D\u0430\u043B\u0438\u0447\u0438\u044E \u0441\u043F\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432\n    if (document.getElementById('code-input') && document.getElementById('run-btn')) {\n        // \u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F (practic-detail.html)\n        console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F');\n        initPracticExecution(); // \u2190 \u042D\u0422\u0410 \u0421\u0422\u0420\u041E\u041A\u0410 \u0412\u0410\u0416\u041D\u0410!\n    } else if (document.getElementById('review-modal') || document.querySelector('.submission-card')) {\n        // \u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u0437\u0430\u0434\u0430\u043D\u0438\u0439 (practic-check.html)\n        console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u0437\u0430\u0434\u0430\u043D\u0438\u0439');\n        initPracticReview();\n    } else if (document.getElementById('practice-subject') || document.querySelector('.practice-creation')) {\n        // \u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F (create-practic.html)\n        console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F');\n        initPracticCreation();\n    } else if (document.querySelector('.practice-grid') && document.querySelector('.subject-card')) {\n        // \u0413\u043B\u0430\u0432\u043D\u0430\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043F\u0440\u0430\u043A\u0442\u0438\u043A\u0438 (practic.html)\n        console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0433\u043B\u0430\u0432\u043D\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043F\u0440\u0430\u043A\u0442\u0438\u043A\u0438');\n        initPracticOverview();\n    } else if (document.querySelector('.topics-container') && document.querySelector('.topic-card')) {\n        // \u0421\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u0441\u043F\u0438\u0441\u043A\u0430 \u0437\u0430\u0434\u0430\u043D\u0438\u0439 (practic-list.html)\n        console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0441\u043F\u0438\u0441\u043A\u0430 \u0437\u0430\u0434\u0430\u043D\u0438\u0439');\n        initPracticeAnimations();\n    } else {\n        console.log('\u0422\u0438\u043F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043F\u0440\u0430\u043A\u0442\u0438\u043A\u0438 \u043D\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D');\n    }\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0433\u043B\u0430\u0432\u043D\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043F\u0440\u0430\u043A\u0442\u0438\u043A\u0438\nfunction initPracticOverview() {\n    console.log('\u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0433\u043B\u0430\u0432\u043D\u043E\u0439 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043F\u0440\u0430\u043A\u0442\u0438\u043A\u0438');\n    \n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0439 \u0434\u043B\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u043E\u0432\n    const subjectCards = document.querySelectorAll('.subject-card');\n    \n    subjectCards.forEach(card => {\n        card.addEventListener('mouseenter', function() {\n            this.style.transform = 'translateY(-10px) scale(1.02)';\n            this.style.transition = 'transform 0.3s ease';\n        });\n        \n        card.addEventListener('mouseleave', function() {\n            this.style.transform = 'translateY(0) scale(1)';\n        });\n        \n        // \u041A\u043B\u0438\u043A \u043F\u043E \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430\n        card.addEventListener('click', function(e) {\n            if (!e.target.classList.contains('btn')) {\n                const link = this.querySelector('a');\n                if (link) {\n                    window.location.href = link.getAttribute('href');\n                }\n            }\n        });\n    });\n\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u043E \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430\u043C\n    const searchInput = document.querySelector('.search-input');\n    if (searchInput) {\n        searchInput.addEventListener('input', function() {\n            const searchTerm = this.value.toLowerCase();\n            const cards = document.querySelectorAll('.subject-card');\n            \n            cards.forEach(card => {\n                const title = card.querySelector('.subject-title').textContent.toLowerCase();\n                const description = card.querySelector('.subject-description').textContent.toLowerCase();\n                \n                if (title.includes(searchTerm) || description.includes(searchTerm)) {\n                    card.style.display = 'block';\n                } else {\n                    card.style.display = 'none';\n                }\n            });\n        });\n    }\n\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0444\u0438\u043B\u044C\u0442\u0440\u043E\u0432\n    const filterButtons = document.querySelectorAll('.filter-btn');\n    filterButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            // \u0423\u0434\u0430\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u0443 \u0432\u0441\u0435\u0445 \u043A\u043D\u043E\u043F\u043E\u043A\n            filterButtons.forEach(btn => btn.classList.remove('active'));\n            // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u0442\u0435\u043A\u0443\u0449\u0435\u0439 \u043A\u043D\u043E\u043F\u043A\u0435\n            this.classList.add('active');\n            \n            const filter = this.getAttribute('data-filter');\n            filterSubjects(filter);\n        });\n    });\n\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u043E\u0432\n    function filterSubjects(filter) {\n        const cards = document.querySelectorAll('.subject-card');\n        \n        cards.forEach(card => {\n            if (filter === 'all') {\n                card.style.display = 'block';\n            } else {\n                const subjectType = card.getAttribute('data-subject');\n                if (subjectType === filter) {\n                    card.style.display = 'block';\n                } else {\n                    card.style.display = 'none';\n                }\n            }\n        });\n    }\n\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438 \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441\u0430\n    initProgressStats();\n}\n\n// \u0424\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438 \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441\u0430\nfunction initProgressStats() {\n    const progressBars = document.querySelectorAll('.progress-bar');\n    \n    progressBars.forEach(bar => {\n        const progress = bar.getAttribute('data-progress');\n        bar.style.width = progress + '%';\n        \n        // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441-\u0431\u0430\u0440\u0430\n        setTimeout(() => {\n            bar.style.transition = 'width 1s ease-in-out';\n        }, 100);\n    });\n}\n\n// \u042D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u0443\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0432 main.js\nexport {\n    initPracticePage,\n    initPracticExecution,\n    initPracticReview,\n    initPracticCreation,\n    initPracticOverview,\n};\n\n// \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043C\u043E\u0434\u0443\u043B\u044F\ndocument.addEventListener('DOMContentLoaded', initPracticePage);", "let toastContainer;\n\nfunction initToastSystem() {\n    if (!document.querySelector('.toast-container')) {\n        toastContainer = document.createElement('div');\n        toastContainer.className = 'toast-container';\n        document.body.appendChild(toastContainer);\n    } else {\n        toastContainer = document.querySelector('.toast-container');\n    }\n}\n\nfunction showToast(message, type = 'success', title = '', duration = 4000) {\n    if (!toastContainer) initToastSystem();\n\n    const toast = document.createElement('div');\n    toast.className = `toast ${type}`;\n    \n    const icons = {\n        success: 'fas fa-check-circle',\n        warning: 'fas fa-exclamation-triangle',\n        error: 'fas fa-times-circle',\n        info: 'fas fa-info-circle'\n    };\n\n    toast.innerHTML = `\n        <div class=\"toast-icon\">\n            <i class=\"${icons[type] || icons.info}\"></i>\n        </div>\n        <div class=\"toast-content\">\n            ${title ? `<div class=\"toast-title\">${title}</div>` : ''}\n            <p class=\"toast-message\">${message}</p>\n        </div>\n        <button class=\"toast-close\" onclick=\"this.parentElement.remove()\">\n            <i class=\"fas fa-times\"></i>\n        </button>\n    `;\n\n    toastContainer.appendChild(toast);\n\n    setTimeout(() => toast.classList.add('show'), 10);\n\n    if (duration > 0) {\n        setTimeout(() => {\n            toast.classList.remove('show');\n            setTimeout(() => toast.remove(), 300);\n        }, duration);\n    }\n\n    return toast;\n}\n\nexport function initTestGeneration() {\n    const questionCountSlider = document.getElementById('questionCount');\n    const questionCountDisplay = document.getElementById('questionCountDisplay');\n    const questionCountValue = document.getElementById('questionCountValue');\n    const generateButton = document.getElementById('generateButton');\n    const saveButton = document.getElementById('saveButton');\n    const resetButton = document.getElementById('resetButton');\n    const previewContent = document.getElementById('previewContent');\n    const testForm = document.getElementById('testForm');\n    \n    if (!questionCountSlider || !generateButton) return;\n\n    questionCountSlider.addEventListener('input', function() {\n        const value = this.value;\n        if (questionCountDisplay) questionCountDisplay.textContent = value;\n        if (questionCountValue) questionCountValue.textContent = value;\n    });\n\n    generateButton.addEventListener('click', function() {\n        generateTest();\n    });\n\n    if (resetButton) {\n        resetButton.addEventListener('click', function() {\n            if (testForm) testForm.reset();\n            if (questionCountDisplay) questionCountDisplay.textContent = '10';\n            if (questionCountValue) questionCountValue.textContent = '10';\n            if (questionCountSlider) questionCountSlider.value = '10';\n            if (previewContent) {\n                previewContent.innerHTML = `\n                    <div class=\"preview-placeholder\">\n                        <i class=\"fas fa-file-alt\"></i>\n                        <p>\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0442\u0435\u0441\u0442\u0430 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \"\u0421\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\" \u0434\u043B\u044F \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430</p>\n                    </div>\n                `;\n            }\n            if (saveButton) saveButton.disabled = true;\n            showToast('\u0424\u043E\u0440\u043C\u0430 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u0430', 'info', '\u0421\u0431\u0440\u043E\u0441');\n        });\n    }\n\n    if (saveButton) {\n        saveButton.addEventListener('click', function() {\n            saveGeneratedTest();\n        });\n    }\n}\n\nfunction generateTest() {\n    const previewContent = document.getElementById('previewContent');\n    const saveButton = document.getElementById('saveButton');\n    \n    if (!previewContent) return;\n\n    previewContent.innerHTML = `\n        <div class=\"preview-placeholder\">\n            <i class=\"fas fa-spinner fa-spin\"></i>\n            <p>\u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u044F \u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0442\u0435\u0441\u0442...</p>\n        </div>\n    `;\n\n    setTimeout(() => {\n        const testTitle = document.getElementById('testTitle')?.value || '\u041D\u043E\u0432\u044B\u0439 \u0442\u0435\u0441\u0442';\n        const questionCount = document.getElementById('questionCount')?.value || '5';\n        const testLevel = document.getElementById('testLevel')?.value || 'intermediate';\n\n        let previewHTML = `\n            <h3>${testTitle}</h3>\n            <p><strong>\u0423\u0440\u043E\u0432\u0435\u043D\u044C:</strong> ${getLevelText(testLevel)} | <strong>\u0412\u043E\u043F\u0440\u043E\u0441\u043E\u0432:</strong> ${questionCount}</p>\n            <hr>\n        `;\n\n        for (let i = 1; i <= Math.min(questionCount, 5); i++) {\n            previewHTML += generateQuestion(i);\n        }\n        \n        if (questionCount > 5) {\n            previewHTML += `<p>... \u0438 \u0435\u0449\u0435 ${questionCount - 5} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432</p>`;\n        }\n        \n        previewContent.innerHTML = previewHTML;\n        if (saveButton) saveButton.disabled = false;\n        \n        showToast(`\u0422\u0435\u0441\u0442 \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D: ${questionCount} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432`, 'success', '\u0413\u043E\u0442\u043E\u0432\u043E');\n    }, 1500);\n}\n\nfunction generateQuestion(number) {\n    const questionTypes = ['multiple', 'truefalse'];\n    const questionType = questionTypes[Math.floor(Math.random() * questionTypes.length)];\n    \n    if (questionType === 'multiple') {\n        return `\n            <div class=\"test-question\">\n                <div class=\"question-text\">${number}. \u041A\u0430\u043A\u043E\u0439 \u0442\u0438\u043F \u0434\u0430\u043D\u043D\u044B\u0445 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0434\u043B\u044F \u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0446\u0435\u043B\u044B\u0445 \u0447\u0438\u0441\u0435\u043B \u0432 Python?</div>\n                <ul class=\"options-list\">\n                    <li class=\"option-item\">\n                        <div class=\"option-label\">\n                            <span class=\"option-letter\">A</span>\n                            <span>int</span>\n                        </div>\n                    </li>\n                    <li class=\"option-item correct\">\n                        <div class=\"option-label\">\n                            <span class=\"option-letter\">B</span>\n                            <span>float</span>\n                        </div>\n                    </li>\n                    <li class=\"option-item\">\n                        <div class=\"option-label\">\n                            <span class=\"option-letter\">C</span>\n                            <span>str</span>\n                        </div>\n                    </li>\n                    <li class=\"option-item\">\n                        <div class=\"option-label\">\n                            <span class=\"option-letter\">D</span>\n                            <span>bool</span>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        `;\n    } else {\n        return `\n            <div class=\"test-question\">\n                <div class=\"question-text\">${number}. \u0412 Python \u0441\u043F\u0438\u0441\u043A\u0438 \u044F\u0432\u043B\u044F\u044E\u0442\u0441\u044F \u0438\u0437\u043C\u0435\u043D\u044F\u0435\u043C\u044B\u043C\u0438 \u043E\u0431\u044A\u0435\u043A\u0442\u0430\u043C\u0438.</div>\n                <ul class=\"options-list\">\n                    <li class=\"option-item correct\">\n                        <div class=\"option-label\">\n                            <span class=\"option-letter\">A</span>\n                            <span>\u0412\u0435\u0440\u043D\u043E</span>\n                        </div>\n                    </li>\n                    <li class=\"option-item\">\n                        <div class=\"option-label\">\n                            <span class=\"option-letter\">B</span>\n                            <span>\u041D\u0435\u0432\u0435\u0440\u043D\u043E</span>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        `;\n    }\n}\n\nfunction getLevelText(level) {\n    switch(level) {\n        case 'beginner': return '\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439';\n        case 'intermediate': return '\u0421\u0440\u0435\u0434\u043D\u0438\u0439';\n        case 'advanced': return '\u041F\u0440\u043E\u0434\u0432\u0438\u043D\u0443\u0442\u044B\u0439';\n        default: return '\u0421\u0440\u0435\u0434\u043D\u0438\u0439';\n    }\n}\n\nfunction saveGeneratedTest() {\n    const saveButton = document.getElementById('saveButton');\n    if (!saveButton) return;\n\n    const saveButtonText = saveButton.innerHTML;\n    saveButton.innerHTML = '<i class=\"fas fa-check\"></i> \u0422\u0435\u0441\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D!';\n    saveButton.disabled = true;\n\n    setTimeout(() => {\n        saveButton.innerHTML = saveButtonText;\n        saveButton.disabled = false;\n\n        showToast('\u0422\u0435\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D! \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430\u0439\u0442\u0438 \u0435\u0433\u043E \u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u0435 \"\u041C\u043E\u0438 \u0442\u0435\u0441\u0442\u044B\".', 'success', '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E');\n    }, 2000);\n}\n\nexport function removeQuestion(questionNumber) {\n    const confirmToast = showToast(\n        `\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 ${questionNumber}?`, \n        'warning', \n        '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F', \n        0\n    );\n\n    confirmToast.querySelector('.toast-close').remove();\n\n    const toastActions = document.createElement('div');\n    toastActions.className = 'toast-actions';\n    toastActions.style.marginTop = '10px';\n    toastActions.style.display = 'flex';\n    toastActions.style.gap = '8px';\n    toastActions.style.justifyContent = 'flex-end';\n    \n    toastActions.innerHTML = `\n        <button class=\"btn btn-danger btn-small confirm-delete\">\u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\n        <button class=\"btn btn-light btn-small cancel-delete\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n    `;\n    \n    const toastContent = confirmToast.querySelector('.toast-content');\n    toastContent.appendChild(toastActions);\n\n    confirmToast.querySelector('.confirm-delete').addEventListener('click', function() {\n        const questionCards = document.querySelectorAll('.question-card');\n        if (questionCards[questionNumber - 1]) {\n            questionCards[questionNumber - 1].remove();\n            updateQuestionNumbers();\n            updateProgress();\n            updateNavigation();\n            showToast(`\u0412\u043E\u043F\u0440\u043E\u0441 ${questionNumber} \u0443\u0434\u0430\u043B\u0435\u043D`, 'success', '\u0423\u0441\u043F\u0435\u0448\u043D\u043E');\n        }\n        confirmToast.remove();\n    });\n    \n    confirmToast.querySelector('.cancel-delete').addEventListener('click', function() {\n        confirmToast.remove();\n    });\n}\n\nfunction updateQuestionNumbers() {\n    const questionCards = document.querySelectorAll('.question-card');\n    \n    questionCards.forEach((card, index) => {\n        const questionNumber = card.querySelector('.question-number');\n        if (questionNumber) {\n            questionNumber.textContent = `\u0412\u043E\u043F\u0440\u043E\u0441 ${index + 1}`;\n        }\n\n        const deleteBtn = card.querySelector('.btn-danger');\n        if (deleteBtn) {\n            deleteBtn.setAttribute('onclick', `removeQuestion(${index + 1})`);\n        }\n\n        const textarea = card.querySelector('textarea[id^=\"question-text-\"]');\n        if (textarea) {\n            textarea.id = `question-text-${index + 1}`;\n            const label = card.querySelector('label[for^=\"question-text-\"]');\n            if (label) {\n                label.setAttribute('for', `question-text-${index + 1}`);\n            }\n        }\n    });\n\n    const totalQuestionsElement = document.getElementById('total-questions');\n    if (totalQuestionsElement) {\n        totalQuestionsElement.textContent = questionCards.length;\n    }\n}\n\nfunction updateProgress() {\n    const currentQuestionElement = document.getElementById('current-question');\n    const totalQuestionsElement = document.getElementById('total-questions');\n    \n    if (!currentQuestionElement || !totalQuestionsElement) return;\n    \n    const currentQuestion = parseInt(currentQuestionElement.textContent) || 1;\n    const totalQuestions = parseInt(totalQuestionsElement.textContent) || 1;\n    const progressPercent = Math.round((currentQuestion / totalQuestions) * 100);\n    \n    const progressPercentElement = document.getElementById('progress-percent');\n    if (progressPercentElement) {\n        progressPercentElement.textContent = `${progressPercent}%`;\n    }\n}\n\nfunction updateNavigation() {\n    const questionsNav = document.querySelector('.questions-nav');\n    const questionCards = document.querySelectorAll('.question-card');\n    \n    if (!questionsNav) return;\n\n    const existingNavItems = questionsNav.querySelectorAll('.question-nav-item:not(:last-child)');\n    existingNavItems.forEach(item => item.remove());\n\n    questionCards.forEach((_, index) => {\n        const navItem = document.createElement('div');\n        navItem.className = 'question-nav-item';\n        if (index === 0) navItem.classList.add('current');\n        navItem.textContent = index + 1;\n        navItem.addEventListener('click', () => navigateToQuestion(index + 1));\n        \n        const addButton = questionsNav.querySelector('.question-nav-item:last-child');\n        questionsNav.insertBefore(navItem, addButton);\n    });\n\n    updateSummary();\n}\n\nfunction updateSummary() {\n    const questionCards = document.querySelectorAll('.question-card');\n    const summaryValue = document.querySelector('.summary-item:nth-child(2) .summary-value');\n    if (summaryValue) {\n        summaryValue.textContent = `${questionCards.length}/20`;\n    }\n}\n\nfunction updateQuestionTypeUI(questionCard) {\n    const typeSelect = questionCard.querySelector('.question-type-select');\n    const optionsContainer = questionCard.querySelector('.options-container');\n    const textAnswerContainer = questionCard.querySelector('.text-answer-container');\n    const codeAnswerContainer = questionCard.querySelector('.code-answer-container');\n    \n    if (!typeSelect) return;\n    \n    const questionType = typeSelect.value;\n\n    questionCard.classList.remove('question-type-single', 'question-type-multiple', 'question-type-text', 'question-type-code');\n    questionCard.classList.add(`question-type-${questionType}`);\n\n    switch(questionType) {\n        case 'single':\n        case 'multiple':\n            if (optionsContainer) optionsContainer.style.display = 'block';\n            if (textAnswerContainer) textAnswerContainer.style.display = 'none';\n            if (codeAnswerContainer) codeAnswerContainer.style.display = 'none';\n            break;\n        case 'text':\n            if (optionsContainer) optionsContainer.style.display = 'none';\n            if (textAnswerContainer) textAnswerContainer.style.display = 'block';\n            if (codeAnswerContainer) codeAnswerContainer.style.display = 'none';\n            break;\n        case 'code':\n            if (optionsContainer) optionsContainer.style.display = 'none';\n            if (textAnswerContainer) textAnswerContainer.style.display = 'none';\n            if (codeAnswerContainer) codeAnswerContainer.style.display = 'block';\n            break;\n    }\n\n    updateAnswerSelectionLogic(questionCard);\n}\n\nfunction updateAnswerSelectionLogic(questionCard) {\n    const typeSelect = questionCard.querySelector('.question-type-select');\n    const optionItems = questionCard.querySelectorAll('.option-item');\n    \n    if (!typeSelect) return;\n    \n    const questionType = typeSelect.value;\n    \n    optionItems.forEach(item => {\n        item.removeEventListener('click', handleOptionClick);\n        item.addEventListener('click', handleOptionClick);\n    });\n    \n    function handleOptionClick(e) {\n        if (e.target.tagName === 'INPUT' || e.target.closest('.option-actions')) {\n            return;\n        }\n        \n        const clickedItem = this;\n        const questionType = typeSelect.value;\n        \n        if (questionType === 'single') {\n            optionItems.forEach(opt => opt.classList.remove('selected'));\n            clickedItem.classList.add('selected');\n        } else if (questionType === 'multiple') {\n            clickedItem.classList.toggle('selected');\n        }\n    }\n}\n\nfunction initQuestionTypeEvents() {\n    const questionTypeSelects = document.querySelectorAll('.question-type-select');\n    \n    questionTypeSelects.forEach(select => {\n        if (!select.hasAttribute('data-type-initialized')) {\n            select.setAttribute('data-type-initialized', 'true');\n            \n            select.addEventListener('change', function() {\n                const questionCard = this.closest('.question-card');\n                updateQuestionTypeUI(questionCard);\n            });\n        }\n    });\n    \n    const questionCards = document.querySelectorAll('.question-card');\n    questionCards.forEach(card => {\n        updateQuestionTypeUI(card);\n    });\n}\n\nfunction createNewQuestion(questionData = null) {\n    const questionsContainer = document.querySelector('.test-creation-content');\n    const questionCards = document.querySelectorAll('.question-card');\n    const newQuestionNumber = questionCards.length + 1;\n    \n    const questionText = questionData?.text || '\u041D\u043E\u0432\u044B\u0439 \u0432\u043E\u043F\u0440\u043E\u0441';\n    const questionType = questionData?.type || 'single';\n    const options = questionData?.options || [\n        { text: '\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 1', isCorrect: false },\n        { text: '\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 2', isCorrect: false }\n    ];\n    \n    let optionsHTML = '';\n    options.forEach((option, index) => {\n        const optionLetter = String.fromCharCode(65 + index);\n        optionsHTML += `\n            <div class=\"option-item ${option.isCorrect ? 'selected' : ''}\">\n                <div class=\"option-marker\"></div>\n                <div class=\"option-text\">\n                    <input type=\"text\" class=\"form-control\" value=\"${option.text}\">\n                </div>\n                <div class=\"option-actions\">\n                    <button class=\"btn btn-small btn-success option-correct-btn\">\n                        <i class=\"fas fa-check\"></i>\n                    </button>\n                    <button class=\"btn btn-small btn-danger option-delete-btn\">\n                        <i class=\"fas fa-trash\"></i>\n                    </button>\n                </div>\n            </div>\n        `;\n    });\n    \n    const newQuestionHTML = `\n        <div class=\"question-card\">\n            <div class=\"question-header\">\n                <div>\n                    <div class=\"question-number\">\u0412\u043E\u043F\u0440\u043E\u0441 ${newQuestionNumber}</div>\n                    <div class=\"question-text\">${questionText}</div>\n                </div>\n                <button class=\"btn btn-danger btn-small\" onclick=\"removeQuestion(${newQuestionNumber})\">\n                    <i class=\"fas fa-trash\"></i>\n                </button>\n            </div>\n\n            <div class=\"form-group\">\n                <label class=\"form-label\" for=\"question-text-${newQuestionNumber}\">\u0422\u0435\u043A\u0441\u0442 \u0432\u043E\u043F\u0440\u043E\u0441\u0430</label>\n                <textarea id=\"question-text-${newQuestionNumber}\" class=\"form-control\">${questionText}</textarea>\n            </div>\n\n            <div class=\"form-group programming-only\" style=\"display: none;\">\n                <label class=\"form-label\">\u041A\u043E\u0434 (\u043E\u043F\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E)</label>\n                <div class=\"code-editor\">\n                    <div class=\"code-toolbar\">\n                        <button type=\"button\">Python</button>\n                        <button type=\"button\">JavaScript</button>\n                        <button type=\"button\">HTML</button>\n                    </div>\n                    <textarea class=\"form-control code-block\" rows=\"4\">${questionData?.code || ''}</textarea>\n                </div>\n            </div>\n\n            <div class=\"form-group\">\n                <label class=\"form-label\">\u0422\u0438\u043F \u0432\u043E\u043F\u0440\u043E\u0441\u0430</label>\n                <select class=\"form-control form-select question-type-select\">\n                    <option value=\"single\" ${questionType === 'single' ? 'selected' : ''}>\u041E\u0434\u0438\u043D \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043E\u0442\u0432\u0435\u0442</option>\n                    <option value=\"multiple\" ${questionType === 'multiple' ? 'selected' : ''}>\u041D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0445 \u043E\u0442\u0432\u0435\u0442\u043E\u0432</option>\n                    <option value=\"text\" ${questionType === 'text' ? 'selected' : ''}>\u0422\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u0439 \u043E\u0442\u0432\u0435\u0442</option>\n                    <option value=\"code\" ${questionType === 'code' ? 'selected' : ''} class=\"programming-only\">\u041D\u0430\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u043E\u0434\u0430</option>\n                </select>\n            </div>\n\n            <div class=\"form-group options-container\">\n                <label class=\"form-label\">\u0412\u0430\u0440\u0438\u0430\u043D\u0442\u044B \u043E\u0442\u0432\u0435\u0442\u043E\u0432</label>\n                <div class=\"options-list\">\n                    ${optionsHTML}\n                </div>\n                <button class=\"btn btn-light add-option-btn\">\n                    <i class=\"fas fa-plus\"></i> \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430\n                </button>\n            </div>\n\n            <div class=\"form-group text-answer-container\">\n                <label class=\"form-label\">\u0422\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u0439 \u043E\u0442\u0432\u0435\u0442</label>\n                <textarea class=\"form-control\" rows=\"4\" placeholder=\"\u0421\u0442\u0443\u0434\u0435\u043D\u0442 \u0432\u0432\u0435\u0434\u0435\u0442 \u043E\u0442\u0432\u0435\u0442 \u0437\u0434\u0435\u0441\u044C...\"></textarea>\n            </div>\n\n            <div class=\"form-group code-answer-container programming-only\">\n                <label class=\"form-label\">\u0420\u0435\u0434\u0430\u043A\u0442\u043E\u0440 \u043A\u043E\u0434\u0430</label>\n                <div class=\"code-editor\">\n                    <div class=\"code-toolbar\">\n                        <button type=\"button\" class=\"active\">Python</button>\n                        <button type=\"button\">JavaScript</button>\n                        <button type=\"button\">Java</button>\n                        <button type=\"button\">C++</button>\n                    </div>\n                    <textarea class=\"form-control code-block\" rows=\"6\" placeholder=\"// \u0421\u0442\u0443\u0434\u0435\u043D\u0442 \u043D\u0430\u043F\u0438\u0448\u0435\u0442 \u043A\u043E\u0434 \u0437\u0434\u0435\u0441\u044C...\"></textarea>\n                </div>\n            </div>\n\n            <div class=\"question-actions\">\n                <button class=\"btn btn-light duplicate-question-btn\">\n                    <i class=\"fas fa-copy\"></i> \u0414\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441\n                </button>\n            </div>\n        </div>\n    `;\n    \n    const addButton = document.querySelector('.add-question-btn');\n    if (addButton) {\n        addButton.insertAdjacentHTML('beforebegin', newQuestionHTML);\n    } else {\n        questionsContainer.insertAdjacentHTML('beforeend', newQuestionHTML);\n    }\n    \n    updateQuestionNumbers();\n    updateNavigation();\n    updateProgress();\n    initQuestionEvents();\n    \n    if (newQuestionNumber > 1) {\n        const newQuestion = document.querySelector('.question-card:last-child');\n        if (newQuestion) {\n            newQuestion.style.display = 'none';\n        }\n    }\n    \n    setTimeout(() => {\n        const newQuestion = document.querySelector('.question-card:last-child');\n        if (newQuestion) {\n            updateQuestionTypeUI(newQuestion);\n            initQuestionTypeEvents();\n        }\n    }, 0);\n    \n    if (questionType === 'code') {\n        const newQuestion = document.querySelector('.question-card:last-child');\n        const codeBlock = newQuestion.querySelector('.programming-only');\n        if (codeBlock) {\n            codeBlock.style.display = 'block';\n        }\n    }\n    \n    showToast(`\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432\u043E\u043F\u0440\u043E\u0441 ${newQuestionNumber}`, 'success', '\u041D\u043E\u0432\u044B\u0439 \u0432\u043E\u043F\u0440\u043E\u0441');\n    \n    return newQuestionNumber;\n}\n\nfunction navigateToQuestion(questionNumber) {\n    const questionCards = document.querySelectorAll('.question-card');\n    const questionNavItems = document.querySelectorAll('.question-nav-item:not(:last-child)');\n    \n    questionCards.forEach(card => {\n        card.style.display = 'none';\n    });\n    \n    if (questionCards[questionNumber - 1]) {\n        questionCards[questionNumber - 1].style.display = 'block';\n    }\n    \n    questionNavItems.forEach((item, index) => {\n        item.classList.toggle('current', index === questionNumber - 1);\n    });\n    \n    const currentQuestionElement = document.getElementById('current-question');\n    if (currentQuestionElement) {\n        currentQuestionElement.textContent = questionNumber;\n    }\n    \n    updateProgress();\n}\n\nfunction duplicateQuestion(questionCard) {\n    if (!questionCard) return;\n    \n    const questionData = {\n        text: questionCard.querySelector('textarea[id^=\"question-text-\"]')?.value || '\u041D\u043E\u0432\u044B\u0439 \u0432\u043E\u043F\u0440\u043E\u0441',\n        type: questionCard.querySelector('.question-type-select')?.value || 'single',\n        options: []\n    };\n    \n    const optionItems = questionCard.querySelectorAll('.option-item');\n    optionItems.forEach(option => {\n        questionData.options.push({\n            text: option.querySelector('input[type=\"text\"]')?.value || '\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430',\n            isCorrect: option.classList.contains('selected')\n        });\n    });\n    \n    const codeBlock = questionCard.querySelector('.code-block');\n    if (codeBlock) {\n        questionData.code = codeBlock.value;\n    }\n    \n    const newQuestionNumber = createNewQuestion(questionData);\n    \n    navigateToQuestion(newQuestionNumber);\n}\n\nfunction initQuestionEvents() {\n    const optionItems = document.querySelectorAll('.option-item');\n    \n    optionItems.forEach(item => {\n        if (!item.hasAttribute('data-initialized')) {\n            item.setAttribute('data-initialized', 'true');\n            \n            item.addEventListener('click', function(e) {\n                if (e.target === this || e.target.classList.contains('option-marker')) {\n                    const questionCard = this.closest('.question-card');\n                    const questionTypeSelect = questionCard.querySelector('.question-type-select');\n                    const questionType = questionTypeSelect ? questionTypeSelect.value : 'single';\n                    \n                    if (questionType === 'single') {\n                        const parentOptions = this.closest('.options-list');\n                        parentOptions.querySelectorAll('.option-item').forEach(opt => {\n                            opt.classList.remove('selected');\n                        });\n                        this.classList.add('selected');\n                    } else if (questionType === 'multiple') {\n                        this.classList.toggle('selected');\n                    }\n                }\n            });\n        }\n    });\n    \n    const optionCorrectBtns = document.querySelectorAll('.option-correct-btn');\n    optionCorrectBtns.forEach(btn => {\n        if (!btn.hasAttribute('data-initialized')) {\n            btn.setAttribute('data-initialized', 'true');\n            \n            btn.addEventListener('click', function(e) {\n                e.stopPropagation();\n                const optionItem = this.closest('.option-item');\n                const questionCard = optionItem.closest('.question-card');\n                const questionType = questionCard.querySelector('.question-type-select').value;\n                \n                if (questionType === 'single') {\n                    const parentOptions = optionItem.closest('.options-list');\n                    parentOptions.querySelectorAll('.option-item').forEach(opt => {\n                        opt.classList.remove('selected');\n                    });\n                    optionItem.classList.add('selected');\n                } else {\n                    optionItem.classList.toggle('selected');\n                }\n            });\n        }\n    });\n    \n    const optionDeleteBtns = document.querySelectorAll('.option-delete-btn');\n    optionDeleteBtns.forEach(btn => {\n        if (!btn.hasAttribute('data-initialized')) {\n            btn.setAttribute('data-initialized', 'true');\n            \n            btn.addEventListener('click', function(e) {\n                e.stopPropagation();\n                const optionItem = this.closest('.option-item');\n                const optionsList = optionItem.parentElement;\n                \n                if (optionsList.children.length > 1) {\n                    const confirmToast = showToast(\n                        '\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430?', \n                        'warning', \n                        '\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F', \n                        0\n                    );\n                    \n                    confirmToast.querySelector('.toast-close').remove();\n                    \n                    const toastActions = document.createElement('div');\n                    toastActions.className = 'toast-actions';\n                    toastActions.style.marginTop = '10px';\n                    toastActions.style.display = 'flex';\n                    toastActions.style.gap = '8px';\n                    toastActions.style.justifyContent = 'flex-end';\n                    \n                    toastActions.innerHTML = `\n                        <button class=\"btn btn-danger btn-small confirm-delete\">\u0423\u0434\u0430\u043B\u0438\u0442\u044C</button>\n                        <button class=\"btn btn-light btn-small cancel-delete\">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n                    `;\n                    \n                    const toastContent = confirmToast.querySelector('.toast-content');\n                    toastContent.appendChild(toastActions);\n                    \n                    toastContent.querySelector('.confirm-delete').addEventListener('click', function() {\n                        optionItem.remove();\n                        showToast('\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430 \u0443\u0434\u0430\u043B\u0435\u043D', 'success');\n                        confirmToast.remove();\n                    });\n                    \n                    toastContent.querySelector('.cancel-delete').addEventListener('click', function() {\n                        confirmToast.remove();\n                    });\n                } else {\n                    showToast('\u0414\u043E\u043B\u0436\u0435\u043D \u043E\u0441\u0442\u0430\u0442\u044C\u0441\u044F \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u043E\u0442\u0432\u0435\u0442\u0430', 'warning', '\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0443\u0434\u0430\u043B\u0438\u0442\u044C');\n                }\n            });\n        }\n    });\n    \n    const addOptionBtns = document.querySelectorAll('.add-option-btn');\n    addOptionBtns.forEach(btn => {\n        if (!btn.hasAttribute('data-initialized')) {\n            btn.setAttribute('data-initialized', 'true');\n            \n            btn.addEventListener('click', function() {\n                const optionsList = this.previousElementSibling;\n                const optionCount = optionsList.children.length;\n                const newOptionLetter = String.fromCharCode(65 + optionCount);\n                \n                const newOptionHTML = `\n                    <div class=\"option-item\">\n                        <div class=\"option-marker\"></div>\n                        <div class=\"option-text\">\n                            <input type=\"text\" class=\"form-control\" value=\"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 ${newOptionLetter}\">\n                        </div>\n                        <div class=\"option-actions\">\n                            <button class=\"btn btn-small btn-success option-correct-btn\"><i class=\"fas fa-check\"></i></button>\n                            <button class=\"btn btn-small btn-danger option-delete-btn\"><i class=\"fas fa-trash\"></i></button>\n                        </div>\n                    </div>\n                `;\n                \n                optionsList.insertAdjacentHTML('beforeend', newOptionHTML);\n                initQuestionEvents();\n            });\n        }\n    });\n    \n    const duplicateBtns = document.querySelectorAll('.duplicate-question-btn');\n    duplicateBtns.forEach(btn => {\n        if (!btn.hasAttribute('data-initialized')) {\n            btn.setAttribute('data-initialized', 'true');\n            \n            btn.addEventListener('click', function() {\n                const questionCard = this.closest('.question-card');\n                duplicateQuestion(questionCard);\n            });\n        }\n    });\n    \n    const questionTypeSelects = document.querySelectorAll('.question-type-select');\n    questionTypeSelects.forEach(select => {\n        if (!select.hasAttribute('data-initialized')) {\n            select.setAttribute('data-initialized', 'true');\n            \n            select.addEventListener('change', function() {\n                const questionCard = this.closest('.question-card');\n                updateQuestionTypeUI(questionCard);\n            });\n        }\n    });\n    \n    initQuestionTypeEvents();\n}\n\nfunction previewTest() {\n    const testData = collectTestData();\n    \n    if (testData.questions.length === 0) {\n        showToast('\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u0432\u043E\u043F\u0440\u043E\u0441 \u0434\u043B\u044F \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430', 'warning', '\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445');\n        return;\n    }\n    \n    const modal = document.createElement('div');\n    modal.className = 'modal-overlay active';\n    modal.innerHTML = `\n        <div class=\"modal\" style=\"max-width: 800px;\">\n            <div class=\"modal-header\">\n                <h3 class=\"modal-title\">\u041F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0442\u0435\u0441\u0442\u0430</h3>\n                <button class=\"modal-close\">&times;</button>\n            </div>\n            <div class=\"modal-body\" style=\"max-height: 60vh; overflow-y: auto;\">\n                <div class=\"preview-content\">\n                    <h2>${testData.title}</h2>\n                    <p class=\"text-muted\">${testData.description}</p>\n                    <div class=\"preview-meta\">\n                        <span><strong>\u041F\u0440\u0435\u0434\u043C\u0435\u0442:</strong> ${getSubjectName(testData.subject)}</span>\n                        <span><strong>\u0412\u0440\u0435\u043C\u044F:</strong> ${testData.time} \u043C\u0438\u043D</span>\n                        <span><strong>\u0423\u0440\u043E\u0432\u0435\u043D\u044C:</strong> ${getLevelName(testData.level)}</span>\n                        <span><strong>\u0412\u043E\u043F\u0440\u043E\u0441\u043E\u0432:</strong> ${testData.questions.length}</span>\n                    </div>\n                    <hr>\n                    ${testData.questions.map((question, index) => `\n                        <div class=\"preview-question\">\n                            <h4>\u0412\u043E\u043F\u0440\u043E\u0441 ${index + 1}: ${question.text}</h4>\n                            ${question.type !== 'text' && question.type !== 'code' ? `\n                                <div class=\"preview-options\">\n                                    ${question.options.map((option, optIndex) => `\n                                        <div class=\"preview-option ${option.isCorrect ? 'correct' : ''}\">\n                                            <span class=\"option-letter\">${String.fromCharCode(65 + optIndex)}</span>\n                                            <span>${option.text}</span>\n                                            ${option.isCorrect ? '<span class=\"correct-badge\"><i class=\"fas fa-check\"></i></span>' : ''}\n                                        </div>\n                                    `).join('')}\n                                </div>\n                            ` : `\n                                <div class=\"preview-text-answer\">\n                                    <em>${question.type === 'code' ? '\u041E\u0442\u0432\u0435\u0442: \u043D\u0430\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u043E\u0434\u0430' : '\u041E\u0442\u0432\u0435\u0442: \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u0439 \u0432\u0432\u043E\u0434'}</em>\n                                </div>\n                            `}\n                        </div>\n                    `).join('')}\n                </div>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"btn btn-light\" id=\"preview-close\">\u0417\u0430\u043A\u0440\u044B\u0442\u044C</button>\n            </div>\n        </div>\n    `;\n    \n    document.body.appendChild(modal);\n    \n    modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());\n    modal.querySelector('#preview-close').addEventListener('click', () => modal.remove());\n    modal.addEventListener('click', (e) => {\n        if (e.target === modal) modal.remove();\n    });\n    \n    showToast('\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u0442\u0435\u0441\u0442\u0430 \u043E\u0442\u043A\u0440\u044B\u0442', 'info', '\u0413\u043E\u0442\u043E\u0432\u043E');\n}\n\nfunction getSubjectName(subject) {\n    const subjects = {\n        'russian': '\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A',\n        'literature': '\u041B\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u0430',\n        'math': '\u041C\u0430\u0442\u0435\u043C\u0430\u0442\u0438\u043A\u0430',\n        'economics': '\u042D\u043A\u043E\u043D\u043E\u043C\u0438\u043A\u0430',\n        'programming': '\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435'\n    };\n    return subjects[subject] || subject;\n}\n\nfunction getLevelName(level) {\n    const levels = {\n        'beginner': '\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439',\n        'intermediate': '\u0421\u0440\u0435\u0434\u043D\u0438\u0439',\n        'advanced': '\u041F\u0440\u043E\u0434\u0432\u0438\u043D\u0443\u0442\u044B\u0439'\n    };\n    return levels[level] || level;\n}\n\nfunction collectTestData() {\n    const testTitle = document.getElementById('test-title');\n    const testDescription = document.getElementById('test-description');\n    const testSubject = document.getElementById('test-subject');\n    const testTime = document.getElementById('test-time');\n    const testLevel = document.getElementById('test-level');\n    const testDueDate = document.getElementById('test-due-date');\n    \n    const testData = {\n        title: testTitle?.value || '\u0411\u0435\u0437 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F',\n        description: testDescription?.value || '',\n        subject: testSubject?.value || 'programming',\n        time: testTime?.value || '20',\n        level: testLevel?.value || 'intermediate',\n        dueDate: testDueDate?.value || '',\n        questions: []\n    };\n    \n    const questionCards = document.querySelectorAll('.question-card');\n    questionCards.forEach(card => {\n        const questionTextElement = card.querySelector('textarea[id^=\"question-text-\"]');\n        const questionTypeElement = card.querySelector('.question-type-select');\n        \n        if (questionTextElement && questionTypeElement) {\n            const question = {\n                text: questionTextElement.value,\n                type: questionTypeElement.value,\n                options: []\n            };\n            \n            const optionItems = card.querySelectorAll('.option-item');\n            optionItems.forEach(option => {\n                const input = option.querySelector('input[type=\"text\"]');\n                if (input) {\n                    question.options.push({\n                        text: input.value,\n                        isCorrect: option.classList.contains('selected')\n                    });\n                }\n            });\n            \n            const codeBlock = card.querySelector('.code-block');\n            if (codeBlock) {\n                question.code = codeBlock.value;\n            }\n            \n            testData.questions.push(question);\n        }\n    });\n    \n    return testData;\n}\n\nfunction saveTest() {\n    const testData = collectTestData();\n    \n    if (testData.questions.length === 0) {\n        showToast('\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u0432\u043E\u043F\u0440\u043E\u0441 \u043F\u0435\u0440\u0435\u0434 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435\u043C', 'warning', '\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445');\n        return;\n    }\n    \n    if (!testData.title.trim()) {\n        showToast('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\u0442\u0430', 'warning', '\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043E\u0447\u043D\u043E \u0434\u0430\u043D\u043D\u044B\u0445');\n        document.getElementById('test-title')?.focus();\n        return;\n    }\n    \n    const saveButton = document.getElementById('save-test-btn');\n    const originalText = saveButton.innerHTML;\n    saveButton.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435...';\n    saveButton.disabled = true;\n    \n    // \u0418\u043C\u0438\u0442\u0430\u0446\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F (\u0432 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443)\n    setTimeout(() => {\n        saveButton.innerHTML = originalText;\n        saveButton.disabled = false;\n        \n        showToast('\u0422\u0435\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D! \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043D\u0430\u0439\u0442\u0438 \u0435\u0433\u043E \u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u0435 \"\u041C\u043E\u0438 \u0442\u0435\u0441\u0442\u044B\".', 'success', '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E');\n    }, 1500);\n}\n\nexport function initCreateTestPage() {\n    initToastSystem();\n    const fadeElements = document.querySelectorAll('.fade-in');\n    \n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('visible');\n            }\n        });\n    }, {\n        threshold: 0.1\n    });\n    \n    fadeElements.forEach(element => {\n        observer.observe(element);\n    });\n\n    const subjectSelect = document.getElementById('test-subject');\n    const programmingOnlyElements = document.querySelectorAll('.programming-only');\n    const currentSubjectSpan = document.getElementById('current-subject');\n    const testDueDateInput = document.getElementById('test-due-date');\n    const dueDateInfo = document.getElementById('due-date-info');\n    const dueDateText = document.getElementById('due-date-text');\n    \n    const defaultDate = new Date();\n    defaultDate.setDate(defaultDate.getDate() + 7);\n    if (testDueDateInput) {\n        testDueDateInput.valueAsDate = defaultDate;\n        updateDueDateInfo();\n    }\n    \n    function updateSubjectUI() {\n        const selectedSubject = subjectSelect?.value || 'programming';\n        \n        const isProgramming = selectedSubject === 'programming';\n        programmingOnlyElements.forEach(el => {\n            el.style.display = isProgramming ? 'block' : 'none';\n        });\n        \n        if (currentSubjectSpan) {\n            currentSubjectSpan.textContent = getSubjectName(selectedSubject);\n        }\n        \n        const testCreationSection = document.querySelector('.test-creation');\n        if (testCreationSection) {\n            testCreationSection.classList.remove('subject-russian', 'subject-literature', 'subject-math', 'subject-economics', 'subject-programming');\n            testCreationSection.classList.add(`subject-${selectedSubject}`);\n        }\n    }\n    \n    function updateDueDateInfo() {\n        if (!testDueDateInput || !dueDateInfo || !dueDateText) return;\n        \n        const dueDate = new Date(testDueDateInput.value);\n        const today = new Date();\n        const timeDiff = dueDate.getTime() - today.getTime();\n        const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));\n        \n        if (daysDiff > 0) {\n            dueDateInfo.style.display = 'flex';\n            dueDateText.textContent = `\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C ${daysDiff} \u0434\u043D\u0435\u0439 \u0434\u043E \u0441\u0434\u0430\u0447\u0438`;\n            \n            if (daysDiff > 14) {\n                dueDateInfo.className = 'due-date-info';\n            } else if (daysDiff > 7) {\n                dueDateInfo.className = 'due-date-info warning';\n            } else {\n                dueDateInfo.className = 'due-date-info danger';\n            }\n        } else if (daysDiff === 0) {\n            dueDateInfo.style.display = 'flex';\n            dueDateInfo.className = 'due-date-info danger';\n            dueDateText.textContent = '\u0422\u0435\u0441\u0442 \u043D\u0443\u0436\u043D\u043E \u0441\u0434\u0430\u0442\u044C \u0441\u0435\u0433\u043E\u0434\u043D\u044F!';\n        } else {\n            dueDateInfo.style.display = 'flex';\n            dueDateInfo.className = 'due-date-info danger';\n            dueDateText.textContent = '\u0421\u0440\u043E\u043A \u0441\u0434\u0430\u0447\u0438 \u0438\u0441\u0442\u0435\u043A!';\n        }\n    }\n    \n    if (subjectSelect) {\n        updateSubjectUI();\n        \n        subjectSelect.addEventListener('change', updateSubjectUI);\n        if (testDueDateInput) {\n            testDueDateInput.addEventListener('change', updateDueDateInfo);\n        }\n    }\n    initQuestionEvents();\n\n    const addQuestionBtn = document.querySelector('.add-question-btn');\n    if (addQuestionBtn) {\n        addQuestionBtn.addEventListener('click', () => createNewQuestion());\n    }\n    \n    const addNavButton = document.querySelector('.questions-nav .question-nav-item:last-child');\n    if (addNavButton) {\n        addNavButton.addEventListener('click', () => createNewQuestion());\n    }\n    \n    updateNavigation();\n    navigateToQuestion(1);\n    const previewBtn = document.querySelector('.test-creation-navigation .btn-light');\n    if (previewBtn && previewBtn.querySelector('.fa-eye')) {\n        previewBtn.addEventListener('click', previewTest);\n    }\n\n    const saveTestBtn = document.getElementById('save-test-btn');\n    if (saveTestBtn) {\n        saveTestBtn.addEventListener('click', saveTest);\n    }\n\n    const settingsBtn = document.getElementById('settings-btn');\n    const shareBtn = document.getElementById('share-btn');\n    \n    const settingsModal = document.getElementById('settings-modal');\n    const shareModal = document.getElementById('share-modal');\n    \n    const settingsClose = document.getElementById('settings-close');\n    const shareClose = document.getElementById('share-close');\n    \n    const settingsCancel = document.getElementById('settings-cancel');\n    const shareCancel = document.getElementById('share-cancel');\n    \n    const settingsSave = document.getElementById('settings-save');\n    const copyLink = document.getElementById('copy-link');\n\n    if (settingsBtn && settingsModal) {\n        settingsBtn.addEventListener('click', () => {\n            settingsModal.classList.add('active');\n        });\n    }\n    \n    if (shareBtn && shareModal) {\n        shareBtn.addEventListener('click', () => {\n            shareModal.classList.add('active');\n        });\n    }\n\n    function closeAllModals() {\n        if (settingsModal) settingsModal.classList.remove('active');\n        if (shareModal) shareModal.classList.remove('active');\n\n        const helpModals = document.querySelectorAll('.modal-overlay');\n        helpModals.forEach(modal => modal.classList.remove('active'));\n    }\n    \n    if (settingsClose) settingsClose.addEventListener('click', closeAllModals);\n    if (shareClose) shareClose.addEventListener('click', closeAllModals);\n    \n    if (settingsCancel) settingsCancel.addEventListener('click', closeAllModals);\n    if (shareCancel) shareCancel.addEventListener('click', closeAllModals);\n\n    if (settingsSave) {\n        settingsSave.addEventListener('click', () => {\n            showToast('\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0442\u0435\u0441\u0442\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B!', 'success', '\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E');\n            closeAllModals();\n        });\n    }\n\n    if (copyLink) {\n        copyLink.addEventListener('click', () => {\n            const linkInput = document.querySelector('.share-link input');\n            if (linkInput) {\n                linkInput.select();\n                document.execCommand('copy');\n\n                const originalText = copyLink.innerHTML;\n                copyLink.innerHTML = '<i class=\"fas fa-check\"></i> \u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E!';\n                setTimeout(() => {\n                    copyLink.innerHTML = originalText;\n                }, 2000);\n                \n                showToast('\u0421\u0441\u044B\u043B\u043A\u0430 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430', 'success', '\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E');\n            }\n        });\n    }\n    \n    const shareFacebook = document.getElementById('share-facebook');\n    const shareTelegram = document.getElementById('share-telegram');\n    const shareVk = document.getElementById('share-vk');\n    const shareEmail = document.getElementById('share-email');\n    const shareCopy = document.getElementById('share-copy');\n    \n    const shareActions = [shareFacebook, shareTelegram, shareVk, shareEmail, shareCopy];\n    shareActions.forEach(action => {\n        if (action) {\n            action.addEventListener('click', function() {\n                const platform = this.querySelector('span').textContent;\n                showToast(`\u0424\u0443\u043D\u043A\u0446\u0438\u044F \"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F \u0447\u0435\u0440\u0435\u0437 ${platform}\" \u0431\u0443\u0434\u0435\u0442 \u0440\u0435\u0430\u043B\u0438\u0437\u043E\u0432\u0430\u043D\u0430 \u043F\u043E\u0437\u0436\u0435`, 'info', '\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0435');\n            });\n        }\n    });\n    \n    window.addEventListener('click', (e) => {\n        if (e.target.classList.contains('modal-overlay')) {\n            closeAllModals();\n        }\n    });\n\n    const testTypeOptions = document.querySelectorAll('.test-type-option');\n    const aiAssistant = document.getElementById('ai-assistant');\n    \n    if (testTypeOptions.length > 0) {\n        testTypeOptions.forEach(option => {\n            option.addEventListener('click', function() {\n                testTypeOptions.forEach(opt => opt.classList.remove('selected'));\n                this.classList.add('selected');\n                \n                const testType = this.getAttribute('data-type');\n                \n                if (testType === 'training') {\n                    if (aiAssistant) aiAssistant.style.display = 'block';\n                } else {\n                    if (aiAssistant) aiAssistant.style.display = 'none';\n                }\n            });\n        });\n    }\n    \n    const aiRequestBtn = document.getElementById('ai-request-btn');\n    const aiRequestInput = document.querySelector('.ai-request-input');\n    const aiResponse = document.getElementById('ai-response');\n    \n    if (aiRequestBtn && aiRequestInput) {\n        aiRequestBtn.addEventListener('click', function() {\n            const request = aiRequestInput.value.trim();\n            \n            if (request.startsWith('/test')) {\n                aiRequestBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F...';\n                aiRequestBtn.disabled = true;\n                \n                setTimeout(() => {\n                    if (aiResponse) aiResponse.classList.add('show');\n                    \n                    aiRequestBtn.innerHTML = '<i class=\"fas fa-paper-plane\"></i> \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C';\n                    aiRequestBtn.disabled = false;\n                    \n                    showToast('\u0412\u043E\u043F\u0440\u043E\u0441\u044B \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u044B', 'success', '\u0418\u0418 \u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u044F');\n                    \n                }, 2000);\n            } else {\n                showToast('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0444\u043E\u0440\u043C\u0430\u0442: /test <\u0442\u0435\u043C\u0430> [\u0441\u043B\u043E\u0436\u043D\u043E\u0441\u0442\u044C] [\u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E_\u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432]', 'warning', '\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442');\n            }\n        });\n    }\n    \n    const aiAddAllBtn = document.getElementById('ai-add-all');\n    const aiCancelBtn = document.getElementById('ai-cancel');\n    const aiQuestionItems = document.querySelectorAll('.ai-question-item');\n    \n    if (aiAddAllBtn) {\n        aiAddAllBtn.addEventListener('click', function() {\n            const aiQuestions = document.querySelectorAll('.ai-question-item');\n            let addedCount = 0;\n            \n            aiQuestions.forEach(aiQuestion => {\n                createNewQuestion();\n                \n                const questionCards = document.querySelectorAll('.question-card');\n                const lastQuestion = questionCards[questionCards.length - 1];\n                \n                const questionText = aiQuestion.textContent.replace(/^\u0412\u043E\u043F\u0440\u043E\u0441 \\d+:\\s*/, '');\n                const textarea = lastQuestion.querySelector('textarea');\n                if (textarea) {\n                    textarea.value = questionText;\n                }\n                \n                const questionTextElement = lastQuestion.querySelector('.question-text');\n                if (questionTextElement) {\n                    questionTextElement.textContent = questionText;\n                }\n                \n                addedCount++;\n            });\n            \n            if (aiResponse) {\n                aiResponse.classList.remove('show');\n            }\n            \n            if (aiRequestInput) {\n                aiRequestInput.value = '';\n            }\n            \n            showToast(`\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E ${addedCount} \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u0432 \u0442\u0435\u0441\u0442!`, 'success', '\u0418\u0418 \u0410\u043D\u0430\u0441\u0442\u0430\u0441\u0438\u044F');\n        });\n    }\n    \n    if (aiCancelBtn) {\n        aiCancelBtn.addEventListener('click', function() {\n            if (aiResponse) aiResponse.classList.remove('show');\n            if (aiRequestInput) aiRequestInput.value = '';\n            showToast('\u0413\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u043E\u0442\u043C\u0435\u043D\u0435\u043D\u0430', 'info', '\u041E\u0442\u043C\u0435\u043D\u0435\u043D\u043E');\n        });\n    }\n    \n    if (aiQuestionItems.length > 0) {\n        aiQuestionItems.forEach(item => {\n            item.addEventListener('click', function() {\n                const questionText = this.textContent.replace(/^\u0412\u043E\u043F\u0440\u043E\u0441 \\d+:\\s*/, '');\n                \n                createNewQuestion();\n                const questionCards = document.querySelectorAll('.question-card');\n                const lastQuestion = questionCards[questionCards.length - 1];\n                \n                const textarea = lastQuestion.querySelector('textarea');\n                if (textarea) {\n                    textarea.value = questionText;\n                }\n                \n                const questionTextElement = lastQuestion.querySelector('.question-text');\n                if (questionTextElement) {\n                    questionTextElement.textContent = questionText;\n                }\n                \n                showToast('\u0412\u043E\u043F\u0440\u043E\u0441 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0442\u0435\u0441\u0442', 'success', '\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E');\n            });\n        });\n    }\n    \n    if (aiRequestInput) {\n        aiRequestInput.addEventListener('keypress', function(e) {\n            if (e.key === 'Enter') {\n                if (aiRequestBtn) aiRequestBtn.click();\n            }\n        });\n    }\n\n    const requireRegistration = document.getElementById('require-registration');\n    const passwordField = document.getElementById('password-field');\n    \n    if (requireRegistration && passwordField) {\n        if (requireRegistration.checked) {\n            passwordField.style.display = 'block';\n        } else {\n            passwordField.style.display = 'none';\n        }\n        \n        requireRegistration.addEventListener('change', function() {\n            if (this.checked) {\n                passwordField.style.display = 'block';\n            } else {\n                passwordField.style.display = 'none';\n            }\n        });\n    }\n\n    const helpGuideLink = document.getElementById('help-guide-link');\n    const helpTypesLink = document.getElementById('help-types-link');\n    const helpAnalyticsLink = document.getElementById('help-analytics-link');\n    \n    if (helpGuideLink) {\n        helpGuideLink.addEventListener('click', function(e) {\n            e.preventDefault();\n            const modal = document.getElementById('help-guide-modal');\n            if (modal) modal.classList.add('active');\n        });\n    }\n    \n    if (helpTypesLink) {\n        helpTypesLink.addEventListener('click', function(e) {\n            e.preventDefault();\n            const modal = document.getElementById('help-types-modal');\n            if (modal) modal.classList.add('active');\n        });\n    }\n    \n    if (helpAnalyticsLink) {\n        helpAnalyticsLink.addEventListener('click', function(e) {\n            e.preventDefault();\n            const modal = document.getElementById('help-analytics-modal');\n            if (modal) modal.classList.add('active');\n        });\n    }\n    \n    const helpGuideClose = document.getElementById('help-guide-close');\n    const helpTypesClose = document.getElementById('help-types-close');\n    const helpAnalyticsClose = document.getElementById('help-analytics-close');\n    \n    const helpGuideCancel = document.getElementById('help-guide-cancel');\n    const helpTypesCancel = document.getElementById('help-types-cancel');\n    const helpAnalyticsCancel = document.getElementById('help-analytics-cancel');\n    \n    function closeHelpModals() {\n        const modals = [\n            'help-guide-modal',\n            'help-types-modal',\n            'help-analytics-modal'\n        ];\n        \n        modals.forEach(modalId => {\n            const modal = document.getElementById(modalId);\n            if (modal) modal.classList.remove('active');\n        });\n    }\n    \n    if (helpGuideClose) helpGuideClose.addEventListener('click', closeHelpModals);\n    if (helpTypesClose) helpTypesClose.addEventListener('click', closeHelpModals);\n    if (helpAnalyticsClose) helpAnalyticsClose.addEventListener('click', closeHelpModals);\n    \n    if (helpGuideCancel) helpGuideCancel.addEventListener('click', closeHelpModals);\n    if (helpTypesCancel) helpTypesCancel.addEventListener('click', closeHelpModals);\n    if (helpAnalyticsCancel) helpAnalyticsCancel.addEventListener('click', closeHelpModals);\n}\n\nwindow.removeQuestion = removeQuestion;\nwindow.showToast = showToast;\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    if (document.querySelector('.test-creation')) {\n        initCreateTestPage();\n    }\n});", "// homework-pages.js\r\nimport { Utils } from '../lib/utils.js';\r\n\r\n// \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0441\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u043A\u0430\u0441\u0442\u043E\u043C\u043D\u044B\u0445 alert \u0447\u0435\u0440\u0435\u0437 JavaScript\r\nconst alertStyles = `\r\n.custom-alert {\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 20px;\r\n    padding: 16px 20px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n    background: white;\r\n    border: 1px solid #e0e0e0;\r\n    z-index: 10000;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n    max-width: 400px;\r\n    opacity: 0;\r\n    transform: translateX(100%);\r\n    transition: all 0.3s ease;\r\n    font-family: 'PT Sans', sans-serif;\r\n}\r\n\r\n.custom-alert.visible {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n}\r\n\r\n.custom-alert.success {\r\n    border-left: 4px solid #4CAF50;\r\n    background: linear-gradient(135deg, #f8fff8 0%, #e8f5e8 100%);\r\n}\r\n\r\n.custom-alert.error {\r\n    border-left: 4px solid #f44336;\r\n    background: linear-gradient(135deg, #fff8f8 0%, #f5e8e8 100%);\r\n}\r\n\r\n.custom-alert.warning {\r\n    border-left: 4px solid #ff9800;\r\n    background: linear-gradient(135deg, #fffbf8 0%, #f5f0e8 100%);\r\n}\r\n\r\n.custom-alert.info {\r\n    border-left: 4px solid #2196F3;\r\n    background: linear-gradient(135deg, #f8fbff 0%, #e8f0f5 100%);\r\n}\r\n\r\n.custom-alert .alert-icon {\r\n    font-size: 20px;\r\n    width: 24px;\r\n    text-align: center;\r\n}\r\n\r\n.custom-alert.success .alert-icon {\r\n    color: #4CAF50;\r\n}\r\n\r\n.custom-alert.error .alert-icon {\r\n    color: #f44336;\r\n}\r\n\r\n.custom-alert.warning .alert-icon {\r\n    color: #ff9800;\r\n}\r\n\r\n.custom-alert.info .alert-icon {\r\n    color: #2196F3;\r\n}\r\n\r\n.custom-alert .alert-content {\r\n    flex: 1;\r\n    color: #333;\r\n    font-size: 14px;\r\n    line-height: 1.4;\r\n}\r\n\r\n.custom-alert .alert-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: #666;\r\n    padding: 4px;\r\n    border-radius: 4px;\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.custom-alert .alert-close:hover {\r\n    background: rgba(0,0,0,0.1);\r\n    color: #333;\r\n}\r\n\r\n/* \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438 \u0434\u043B\u044F fade-in \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 */\r\n.fade-in {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n    transition: all 0.5s ease;\r\n}\r\n\r\n.fade-in.visible {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n}\r\n\r\n/* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u043E\u0448\u0438\u0431\u043E\u043A \u0444\u043E\u0440\u043C */\r\n.error {\r\n    border-color: #f44336 !important;\r\n    background-color: #fff8f8 !important;\r\n}\r\n\r\n.error-message {\r\n    color: #f44336;\r\n    font-size: 12px;\r\n    margin-top: 5px;\r\n    display: block;\r\n}\r\n\r\n/* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0444\u0430\u0439\u043B\u043E\u0432 */\r\n.file-upload-area {\r\n    border: 2px dashed #ddd;\r\n    border-radius: 8px;\r\n    padding: 40px 20px;\r\n    text-align: center;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n    background: #fafafa;\r\n}\r\n\r\n.file-upload-area:hover {\r\n    border-color: #2196F3;\r\n    background: #f0f8ff;\r\n}\r\n\r\n.file-upload-area.dragover {\r\n    border-color: #2196F3;\r\n    background: #e3f2fd;\r\n}\r\n\r\n.file-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 12px;\r\n    background: #f8f9fa;\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n    border: 1px solid #e9ecef;\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.file-item:hover {\r\n    background: #e9ecef;\r\n}\r\n\r\n.file-info {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.file-details {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.file-name {\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.file-size {\r\n    font-size: 12px;\r\n    color: #666;\r\n}\r\n\r\n.file-remove {\r\n    color: #999;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    border-radius: 4px;\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.file-remove:hover {\r\n    color: #f44336;\r\n    background: rgba(244, 67, 54, 0.1);\r\n}\r\n\r\n/* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u0435\u0432 \u043E\u0446\u0435\u043D\u043A\u0438 */\r\n.criteria-item {\r\n    display: flex;\r\n    gap: 15px;\r\n    align-items: flex-end;\r\n    padding: 15px;\r\n    background: #f8f9fa;\r\n    border-radius: 8px;\r\n    margin-bottom: 10px;\r\n    border: 1px solid #e9ecef;\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.criteria-item:hover {\r\n    background: #e9ecef;\r\n}\r\n\r\n.criteria-inputs {\r\n    display: flex;\r\n    gap: 15px;\r\n    flex: 1;\r\n}\r\n\r\n.criteria-actions {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.criteria-remove {\r\n    color: #999;\r\n    cursor: pointer;\r\n    padding: 8px;\r\n    border-radius: 4px;\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.criteria-remove:hover {\r\n    color: #f44336;\r\n    background: rgba(244, 67, 54, 0.1);\r\n}\r\n\r\n/* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u043F\u0440\u043E\u0433\u0440\u0435\u0441\u0441-\u0431\u0430\u0440\u043E\u0432 */\r\n.progress-bar {\r\n    height: 8px;\r\n    background: #e9ecef;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    flex: 1;\r\n}\r\n\r\n.progress-fill {\r\n    height: 100%;\r\n    background: linear-gradient(90deg, #4CAF50, #45a049);\r\n    border-radius: 4px;\r\n    transition: width 1s ease-in-out;\r\n}\r\n\r\n/* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u0441\u0442\u0430\u0442\u0443\u0441\u043E\u0432 */\r\n.status-new {\r\n    background: #e3f2fd;\r\n    color: #1976d2;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n.status-in-progress {\r\n    background: #fff3e0;\r\n    color: #f57c00;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n.status-reviewed {\r\n    background: #e8f5e8;\r\n    color: #388e3c;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n.status-overdue {\r\n    background: #ffebee;\r\n    color: #d32f2f;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n.status-pending {\r\n    background: #fff3e0;\r\n    color: #f57c00;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n.status-returned {\r\n    background: #ffebee;\r\n    color: #d32f2f;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n.status-completed {\r\n    background: #e8f5e8;\r\n    color: #388e3c;\r\n    padding: 4px 8px;\r\n    border-radius: 12px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n}\r\n\r\n/* \u0421\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u043C\u043E\u0434\u0430\u043B\u044C\u043D\u044B\u0445 \u043E\u043A\u043E\u043D */\r\n.modal-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0,0,0,0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 1000;\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.modal-overlay.active {\r\n    opacity: 1;\r\n    visibility: visible;\r\n}\r\n\r\n.modal {\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 10px 30px rgba(0,0,0,0.3);\r\n    max-width: 500px;\r\n    width: 90%;\r\n    max-height: 90vh;\r\n    overflow-y: auto;\r\n    transform: scale(0.7);\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.modal-overlay.active .modal {\r\n    transform: scale(1);\r\n}\r\n\r\n.modal-header {\r\n    padding: 20px 24px 0;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n}\r\n\r\n.modal-icon {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    background: #4CAF50;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: white;\r\n    font-size: 18px;\r\n}\r\n\r\n.modal-title {\r\n    font-size: 20px;\r\n    font-weight: 700;\r\n    color: #333;\r\n    margin: 0;\r\n}\r\n\r\n.modal-content {\r\n    padding: 20px 24px;\r\n    color: #666;\r\n    line-height: 1.5;\r\n}\r\n\r\n.modal-actions {\r\n    padding: 0 24px 20px;\r\n    display: flex;\r\n    gap: 10px;\r\n    justify-content: flex-end;\r\n}\r\n`;\r\n\r\n// \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0441\u0442\u0438\u043B\u0438 \u0432 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\r\nconst styleElement = document.createElement('style');\r\nstyleElement.textContent = alertStyles;\r\ndocument.head.appendChild(styleElement);\r\n\r\n// \u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0442\u0440\u0430\u043D\u0438\u0446 \u0434\u043E\u043C\u0430\u0448\u043D\u0438\u0445 \u0437\u0430\u0434\u0430\u043D\u0438\u0439\r\nexport function initHomeworkPages(currentPath) {\r\n    console.log('Initializing homework pages for path:', currentPath);\r\n    \r\n    if (currentPath.includes('homework.html')) {\r\n        initHomeworkListPage();\r\n    } else if (currentPath.includes('homework-create.html')) {\r\n        initHomeworkCreatePage();\r\n    } else if (currentPath.includes('homework-detail.html')) {\r\n        initHomeworkDetailPage();\r\n    } else if (currentPath.includes('homework-results.html')) {\r\n        initHomeworkResultsPage();\r\n    } else if (currentPath.includes('homework-review.html')) {\r\n        initHomeworkReviewPage();\r\n    } else if (currentPath.includes('homework-templates.html')) {\r\n        initHomeworkTemplatesPage();\r\n    }\r\n}\r\n\r\n// \u0412\u0441\u043F\u043E\u043C\u043E\u0433\u0430\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u044F \u0434\u043B\u044F \u043F\u043E\u043A\u0430\u0437\u0430 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439\r\nfunction showAlert(message, type = 'info') {\r\n    const alert = document.createElement('div');\r\n    alert.className = `custom-alert ${type}`;\r\n    \r\n    const icon = getAlertIcon(type);\r\n    \r\n    alert.innerHTML = `\r\n        <div class=\"alert-icon\">\r\n            <i class=\"fas ${icon}\"></i>\r\n        </div>\r\n        <div class=\"alert-content\">\r\n            ${message}\r\n        </div>\r\n        <button class=\"alert-close\">\r\n            <i class=\"fas fa-times\"></i>\r\n        </button>\r\n    `;\r\n    \r\n    document.body.appendChild(alert);\r\n    \r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n    setTimeout(() => {\r\n        alert.classList.add('visible');\r\n    }, 10);\r\n    \r\n    // \u0417\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u043F\u043E \u043A\u043B\u0438\u043A\u0443\r\n    alert.querySelector('.alert-close').addEventListener('click', function() {\r\n        alert.classList.remove('visible');\r\n        setTimeout(() => {\r\n            if (alert.parentNode) {\r\n                alert.remove();\r\n            }\r\n        }, 300);\r\n    });\r\n    \r\n    // \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0437\u0430\u043A\u0440\u044B\u0442\u0438\u0435 \u0434\u043B\u044F success \u0438 info\r\n    if (type === 'success' || type === 'info') {\r\n        setTimeout(() => {\r\n            if (alert.parentNode) {\r\n                alert.classList.remove('visible');\r\n                setTimeout(() => {\r\n                    if (alert.parentNode) {\r\n                        alert.remove();\r\n                    }\r\n                }, 300);\r\n            }\r\n        }, 5000);\r\n    }\r\n}\r\n\r\nfunction getAlertIcon(type) {\r\n    switch(type) {\r\n        case 'success': return 'fa-check-circle';\r\n        case 'error': return 'fa-exclamation-circle';\r\n        case 'warning': return 'fa-exclamation-triangle';\r\n        case 'info': return 'fa-info-circle';\r\n        default: return 'fa-info-circle';\r\n    }\r\n}\r\n\r\n// ===== \u0421\u0422\u0420\u0410\u041D\u0418\u0426\u0410 \u0421\u041F\u0418\u0421\u041A\u0410 \u0414\u041E\u041C\u0410\u0428\u041D\u0418\u0425 \u0417\u0410\u0414\u0410\u041D\u0418\u0419 =====\r\nfunction initHomeworkListPage() {\r\n    console.log('Initializing homework list page');\r\n    initHomeworkFilters();\r\n    initHomeworkCardInteractions();\r\n}\r\n\r\nfunction initHomeworkFilters() {\r\n    const subjectFilter = document.getElementById('subject');\r\n    const statusFilter = document.getElementById('status');\r\n    const dueDateFilter = document.getElementById('due-date');\r\n    const searchInput = document.querySelector('.search-box input');\r\n    const searchButton = document.querySelector('.search-box button');\r\n    \r\n    if (!subjectFilter && !statusFilter) {\r\n        console.log('Homework filters not found on this page');\r\n        return;\r\n    }\r\n    \r\n    function filterHomework() {\r\n        const subjectValue = subjectFilter ? subjectFilter.value : 'all';\r\n        const statusValue = statusFilter ? statusFilter.value : 'all';\r\n        const dueDateValue = dueDateFilter ? dueDateFilter.value : '';\r\n        const searchValue = searchInput ? searchInput.value.toLowerCase() : '';\r\n        \r\n        const homeworkCards = document.querySelectorAll('.homework-card');\r\n        \r\n        homeworkCards.forEach(card => {\r\n            const cardSubject = card.querySelector('.homework-subject')?.textContent.toLowerCase() || '';\r\n            const cardStatus = card.querySelector('.homework-status')?.textContent.toLowerCase() || '';\r\n            const cardTitle = card.querySelector('.homework-title')?.textContent.toLowerCase() || '';\r\n            const cardDueDateElement = card.querySelector('.homework-info-item:nth-child(2) .homework-info-value');\r\n            const cardDueDate = cardDueDateElement ? cardDueDateElement.textContent : '';\r\n            \r\n            let showCard = true;\r\n            \r\n            // \u0424\u0438\u043B\u044C\u0442\u0440 \u043F\u043E \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0443\r\n            if (subjectValue !== 'all' && subjectFilter) {\r\n                const subjectText = subjectFilter.options[subjectFilter.selectedIndex].text.toLowerCase();\r\n                if (!cardSubject.includes(subjectText)) {\r\n                    showCard = false;\r\n                }\r\n            }\r\n            \r\n            // \u0424\u0438\u043B\u044C\u0442\u0440 \u043F\u043E \u0441\u0442\u0430\u0442\u0443\u0441\u0443\r\n            if (statusValue !== 'all' && statusFilter) {\r\n                let statusClass = '';\r\n                switch(statusValue) {\r\n                    case 'new': statusClass = 'status-new'; break;\r\n                    case 'in-progress': statusClass = 'status-in-progress'; break;\r\n                    case 'reviewed': statusClass = 'status-reviewed'; break;\r\n                    case 'overdue': statusClass = 'status-overdue'; break;\r\n                }\r\n                \r\n                if (!card.querySelector('.homework-status')?.classList.contains(statusClass)) {\r\n                    showCard = false;\r\n                }\r\n            }\r\n            \r\n            // \u0424\u0438\u043B\u044C\u0442\u0440 \u043F\u043E \u0434\u0430\u0442\u0435 \u0441\u0434\u0430\u0447\u0438\r\n            if (dueDateValue && cardDueDate) {\r\n                const dueDateParts = cardDueDate.split('.');\r\n                const cardDueDateFormatted = `${dueDateParts[2]}-${dueDateParts[1]}-${dueDateParts[0]}`;\r\n                \r\n                if (cardDueDateFormatted !== dueDateValue) {\r\n                    showCard = false;\r\n                }\r\n            }\r\n            \r\n            // \u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E\r\n            if (searchValue && !cardTitle.includes(searchValue)) {\r\n                showCard = false;\r\n            }\r\n            \r\n            // \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C/\u0441\u043A\u0440\u044B\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443\r\n            card.style.display = showCard ? 'block' : 'none';\r\n        });\r\n        \r\n        // \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u0435\u0441\u043B\u0438 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E\r\n        const visibleCards = document.querySelectorAll('.homework-card[style=\"display: block\"]');\r\n        const noResultsMessage = document.getElementById('no-results-message');\r\n        \r\n        if (visibleCards.length === 0) {\r\n            if (!noResultsMessage) {\r\n                const message = document.createElement('div');\r\n                message.id = 'no-results-message';\r\n                message.className = 'no-results fade-in';\r\n                message.innerHTML = `\r\n                    <i class=\"fas fa-search\"></i>\r\n                    <h3>\u0417\u0430\u0434\u0430\u043D\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B</h3>\r\n                    <p>\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438</p>\r\n                `;\r\n                document.querySelector('.homework-grid')?.appendChild(message);\r\n                setTimeout(() => message.classList.add('visible'), 100);\r\n            }\r\n        } else if (noResultsMessage) {\r\n            noResultsMessage.remove();\r\n        }\r\n    }\r\n    \r\n    // \u0421\u043E\u0431\u044B\u0442\u0438\u044F \u0434\u043B\u044F \u0444\u0438\u043B\u044C\u0442\u0440\u043E\u0432\r\n    if (subjectFilter) subjectFilter.addEventListener('change', filterHomework);\r\n    if (statusFilter) statusFilter.addEventListener('change', filterHomework);\r\n    if (dueDateFilter) dueDateFilter.addEventListener('change', filterHomework);\r\n    if (searchButton) searchButton.addEventListener('click', filterHomework);\r\n    if (searchInput) {\r\n        searchInput.addEventListener('keyup', function(event) {\r\n            if (event.key === 'Enter') {\r\n                filterHomework();\r\n            }\r\n        });\r\n    }\r\n    \r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435\r\n    setTimeout(filterHomework, 100);\r\n}\r\n\r\nfunction initHomeworkCardInteractions() {\r\n    const homeworkCards = document.querySelectorAll('.homework-card');\r\n    \r\n    homeworkCards.forEach(card => {\r\n        // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u043D\u0430\u0432\u0435\u0434\u0435\u043D\u0438\u0438\r\n        card.addEventListener('mouseenter', function() {\r\n            this.style.transform = 'translateY(-5px)';\r\n            this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';\r\n        });\r\n        \r\n        card.addEventListener('mouseleave', function() {\r\n            this.style.transform = 'translateY(0)';\r\n            this.style.boxShadow = '';\r\n        });\r\n        \r\n        // \u041A\u043B\u0438\u043A \u043F\u043E \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0435 (\u043A\u0440\u043E\u043C\u0435 \u043A\u043D\u043E\u043F\u043E\u043A)\r\n        card.addEventListener('click', function(e) {\r\n            if (!e.target.closest('.btn')) {\r\n                const detailLink = this.querySelector('a[href*=\"homework-detail\"]');\r\n                if (detailLink) {\r\n                    window.location.href = detailLink.getAttribute('href');\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// ===== \u0421\u0422\u0420\u0410\u041D\u0418\u0426\u0410 \u0421\u041E\u0417\u0414\u0410\u041D\u0418\u042F \u0414\u041E\u041C\u0410\u0428\u041D\u0415\u0413\u041E \u0417\u0410\u0414\u0410\u041D\u0418\u042F =====\r\nfunction initHomeworkCreatePage() {\r\n    console.log('Initializing homework creation page');\r\n    initHomeworkForm();\r\n    initTemplatePreview();\r\n    initCriteriaManagement();\r\n    initFileUploadSection();\r\n    initFormSubmission();\r\n}\r\n\r\nfunction initHomeworkForm() {\r\n    const form = document.querySelector('.form-content');\r\n    if (!form) return;\r\n\r\n    // \u0423\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0434\u0430\u0442 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E\r\n    setupDateDefaults();\r\n    \r\n    // \u0411\u0430\u0437\u043E\u0432\u0430\u044F \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u044F\r\n    initBasicValidation();\r\n}\r\n\r\nfunction setupDateDefaults() {\r\n    const today = new Date();\r\n    const nextWeek = new Date(today);\r\n    nextWeek.setDate(today.getDate() + 7);\r\n    \r\n    const startDateInput = document.getElementById('assignment-start');\r\n    const dueDateInput = document.getElementById('assignment-due');\r\n    \r\n    if (startDateInput && !startDateInput.value) {\r\n        startDateInput.valueAsDate = today;\r\n    }\r\n    if (dueDateInput && !dueDateInput.value) {\r\n        dueDateInput.valueAsDate = nextWeek;\r\n    }\r\n    \r\n    // \u0412\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u044F \u0434\u0430\u0442\r\n    if (startDateInput && dueDateInput) {\r\n        startDateInput.addEventListener('change', function() {\r\n            const startDate = new Date(this.value);\r\n            const dueDate = new Date(dueDateInput.value);\r\n            \r\n            if (dueDate < startDate) {\r\n                dueDateInput.valueAsDate = new Date(startDate.getTime() + 7 * 24 * 60 * 60 * 1000);\r\n                updatePreview();\r\n            }\r\n        });\r\n        \r\n        dueDateInput.addEventListener('change', function() {\r\n            const startDate = new Date(startDateInput.value);\r\n            const dueDate = new Date(this.value);\r\n            \r\n            if (dueDate < startDate) {\r\n                showAlert('\u0421\u0440\u043E\u043A \u0441\u0434\u0430\u0447\u0438 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u0440\u0430\u043D\u044C\u0448\u0435 \u0434\u0430\u0442\u044B \u0432\u044B\u0434\u0430\u0447\u0438', 'error');\r\n                this.valueAsDate = new Date(startDate.getTime() + 7 * 24 * 60 * 60 * 1000);\r\n            }\r\n            updatePreview();\r\n        });\r\n    }\r\n}\r\n\r\nfunction initBasicValidation() {\r\n    const requiredFields = document.querySelectorAll('[required]');\r\n    \r\n    requiredFields.forEach(field => {\r\n        field.addEventListener('blur', function() {\r\n            if (!this.value.trim()) {\r\n                this.classList.add('error');\r\n            } else {\r\n                this.classList.remove('error');\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction initCriteriaManagement() {\r\n    const addCriteriaBtn = document.getElementById('add-criteria-btn');\r\n    const criteriaList = document.getElementById('criteria-list');\r\n    \r\n    if (!addCriteriaBtn || !criteriaList) return;\r\n    \r\n    let criteriaCount = criteriaList.querySelectorAll('.criteria-item').length || 1;\r\n    \r\n    addCriteriaBtn.addEventListener('click', function() {\r\n        criteriaCount++;\r\n        \r\n        const criteriaItem = document.createElement('div');\r\n        criteriaItem.className = 'criteria-item fade-in';\r\n        \r\n        criteriaItem.innerHTML = `\r\n            <div class=\"criteria-inputs\">\r\n                <div class=\"form-group\">\r\n                    <label>\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0439 ${criteriaCount}</label>\r\n                    <input type=\"text\" placeholder=\"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u044F\" class=\"criteria-name\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label>\u0411\u0430\u043B\u043B\u044B</label>\r\n                    <input type=\"number\" min=\"1\" max=\"10\" value=\"1\" class=\"criteria-points\">\r\n                </div>\r\n            </div>\r\n            <div class=\"criteria-actions\">\r\n                <i class=\"fas fa-times criteria-remove\" title=\"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u0439\"></i>\r\n            </div>\r\n        `;\r\n        \r\n        criteriaList.appendChild(criteriaItem);\r\n        \r\n        // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n        setTimeout(() => {\r\n            criteriaItem.classList.add('visible');\r\n        }, 10);\r\n        \r\n        // \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F\r\n        criteriaItem.querySelector('.criteria-remove').addEventListener('click', function() {\r\n            if (criteriaCount > 1) {\r\n                criteriaItem.style.opacity = '0';\r\n                criteriaItem.style.transform = 'translateX(-20px)';\r\n                setTimeout(() => {\r\n                    criteriaItem.remove();\r\n                    criteriaCount--;\r\n                    updateCriteriaNumbers();\r\n                    updateTotalScorePreview();\r\n                }, 300);\r\n            } else {\r\n                showAlert('\u0414\u043E\u043B\u0436\u0435\u043D \u043E\u0441\u0442\u0430\u0442\u044C\u0441\u044F \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u043E\u0446\u0435\u043D\u043A\u0438', 'warning');\r\n            }\r\n        });\r\n        \r\n        // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043E\u0431\u0449\u0435\u0433\u043E \u0431\u0430\u043B\u043B\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438\r\n        const pointsInput = criteriaItem.querySelector('.criteria-points');\r\n        pointsInput.addEventListener('input', updateTotalScorePreview);\r\n        \r\n        updateCriteriaNumbers();\r\n        updateTotalScorePreview();\r\n    });\r\n\r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F \u043A \u0438\u0437\u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u043C \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u044F\u043C\r\n    const initialRemoveBtns = criteriaList.querySelectorAll('.criteria-remove');\r\n    initialRemoveBtns.forEach(btn => {\r\n        btn.addEventListener('click', function() {\r\n            const criteriaItem = this.closest('.criteria-item');\r\n            if (criteriaCount > 1) {\r\n                criteriaItem.style.opacity = '0';\r\n                criteriaItem.style.transform = 'translateX(-20px)';\r\n                setTimeout(() => {\r\n                    criteriaItem.remove();\r\n                    criteriaCount--;\r\n                    updateCriteriaNumbers();\r\n                    updateTotalScorePreview();\r\n                }, 300);\r\n            } else {\r\n                showAlert('\u0414\u043E\u043B\u0436\u0435\u043D \u043E\u0441\u0442\u0430\u0442\u044C\u0441\u044F \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u0438\u043D \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u0439 \u043E\u0446\u0435\u043D\u043A\u0438', 'warning');\r\n            }\r\n        });\r\n    });\r\n\r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043E\u0431\u0449\u0435\u0433\u043E \u0431\u0430\u043B\u043B\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u043F\u043E\u043B\u0435\u0439\r\n    criteriaList.querySelectorAll('.criteria-points').forEach(input => {\r\n        input.addEventListener('input', updateTotalScorePreview);\r\n    });\r\n}\r\n\r\nfunction updateCriteriaNumbers() {\r\n    const criteriaList = document.getElementById('criteria-list');\r\n    if (!criteriaList) return;\r\n    \r\n    const criteriaItems = criteriaList.querySelectorAll('.criteria-item');\r\n    criteriaItems.forEach((item, index) => {\r\n        const label = item.querySelector('label');\r\n        if (label) {\r\n            label.textContent = `\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0439 ${index + 1}`;\r\n        }\r\n    });\r\n}\r\n\r\nfunction updateTotalScorePreview() {\r\n    const criteriaPoints = document.querySelectorAll('.criteria-points');\r\n    let totalScore = 0;\r\n    \r\n    criteriaPoints.forEach(input => {\r\n        totalScore += parseInt(input.value) || 0;\r\n    });\r\n    \r\n    const maxScoreInput = document.getElementById('max-score');\r\n    if (maxScoreInput) {\r\n        maxScoreInput.value = totalScore;\r\n    }\r\n    \r\n    const previewScore = document.getElementById('preview-score');\r\n    if (previewScore) {\r\n        previewScore.textContent = totalScore;\r\n    }\r\n}\r\n\r\nfunction initTemplatePreview() {\r\n    const previewElements = {\r\n        title: document.getElementById('preview-title'),\r\n        subject: document.getElementById('preview-subject'),\r\n        description: document.getElementById('preview-description'),\r\n        difficulty: document.getElementById('preview-difficulty'),\r\n        due: document.getElementById('preview-due'),\r\n        score: document.getElementById('preview-score'),\r\n        time: document.getElementById('preview-time')\r\n    };\r\n    \r\n    const formElements = {\r\n        title: document.getElementById('assignment-title'),\r\n        subject: document.getElementById('assignment-subject'),\r\n        difficulty: document.getElementById('assignment-difficulty'),\r\n        description: document.getElementById('assignment-description'),\r\n        due: document.getElementById('assignment-due'),\r\n        time: document.getElementById('assignment-time'),\r\n        score: document.getElementById('max-score')\r\n    };\r\n    \r\n    // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043D\u0430\u043B\u0438\u0447\u0438\u044F \u0432\u0441\u0435\u0445 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432\r\n    const hasAllElements = Object.values(previewElements).every(el => el !== null) && \r\n                          Object.values(formElements).every(el => el !== null);\r\n    \r\n    if (!hasAllElements) {\r\n        console.log('Some preview elements are missing');\r\n        return;\r\n    }\r\n    \r\n    function updatePreview() {\r\n        previewElements.title.textContent = formElements.title.value || '\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F';\r\n        \r\n        const subjectText = formElements.subject.options[formElements.subject.selectedIndex].text;\r\n        previewElements.subject.textContent = subjectText !== '\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442' ? subjectText : '\u041F\u0440\u0435\u0434\u043C\u0435\u0442';\r\n        \r\n        previewElements.description.textContent = formElements.description.value || '\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F \u043F\u043E\u044F\u0432\u0438\u0442\u0441\u044F \u0437\u0434\u0435\u0441\u044C \u043F\u043E\u0441\u043B\u0435 \u0432\u0432\u043E\u0434\u0430.';\r\n        \r\n        const difficultyText = formElements.difficulty.options[formElements.difficulty.selectedIndex].text;\r\n        previewElements.difficulty.textContent = difficultyText;\r\n        \r\n        previewElements.due.textContent = formElements.due.value ? formatDate(formElements.due.value) : '--.--.----';\r\n        previewElements.score.textContent = formElements.score.value || '10';\r\n        previewElements.time.textContent = formElements.time.value ? `${formElements.time.value} \u0447` : '- \u0447';\r\n    }\r\n    \r\n    // \u0424\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0434\u0430\u0442\u044B \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F\r\n    function formatDate(dateString) {\r\n        const date = new Date(dateString);\r\n        return date.toLocaleDateString('ru-RU');\r\n    }\r\n    \r\n    // \u041D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\n    updatePreview();\r\n    \r\n    // \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F\u0445 \u0432 \u0444\u043E\u0440\u043C\u0435\r\n    Object.values(formElements).forEach(element => {\r\n        if (element) {\r\n            element.addEventListener('input', updatePreview);\r\n            element.addEventListener('change', updatePreview);\r\n        }\r\n    });\r\n    \r\n    // \u0420\u0443\u0447\u043D\u043E\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430\r\n    const refreshPreviewBtn = document.getElementById('refresh-preview-btn');\r\n    if (refreshPreviewBtn) {\r\n        refreshPreviewBtn.addEventListener('click', function() {\r\n            updatePreview();\r\n            showAlert('\u041F\u0440\u0435\u0434\u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D', 'success');\r\n        });\r\n    }\r\n}\r\n\r\nfunction initFileUploadSection() {\r\n    const fileUploadArea = document.getElementById('file-upload-area');\r\n    const fileInput = document.getElementById('file-input');\r\n    const fileList = document.getElementById('file-list');\r\n    \r\n    if (!fileUploadArea || !fileInput || !fileList) return;\r\n    \r\n    // \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u0431\u0430\u0437\u043E\u0432\u0443\u044E \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443 \u0444\u0430\u0439\u043B\u043E\u0432\r\n    initBasicFileUpload(fileUploadArea, fileInput, fileList);\r\n}\r\n\r\nfunction initBasicFileUpload(uploadArea, input, list) {\r\n    // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u043A\u043B\u0430\u0441\u0441 \u0434\u043B\u044F \u0441\u0442\u0438\u043B\u0438\u0437\u0430\u0446\u0438\u0438\r\n    uploadArea.classList.add('file-upload-area');\r\n    \r\n    uploadArea.addEventListener('click', function() {\r\n        input.click();\r\n    });\r\n    \r\n    uploadArea.addEventListener('dragover', function(e) {\r\n        e.preventDefault();\r\n        this.classList.add('dragover');\r\n    });\r\n    \r\n    uploadArea.addEventListener('dragleave', function() {\r\n        this.classList.remove('dragover');\r\n    });\r\n    \r\n    uploadArea.addEventListener('drop', function(e) {\r\n        e.preventDefault();\r\n        this.classList.remove('dragover');\r\n        \r\n        if (e.dataTransfer.files.length > 0) {\r\n            Array.from(e.dataTransfer.files).forEach(file => {\r\n                addFileToList(file, list);\r\n            });\r\n        }\r\n    });\r\n    \r\n    input.addEventListener('change', function() {\r\n        if (this.files.length > 0) {\r\n            Array.from(this.files).forEach(file => {\r\n                addFileToList(file, list);\r\n            });\r\n            this.value = ''; // \u0421\u0431\u0440\u043E\u0441 input \u0434\u043B\u044F \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0442\u043E\u0433\u043E \u0436\u0435 \u0444\u0430\u0439\u043B\u0430\r\n        }\r\n    });\r\n}\r\n\r\nfunction addFileToList(file, list) {\r\n    const fileItem = document.createElement('div');\r\n    fileItem.className = 'file-item fade-in';\r\n    \r\n    const fileExtension = file.name.split('.').pop().toLowerCase();\r\n    let fileIcon = 'fa-file';\r\n    \r\n    if (['pdf'].includes(fileExtension)) {\r\n        fileIcon = 'fa-file-pdf';\r\n    } else if (['doc', 'docx'].includes(fileExtension)) {\r\n        fileIcon = 'fa-file-word';\r\n    } else if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'].includes(fileExtension)) {\r\n        fileIcon = 'fa-file-image';\r\n    } else if (['zip', 'rar', '7z', 'tar', 'gz'].includes(fileExtension)) {\r\n        fileIcon = 'fa-file-archive';\r\n    } else if (['xls', 'xlsx'].includes(fileExtension)) {\r\n        fileIcon = 'fa-file-excel';\r\n    } else if (['ppt', 'pptx'].includes(fileExtension)) {\r\n        fileIcon = 'fa-file-powerpoint';\r\n    }\r\n    \r\n    const fileSize = formatFileSize(file.size);\r\n    \r\n    fileItem.innerHTML = `\r\n        <div class=\"file-info\">\r\n            <i class=\"fas ${fileIcon}\"></i>\r\n            <div class=\"file-details\">\r\n                <div class=\"file-name\">${file.name}</div>\r\n                <div class=\"file-size\">${fileSize}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"file-remove\" title=\"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u0430\u0439\u043B\">\r\n            <i class=\"fas fa-times\"></i>\r\n        </div>\r\n    `;\r\n    \r\n    list.appendChild(fileItem);\r\n    \r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F\r\n    setTimeout(() => {\r\n        fileItem.classList.add('visible');\r\n    }, 10);\r\n    \r\n    // \u0424\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u044F\r\n    fileItem.querySelector('.file-remove').addEventListener('click', function() {\r\n        fileItem.style.opacity = '0';\r\n        fileItem.style.transform = 'translateX(-20px)';\r\n        setTimeout(() => {\r\n            fileItem.remove();\r\n        }, 300);\r\n    });\r\n}\r\n\r\nfunction formatFileSize(bytes) {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n}\r\n\r\nfunction initFormSubmission() {\r\n    const saveDraftBtn = document.getElementById('save-draft-btn');\r\n    const createAssignmentBtn = document.getElementById('create-assignment-btn');\r\n    const successModal = document.getElementById('success-modal');\r\n    const viewAssignmentBtn = document.getElementById('view-assignment-btn');\r\n    \r\n    if (saveDraftBtn) {\r\n        saveDraftBtn.addEventListener('click', function() {\r\n            if (validateForm(true)) {\r\n                // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430\r\n                showAlert('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D', 'success');\r\n                \r\n                // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043A\u043D\u043E\u043F\u043A\u0438\r\n                this.innerHTML = '<i class=\"fas fa-check\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E';\r\n                this.classList.add('btn-success');\r\n                setTimeout(() => {\r\n                    this.innerHTML = '<i class=\"fas fa-save\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A';\r\n                    this.classList.remove('btn-success');\r\n                }, 2000);\r\n            }\r\n        });\r\n    }\r\n    \r\n    if (createAssignmentBtn) {\r\n        createAssignmentBtn.addEventListener('click', function() {\r\n            if (validateForm()) {\r\n                // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n                if (successModal) {\r\n                    successModal.classList.add('active');\r\n                } else {\r\n                    showAlert('\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0437\u0434\u0430\u043D\u043E!', 'success');\r\n                    setTimeout(() => {\r\n                        window.location.href = '/frontend/templates/homework/homework.html';\r\n                    }, 2000);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    if (viewAssignmentBtn) {\r\n        viewAssignmentBtn.addEventListener('click', function() {\r\n            // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u043E\u043C\u0443 \u0437\u0430\u0434\u0430\u043D\u0438\u044E\r\n            window.location.href = '/frontend/templates/homework/homework-detail.html';\r\n        });\r\n    }\r\n}\r\n\r\nfunction validateForm(isDraft = false) {\r\n    const title = document.getElementById('assignment-title');\r\n    const subject = document.getElementById('assignment-subject');\r\n    const description = document.getElementById('assignment-description');\r\n    const dueDate = document.getElementById('assignment-due');\r\n    \r\n    let isValid = true;\r\n    \r\n    // \u0421\u0431\u0440\u043E\u0441 \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0445 \u043E\u0448\u0438\u0431\u043E\u043A\r\n    document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));\r\n    document.querySelectorAll('.error-message').forEach(el => el.remove());\r\n    \r\n    if (!isDraft) {\r\n        if (!title || !title.value.trim()) {\r\n            markFieldError(title, '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F');\r\n            isValid = false;\r\n        }\r\n        \r\n        if (!subject || !subject.value) {\r\n            markFieldError(subject, '\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043C\u0435\u0442');\r\n            isValid = false;\r\n        }\r\n        \r\n        if (!description || !description.value.trim()) {\r\n            markFieldError(description, '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u044F');\r\n            isValid = false;\r\n        }\r\n        \r\n        if (!dueDate || !dueDate.value) {\r\n            markFieldError(dueDate, '\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u0440\u043E\u043A \u0441\u0434\u0430\u0447\u0438');\r\n            isValid = false;\r\n        }\r\n    }\r\n    \r\n    if (!isValid && !isDraft) {\r\n        showAlert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0432\u0441\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F', 'error');\r\n        // \u041F\u0440\u043E\u043A\u0440\u0443\u0442\u043A\u0430 \u043A \u043F\u0435\u0440\u0432\u043E\u0439 \u043E\u0448\u0438\u0431\u043A\u0435\r\n        const firstError = document.querySelector('.error');\r\n        if (firstError) {\r\n            firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            firstError.focus();\r\n        }\r\n    }\r\n    \r\n    return isDraft ? true : isValid;\r\n}\r\n\r\nfunction markFieldError(field, message) {\r\n    if (!field) return;\r\n    \r\n    field.classList.add('error');\r\n    \r\n    // \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0438\u043B\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u043E\u0431 \u043E\u0448\u0438\u0431\u043A\u0435\r\n    let errorElement = field.parentNode.querySelector('.error-message');\r\n    if (!errorElement) {\r\n        errorElement = document.createElement('div');\r\n        errorElement.className = 'error-message';\r\n        field.parentNode.appendChild(errorElement);\r\n    }\r\n    errorElement.textContent = message;\r\n}\r\n\r\n// ===== \u0421\u0422\u0420\u0410\u041D\u0418\u0426\u0410 \u0412\u042B\u041F\u041E\u041B\u041D\u0415\u041D\u0418\u042F \u0414\u041E\u041C\u0410\u0428\u041D\u0415\u0413\u041E \u0417\u0410\u0414\u0410\u041D\u0418\u042F =====\r\nfunction initHomeworkDetailPage() {\r\n    console.log('Initializing homework detail page');\r\n    initSubmissionOptions();\r\n    initHomeworkSubmission();\r\n    initHomeworkSidebar();\r\n    initDeadlineCounter();\r\n}\r\n\r\nfunction initSubmissionOptions() {\r\n    const textOption = document.getElementById('text-option');\r\n    const fileOption = document.getElementById('file-option');\r\n    const textForm = document.getElementById('text-form');\r\n    const fileForm = document.getElementById('file-form');\r\n    const fileUploadArea = document.getElementById('file-upload-area');\r\n    const fileInput = document.getElementById('file-input');\r\n    const fileName = document.getElementById('file-name');\r\n    \r\n    if (!textOption || !fileOption) return;\r\n    \r\n    textOption.addEventListener('click', function() {\r\n        textOption.classList.add('active');\r\n        fileOption.classList.remove('active');\r\n        if (textForm) textForm.style.display = 'block';\r\n        if (fileForm) fileForm.style.display = 'none';\r\n    });\r\n    \r\n    fileOption.addEventListener('click', function() {\r\n        fileOption.classList.add('active');\r\n        textOption.classList.remove('active');\r\n        if (fileForm) fileForm.style.display = 'block';\r\n        if (textForm) textForm.style.display = 'none';\r\n    });\r\n    \r\n    // \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0444\u0430\u0439\u043B\u0430\r\n    if (fileUploadArea && fileInput && fileName) {\r\n        fileUploadArea.addEventListener('click', function() {\r\n            fileInput.click();\r\n        });\r\n        \r\n        fileInput.addEventListener('change', function() {\r\n            if (fileInput.files.length > 0) {\r\n                fileName.textContent = `\u0412\u044B\u0431\u0440\u0430\u043D \u0444\u0430\u0439\u043B: ${fileInput.files[0].name}`;\r\n                fileName.style.color = 'var(--success-color)';\r\n            } else {\r\n                fileName.textContent = '';\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction initHomeworkSubmission() {\r\n    const submitBtn = document.getElementById('submit-btn');\r\n    const saveDraftBtn = document.getElementById('save-draft-btn');\r\n    const resultsSection = document.getElementById('results');\r\n    const feedbackText = document.getElementById('feedback-text');\r\n    \r\n    if (!submitBtn) return;\r\n    \r\n    submitBtn.addEventListener('click', function() {\r\n        const solutionText = document.getElementById('solution-text');\r\n        const fileInput = document.getElementById('file-input');\r\n        const file = fileInput?.files[0];\r\n        const textOption = document.getElementById('text-option');\r\n        \r\n        // \u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430, \u0447\u0442\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0447\u0442\u043E-\u0442\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\r\n        if (textOption?.classList.contains('active') && (!solutionText || !solutionText.value.trim())) {\r\n            showAlert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0438\u043B\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0441 \u0440\u0435\u0448\u0435\u043D\u0438\u0435\u043C', 'warning');\r\n            solutionText?.focus();\r\n            return;\r\n        }\r\n        \r\n        if (!textOption?.classList.contains('active') && !file) {\r\n            showAlert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043B \u0434\u043B\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438', 'warning');\r\n            return;\r\n        }\r\n        \r\n        // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438\r\n        const originalText = this.innerHTML;\r\n        this.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> \u041E\u0442\u043F\u0440\u0430\u0432\u043A\u0430...';\r\n        this.disabled = true;\r\n        \r\n        // \u0418\u043C\u0438\u0442\u0430\u0446\u0438\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\r\n        setTimeout(() => {\r\n            this.innerHTML = originalText;\r\n            this.disabled = false;\r\n            \r\n            // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n            if (textOption?.classList.contains('active')) {\r\n                if (feedbackText) {\r\n                    feedbackText.textContent = '\u0412\u0430\u0448\u0430 \u0440\u0430\u0431\u043E\u0442\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443. \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D \u043F\u043E\u0441\u043B\u0435 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0435\u043C. \u041E\u0431\u044B\u0447\u043D\u043E \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0437\u0430\u043D\u0438\u043C\u0430\u0435\u0442 1-3 \u0440\u0430\u0431\u043E\u0447\u0438\u0445 \u0434\u043D\u044F.';\r\n                }\r\n            } else {\r\n                if (feedbackText) {\r\n                    feedbackText.textContent = `\u0424\u0430\u0439\u043B \"${file.name}\" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443. \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D \u043F\u043E\u0441\u043B\u0435 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u0435\u043C. \u041E\u0431\u044B\u0447\u043D\u043E \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0437\u0430\u043D\u0438\u043C\u0430\u0435\u0442 1-3 \u0440\u0430\u0431\u043E\u0447\u0438\u0445 \u0434\u043D\u044F.`;\r\n                }\r\n            }\r\n            \r\n            if (resultsSection) {\r\n                resultsSection.style.display = 'block';\r\n                resultsSection.scrollIntoView({ behavior: 'smooth' });\r\n                showAlert('\u0420\u0430\u0431\u043E\u0442\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u043D\u0430 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0443', 'success');\r\n            }\r\n        }, 1500);\r\n    });\r\n    \r\n    if (saveDraftBtn) {\r\n        saveDraftBtn.addEventListener('click', function() {\r\n            const solutionText = document.getElementById('solution-text');\r\n            \r\n            // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u0437\u0430\u043F\u0440\u043E\u0441 \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A\u0430\r\n            showAlert('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D', 'success');\r\n            \r\n            // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043A\u043D\u043E\u043F\u043A\u0438\r\n            const originalText = this.innerHTML;\r\n            this.innerHTML = '<i class=\"fas fa-check\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E';\r\n            setTimeout(() => {\r\n                this.innerHTML = originalText;\r\n            }, 2000);\r\n        });\r\n    }\r\n}\r\n\r\nfunction initHomeworkSidebar() {\r\n    // \u0418\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0438\u043D\u0442\u0435\u0440\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u0431\u043E\u043A\u043E\u0432\u043E\u0439 \u043F\u0430\u043D\u0435\u043B\u0438\r\n    const tipsItems = document.querySelectorAll('.tips-list li');\r\n    const resourceLinks = document.querySelectorAll('.resources-list a');\r\n    \r\n    tipsItems.forEach((tip, index) => {\r\n        tip.style.animationDelay = `${index * 0.1}s`;\r\n        tip.classList.add('fade-in');\r\n        setTimeout(() => tip.classList.add('visible'), 100);\r\n    });\r\n    \r\n    resourceLinks.forEach(link => {\r\n        link.addEventListener('mouseenter', function() {\r\n            this.style.transform = 'translateX(5px)';\r\n        });\r\n        \r\n        link.addEventListener('mouseleave', function() {\r\n            this.style.transform = 'translateX(0)';\r\n        });\r\n    });\r\n}\r\n\r\nfunction initDeadlineCounter() {\r\n    const deadlineElement = document.querySelector('.meta-item span');\r\n    if (!deadlineElement) return;\r\n    \r\n    const deadlineText = deadlineElement.textContent;\r\n    const deadlineMatch = deadlineText.match(/(\\d{2})\\.(\\d{2})\\.(\\d{4})/);\r\n    \r\n    if (deadlineMatch) {\r\n        const deadlineDate = new Date(`${deadlineMatch[3]}-${deadlineMatch[2]}-${deadlineMatch[1]}`);\r\n        updateDeadlineCounter(deadlineDate);\r\n    }\r\n}\r\n\r\nfunction updateDeadlineCounter(deadlineDate) {\r\n    const now = new Date();\r\n    const timeDiff = deadlineDate.getTime() - now.getTime();\r\n    const daysLeft = Math.ceil(timeDiff / (1000 * 3600 * 24));\r\n    \r\n    const daysLeftElement = document.querySelector('.info-item:nth-child(5) .info-value');\r\n    if (daysLeftElement) {\r\n        daysLeftElement.textContent = `${daysLeft} ${getDaysText(daysLeft)}`;\r\n        \r\n        if (daysLeft <= 0) {\r\n            daysLeftElement.style.color = 'var(--error-color)';\r\n            daysLeftElement.innerHTML = `<i class=\"fas fa-exclamation-triangle\"></i> \u041F\u0440\u043E\u0441\u0440\u043E\u0447\u0435\u043D\u043E`;\r\n        } else if (daysLeft <= 3) {\r\n            daysLeftElement.style.color = 'var(--warning-color)';\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDaysText(days) {\r\n    if (days % 10 === 1 && days % 100 !== 11) return '\u0434\u0435\u043D\u044C';\r\n    if (days % 10 >= 2 && days % 10 <= 4 && (days % 100 < 10 || days % 100 >= 20)) return '\u0434\u043D\u044F';\r\n    return '\u0434\u043D\u0435\u0439';\r\n}\r\n\r\n// ===== \u0421\u0422\u0420\u0410\u041D\u0418\u0426\u0410 \u0420\u0415\u0417\u0423\u041B\u042C\u0422\u0410\u0422\u041E\u0412 \u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0418 =====\r\nfunction initHomeworkResultsPage() {\r\n    console.log('Initializing homework results page');\r\n    initResultsTabs();\r\n    initResubmissionHandler();\r\n    initProgressBars();\r\n    initFeedbackInteractions();\r\n}\r\n\r\nfunction initResultsTabs() {\r\n    const tabs = document.querySelectorAll('.tab');\r\n    const tabContents = document.querySelectorAll('.tab-content');\r\n    \r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click', () => {\r\n            const tabId = tab.getAttribute('data-tab');\r\n            \r\n            // \u0423\u0431\u0438\u0440\u0430\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u0443 \u0432\u0441\u0435\u0445 \u0432\u043A\u043B\u0430\u0434\u043E\u043A \u0438 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430\r\n            tabs.forEach(t => t.classList.remove('active'));\r\n            tabContents.forEach(content => content.classList.remove('active'));\r\n            \r\n            // \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043A\u043B\u0430\u0441\u0441 \u043A \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0439 \u0432\u043A\u043B\u0430\u0434\u043A\u0435 \u0438 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0443\r\n            tab.classList.add('active');\r\n            const targetTab = document.getElementById(`${tabId}-tab`);\r\n            if (targetTab) {\r\n                targetTab.classList.add('active');\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction initResubmissionHandler() {\r\n    const resubmitBtn = document.getElementById('resubmit-btn');\r\n    \r\n    if (resubmitBtn) {\r\n        resubmitBtn.addEventListener('click', function() {\r\n            if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u0441\u0434\u0430\u0442\u044C \u044D\u0442\u043E \u0437\u0430\u0434\u0430\u043D\u0438\u0435? \u0423 \u0432\u0430\u0441 \u043E\u0441\u0442\u0430\u043B\u043E\u0441\u044C 2 \u043F\u043E\u043F\u044B\u0442\u043A\u0438.')) {\r\n                // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u044B\u043B \u0431\u044B \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 \u0441\u0434\u0430\u0447\u0438 \u0437\u0430\u0434\u0430\u043D\u0438\u044F\r\n                window.location.href = '/frontend/templates/homework/homework-detail.html';\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction initProgressBars() {\r\n    const progressBars = document.querySelectorAll('.progress-fill');\r\n    \r\n    progressBars.forEach(bar => {\r\n        const width = bar.style.width;\r\n        bar.style.width = '0';\r\n        \r\n        setTimeout(() => {\r\n            bar.style.transition = 'width 1s ease-in-out';\r\n            bar.style.width = width;\r\n        }, 300);\r\n    });\r\n}\r\n\r\nfunction initFeedbackInteractions() {\r\n    const feedbackCard = document.querySelector('.feedback-card');\r\n    \r\n    if (feedbackCard) {\r\n        feedbackCard.addEventListener('click', function() {\r\n            this.classList.toggle('expanded');\r\n        });\r\n    }\r\n    \r\n    // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u043A\u0440\u0438\u0442\u0435\u0440\u0438\u0435\u0432\r\n    const criteriaItems = document.querySelectorAll('.criteria-item');\r\n    criteriaItems.forEach((item, index) => {\r\n        item.style.animationDelay = `${index * 0.1}s`;\r\n        item.classList.add('fade-in');\r\n        setTimeout(() => item.classList.add('visible'), 100);\r\n    });\r\n}\r\n\r\n// ===== \u0421\u0422\u0420\u0410\u041D\u0418\u0426\u0410 \u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0418 \u041F\u0420\u0415\u041F\u041E\u0414\u0410\u0412\u0410\u0422\u0415\u041B\u0415\u041C =====\r\nfunction initHomeworkReviewPage() {\r\n    console.log('Initializing homework review page');\r\n    initReviewInterface();\r\n    initReviewFilters();\r\n    initScoreCalculation();\r\n    initReviewSubmission();\r\n    initNextSubmissionHandler();\r\n}\r\n\r\nfunction initReviewInterface() {\r\n    initSubmissionSwitcher();\r\n    initReviewTabs();\r\n}\r\n\r\nfunction initSubmissionSwitcher() {\r\n    const submissionItems = document.querySelectorAll('.submission-item');\r\n    \r\n    submissionItems.forEach(item => {\r\n        item.addEventListener('click', function() {\r\n            // Remove active class from all items\r\n            submissionItems.forEach(i => i.classList.remove('active'));\r\n            \r\n            // Add active class to clicked item\r\n            this.classList.add('active');\r\n            \r\n            // In a real app, we would load the submission data here\r\n            const studentName = this.querySelector('.student-name')?.textContent;\r\n            const assignmentTitle = this.querySelector('.assignment-title')?.textContent;\r\n            \r\n            if (studentName) {\r\n                const studentNameElement = document.querySelector('.student-details h3');\r\n                if (studentNameElement) studentNameElement.textContent = studentName;\r\n            }\r\n            if (assignmentTitle) {\r\n                const assignmentNameElement = document.querySelector('.assignment-name');\r\n                if (assignmentNameElement) assignmentNameElement.textContent = assignmentTitle;\r\n            }\r\n            \r\n            // Update avatar initials\r\n            if (studentName) {\r\n                const names = studentName.split(' ');\r\n                const initials = names[0].charAt(0) + (names[1] ? names[1].charAt(0) : '');\r\n                const avatar = document.querySelector('.student-avatar');\r\n                if (avatar) {\r\n                    avatar.textContent = initials;\r\n                }\r\n            }\r\n            \r\n            // Reset form for new submission\r\n            resetReviewForm();\r\n        });\r\n    });\r\n}\r\n\r\nfunction resetReviewForm() {\r\n    const overallScoreInput = document.getElementById('overall-score');\r\n    const criteriaInputs = document.querySelectorAll('.criteria-input');\r\n    const feedbackTextarea = document.getElementById('feedback');\r\n    const teacherCommentTextarea = document.getElementById('teacher-comment');\r\n    \r\n    if (overallScoreInput) overallScoreInput.value = 0;\r\n    criteriaInputs.forEach(input => input.value = 0);\r\n    if (feedbackTextarea) feedbackTextarea.value = '';\r\n    if (teacherCommentTextarea) teacherCommentTextarea.value = '';\r\n    \r\n    // Recalculate total score\r\n    calculateTotalScore();\r\n}\r\n\r\nfunction initReviewTabs() {\r\n    const reviewTabs = document.querySelectorAll('.review-tab');\r\n    const tabContents = document.querySelectorAll('.tab-content');\r\n    \r\n    reviewTabs.forEach(tab => {\r\n        tab.addEventListener('click', function() {\r\n            const tabId = this.getAttribute('data-tab');\r\n            \r\n            // Remove active class from all tabs and contents\r\n            reviewTabs.forEach(t => t.classList.remove('active'));\r\n            tabContents.forEach(content => content.classList.remove('active'));\r\n            \r\n            // Add active class to clicked tab and corresponding content\r\n            this.classList.add('active');\r\n            const targetTab = document.getElementById(`${tabId}-tab`);\r\n            if (targetTab) {\r\n                targetTab.classList.add('active');\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction initReviewFilters() {\r\n    const subjectFilter = document.getElementById('subject');\r\n    const statusFilter = document.getElementById('status');\r\n    const groupFilter = document.getElementById('group');\r\n    const searchInput = document.querySelector('.search-box input');\r\n    const searchButton = document.querySelector('.search-box button');\r\n    \r\n    if (!subjectFilter && !statusFilter) return;\r\n    \r\n    function filterSubmissions() {\r\n        const subjectValue = subjectFilter ? subjectFilter.value : 'all';\r\n        const statusValue = statusFilter ? statusFilter.value : 'all';\r\n        const groupValue = groupFilter ? groupFilter.value : 'all';\r\n        const searchValue = searchInput ? searchInput.value.toLowerCase() : '';\r\n        \r\n        const submissionItems = document.querySelectorAll('.submission-item');\r\n        \r\n        submissionItems.forEach(item => {\r\n            const studentName = item.querySelector('.student-name')?.textContent.toLowerCase() || '';\r\n            const assignmentTitle = item.querySelector('.assignment-title')?.textContent.toLowerCase() || '';\r\n            const status = item.querySelector('.submission-status')?.textContent.toLowerCase() || '';\r\n            \r\n            let showItem = true;\r\n            \r\n            // Filter by subject (simulated)\r\n            if (subjectValue !== 'all') {\r\n                // This would normally check a data attribute\r\n                // For demo, we'll just show all if math is selected (since most are math)\r\n                if (subjectValue !== 'math') {\r\n                    showItem = false;\r\n                }\r\n            }\r\n            \r\n            // Filter by status\r\n            if (statusValue !== 'all') {\r\n                let statusClass = '';\r\n                switch(statusValue) {\r\n                    case 'pending': statusClass = '\u043E\u0436\u0438\u0434\u0430\u0435\u0442'; break;\r\n                    case 'reviewed': statusClass = '\u043F\u0440\u043E\u0432\u0435\u0440\u0435\u043D\u043E'; break;\r\n                    case 'returned': statusClass = '\u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u043E'; break;\r\n                }\r\n                \r\n                if (!status.includes(statusClass)) {\r\n                    showItem = false;\r\n                }\r\n            }\r\n            \r\n            // Search by student name or assignment title\r\n            if (searchValue && !studentName.includes(searchValue) && !assignmentTitle.includes(searchValue)) {\r\n                showItem = false;\r\n            }\r\n            \r\n            // Show/hide item\r\n            item.style.display = showItem ? 'flex' : 'none';\r\n        });\r\n        \r\n        // Update counter\r\n        updatePendingCounter();\r\n    }\r\n    \r\n    function updatePendingCounter() {\r\n        const pendingItems = document.querySelectorAll('.submission-item[style=\"display: flex\"] .status-pending');\r\n        const pendingCounter = document.querySelector('.stat-item:first-child .stat-value');\r\n        \r\n        if (pendingCounter && pendingItems.length > 0) {\r\n            pendingCounter.textContent = pendingItems.length;\r\n        }\r\n    }\r\n    \r\n    // Event listeners for filters\r\n    if (subjectFilter) subjectFilter.addEventListener('change', filterSubmissions);\r\n    if (statusFilter) statusFilter.addEventListener('change', filterSubmissions);\r\n    if (groupFilter) groupFilter.addEventListener('change', filterSubmissions);\r\n    if (searchButton) searchButton.addEventListener('click', filterSubmissions);\r\n    if (searchInput) {\r\n        searchInput.addEventListener('keyup', function(event) {\r\n            if (event.key === 'Enter') {\r\n                filterSubmissions();\r\n            }\r\n        });\r\n    }\r\n    \r\n    // Initial filter\r\n    setTimeout(filterSubmissions, 100);\r\n}\r\n\r\nfunction initScoreCalculation() {\r\n    const criteriaInputs = document.querySelectorAll('.criteria-input');\r\n    const overallScoreInput = document.getElementById('overall-score');\r\n    const totalScoreValue = document.getElementById('total-score-value');\r\n    \r\n    if (!criteriaInputs.length || !overallScoreInput || !totalScoreValue) return;\r\n    \r\n    function calculateTotalScore() {\r\n        let total = 0;\r\n        criteriaInputs.forEach(input => {\r\n            total += parseInt(input.value) || 0;\r\n        });\r\n        \r\n        // Update overall score input\r\n        overallScoreInput.value = total;\r\n        \r\n        // Update total score display\r\n        totalScoreValue.textContent = `${total} / 10`;\r\n        \r\n        // Update grade color based on score\r\n        updateGradeColor(total);\r\n    }\r\n    \r\n    function updateGradeColor(score) {\r\n        const maxScore = 10;\r\n        const percentage = (score / maxScore) * 100;\r\n        \r\n        if (percentage >= 80) {\r\n            totalScoreValue.style.color = 'var(--success-color)';\r\n        } else if (percentage >= 60) {\r\n            totalScoreValue.style.color = 'var(--warning-color)';\r\n        } else {\r\n            totalScoreValue.style.color = 'var(--error-color)';\r\n        }\r\n    }\r\n    \r\n    // Update total score when criteria inputs change\r\n    criteriaInputs.forEach(input => {\r\n        input.addEventListener('input', calculateTotalScore);\r\n    });\r\n    \r\n    // Update total score when overall score changes\r\n    overallScoreInput.addEventListener('input', function() {\r\n        totalScoreValue.textContent = `${this.value} / 10`;\r\n        updateGradeColor(parseInt(this.value) || 0);\r\n    });\r\n    \r\n    // Initial calculation\r\n    calculateTotalScore();\r\n}\r\n\r\nfunction initReviewSubmission() {\r\n    const saveDraftBtn = document.getElementById('save-draft-btn');\r\n    const returnBtn = document.getElementById('return-btn');\r\n    const submitReviewBtn = document.getElementById('submit-review-btn');\r\n    const successModal = document.getElementById('success-modal');\r\n    \r\n    if (saveDraftBtn) {\r\n        saveDraftBtn.addEventListener('click', function() {\r\n            // In a real app, this would save the review as a draft\r\n            showAlert('\u0427\u0435\u0440\u043D\u043E\u0432\u0438\u043A \u043E\u0446\u0435\u043D\u043A\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D', 'success');\r\n            \r\n            // Button feedback\r\n            const originalHTML = this.innerHTML;\r\n            this.innerHTML = '<i class=\"fas fa-check\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E';\r\n            setTimeout(() => {\r\n                this.innerHTML = originalHTML;\r\n            }, 2000);\r\n        });\r\n    }\r\n    \r\n    if (returnBtn) {\r\n        returnBtn.addEventListener('click', function() {\r\n            if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0432\u0435\u0440\u043D\u0443\u0442\u044C \u044D\u0442\u0443 \u0440\u0430\u0431\u043E\u0442\u0443 \u043D\u0430 \u0434\u043E\u0440\u0430\u0431\u043E\u0442\u043A\u0443? \u0421\u0442\u0443\u0434\u0435\u043D\u0442 \u043F\u043E\u043B\u0443\u0447\u0438\u0442 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u0438 \u0441\u043C\u043E\u0436\u0435\u0442 \u0438\u0441\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0440\u0430\u0431\u043E\u0442\u0443.')) {\r\n                // In a real app, this would mark the submission as returned\r\n                showAlert('\u0420\u0430\u0431\u043E\u0442\u0430 \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u0430 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0443 \u043D\u0430 \u0434\u043E\u0440\u0430\u0431\u043E\u0442\u043A\u0443', 'success');\r\n                \r\n                // Update status in the list\r\n                const activeSubmission = document.querySelector('.submission-item.active');\r\n                if (activeSubmission) {\r\n                    const statusElement = activeSubmission.querySelector('.submission-status');\r\n                    if (statusElement) {\r\n                        statusElement.textContent = '\u0412\u043E\u0437\u0432\u0440\u0430\u0449\u0435\u043D\u043E';\r\n                        statusElement.className = 'submission-status status-returned';\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    if (submitReviewBtn) {\r\n        submitReviewBtn.addEventListener('click', function() {\r\n            const overallScore = document.getElementById('overall-score')?.value;\r\n            const feedback = document.getElementById('feedback')?.value;\r\n            \r\n            if (!overallScore || overallScore === '0') {\r\n                showAlert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u043E\u0446\u0435\u043D\u043A\u0443', 'warning');\r\n                return;\r\n            }\r\n            \r\n            if (!feedback || !feedback.trim()) {\r\n                showAlert('\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043D\u0430\u043F\u0438\u0448\u0438\u0442\u0435 \u043E\u0431\u0440\u0430\u0442\u043D\u0443\u044E \u0441\u0432\u044F\u0437\u044C \u0434\u043B\u044F \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0430', 'warning');\r\n                return;\r\n            }\r\n            \r\n            if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043E\u0446\u0435\u043D\u043A\u0443? \u0421\u0442\u0443\u0434\u0435\u043D\u0442 \u043F\u043E\u043B\u0443\u0447\u0438\u0442 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u0441 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u0430\u043C\u0438 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438.')) {\r\n                // In a real app, this would submit the review\r\n                if (successModal) {\r\n                    successModal.classList.add('active');\r\n                }\r\n                \r\n                // Update status in the list\r\n                const activeSubmission = document.querySelector('.submission-item.active');\r\n                if (activeSubmission) {\r\n                    const statusElement = activeSubmission.querySelector('.submission-status');\r\n                    if (statusElement) {\r\n                        statusElement.textContent = '\u041F\u0440\u043E\u0432\u0435\u0440\u0435\u043D\u043E';\r\n                        statusElement.className = 'submission-status status-reviewed';\r\n                    }\r\n                }\r\n                \r\n                showAlert('\u041E\u0446\u0435\u043D\u043A\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430 \u0441\u0442\u0443\u0434\u0435\u043D\u0442\u0443', 'success');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction initNextSubmissionHandler() {\r\n    const nextSubmissionBtn = document.getElementById('next-submission-btn');\r\n    \r\n    if (nextSubmissionBtn) {\r\n        nextSubmissionBtn.addEventListener('click', function() {\r\n            const successModal = document.getElementById('success-modal');\r\n            if (successModal) {\r\n                successModal.classList.remove('active');\r\n            }\r\n            \r\n            // Find current active submission\r\n            const currentActive = document.querySelector('.submission-item.active');\r\n            const nextItem = currentActive?.nextElementSibling;\r\n            \r\n            if (nextItem && nextItem.classList.contains('submission-item')) {\r\n                // Remove active class from current item\r\n                currentActive.classList.remove('active');\r\n                \r\n                // Add active class to next item\r\n                nextItem.classList.add('active');\r\n                \r\n                // Simulate loading next submission\r\n                const studentName = nextItem.querySelector('.student-name')?.textContent;\r\n                const assignmentTitle = nextItem.querySelector('.assignment-title')?.textContent;\r\n                \r\n                if (studentName) {\r\n                    document.querySelector('.student-name').textContent = studentName;\r\n                }\r\n                if (assignmentTitle) {\r\n                    document.querySelector('.assignment-name').textContent = assignmentTitle;\r\n                }\r\n                \r\n                // Update avatar initials\r\n                if (studentName) {\r\n                    const names = studentName.split(' ');\r\n                    const initials = names[0].charAt(0) + (names[1] ? names[1].charAt(0) : '');\r\n                    const avatar = document.querySelector('.student-avatar');\r\n                    if (avatar) {\r\n                        avatar.textContent = initials;\r\n                    }\r\n                }\r\n                \r\n                // Reset form for new submission\r\n                resetReviewForm();\r\n                \r\n                // Switch to submission tab\r\n                const reviewTabs = document.querySelectorAll('.review-tab');\r\n                const tabContents = document.querySelectorAll('.tab-content');\r\n                \r\n                reviewTabs.forEach(t => t.classList.remove('active'));\r\n                tabContents.forEach(content => content.classList.remove('active'));\r\n                \r\n                const submissionTab = document.querySelector('.review-tab[data-tab=\"submission\"]');\r\n                const submissionTabContent = document.getElementById('submission-tab');\r\n                \r\n                if (submissionTab) submissionTab.classList.add('active');\r\n                if (submissionTabContent) submissionTabContent.classList.add('active');\r\n                \r\n                showAlert('\u041F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439 \u0440\u0430\u0431\u043E\u0442\u0435', 'info');\r\n            } else {\r\n                showAlert('\u042D\u0442\u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u044F\u044F \u0440\u0430\u0431\u043E\u0442\u0430 \u0432 \u0441\u043F\u0438\u0441\u043A\u0435', 'info');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// ===== \u0421\u0422\u0420\u0410\u041D\u0418\u0426\u0410 \u0428\u0410\u0411\u041B\u041E\u041D\u041E\u0412 \u0414\u041E\u041C\u0410\u0428\u041D\u0418\u0425 \u0417\u0410\u0414\u0410\u041D\u0418\u0419 =====\r\nfunction initHomeworkTemplatesPage() {\r\n    console.log('Initializing homework templates page');\r\n    initTemplateFilters();\r\n    initTemplatePreviewModal();\r\n    initTemplateUsage();\r\n    initTemplateCardInteractions();\r\n}\r\n\r\nfunction initTemplateFilters() {\r\n    const subjectFilter = document.getElementById('subject');\r\n    const difficultyFilter = document.getElementById('difficulty');\r\n    const typeFilter = document.getElementById('type');\r\n    const searchInput = document.querySelector('.search-box input');\r\n    const searchButton = document.querySelector('.search-box button');\r\n    \r\n    if (!subjectFilter && !difficultyFilter) return;\r\n    \r\n    function filterTemplates() {\r\n        const subjectValue = subjectFilter ? subjectFilter.value : 'all';\r\n        const difficultyValue = difficultyFilter ? difficultyFilter.value : 'all';\r\n        const typeValue = typeFilter ? typeFilter.value : 'all';\r\n        const searchValue = searchInput ? searchInput.value.toLowerCase() : '';\r\n        \r\n        const templateCards = document.querySelectorAll('.template-card');\r\n        \r\n        templateCards.forEach(card => {\r\n            const cardSubject = card.querySelector('.template-subject')?.textContent.toLowerCase() || '';\r\n            const cardDifficultyElement = card.querySelector('.template-info-item:nth-child(1) .template-info-value');\r\n            const cardDifficulty = cardDifficultyElement ? cardDifficultyElement.textContent.toLowerCase() : '';\r\n            const cardTypeElement = card.querySelector('.template-info-item:nth-child(3) .template-info-value');\r\n            const cardType = cardTypeElement ? cardTypeElement.textContent.toLowerCase() : '';\r\n            const cardTitle = card.querySelector('.template-title')?.textContent.toLowerCase() || '';\r\n            \r\n            let showCard = true;\r\n            \r\n            // Filter by subject\r\n            if (subjectValue !== 'all') {\r\n                const subjectText = subjectFilter.options[subjectFilter.selectedIndex].text.toLowerCase();\r\n                if (!cardSubject.includes(subjectText)) {\r\n                    showCard = false;\r\n                }\r\n            }\r\n            \r\n            // Filter by difficulty\r\n            if (difficultyValue !== 'all') {\r\n                let difficultyClass = '';\r\n                switch(difficultyValue) {\r\n                    case 'easy': difficultyClass = '\u043D\u0430\u0447\u0430\u043B\u044C\u043D\u044B\u0439'; break;\r\n                    case 'medium': difficultyClass = '\u0441\u0440\u0435\u0434\u043D\u0438\u0439'; break;\r\n                    case 'hard': difficultyClass = '\u043F\u0440\u043E\u0434\u0432\u0438\u043D\u0443\u0442\u044B\u0439'; break;\r\n                }\r\n                \r\n                if (cardDifficulty !== difficultyClass) {\r\n                    showCard = false;\r\n                }\r\n            }\r\n            \r\n            // Filter by type\r\n            if (typeValue !== 'all') {\r\n                let typeClass = '';\r\n                switch(typeValue) {\r\n                    case 'theory': typeClass = '\u0442\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435'; break;\r\n                    case 'practice': typeClass = '\u043F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435'; break;\r\n                    case 'project': typeClass = '\u043F\u0440\u043E\u0435\u043A\u0442\u043D\u043E\u0435'; break;\r\n                    case 'research': typeClass = '\u0438\u0441\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u0442\u0435\u043B\u044C\u0441\u043A\u043E\u0435'; break;\r\n                }\r\n                \r\n                if (!cardType.includes(typeClass)) {\r\n                    showCard = false;\r\n                }\r\n            }\r\n            \r\n            // Search by title\r\n            if (searchValue && !cardTitle.includes(searchValue)) {\r\n                showCard = false;\r\n            }\r\n            \r\n            // Show/hide card\r\n            card.style.display = showCard ? 'block' : 'none';\r\n        });\r\n        \r\n        // Show no results message\r\n        const visibleCards = document.querySelectorAll('.template-card[style=\"display: block\"]');\r\n        const noResultsMessage = document.getElementById('no-templates-message');\r\n        \r\n        if (visibleCards.length === 0) {\r\n            if (!noResultsMessage) {\r\n                const message = document.createElement('div');\r\n                message.id = 'no-templates-message';\r\n                message.className = 'no-results fade-in';\r\n                message.innerHTML = `\r\n                    <i class=\"fas fa-search\"></i>\r\n                    <h3>\u0428\u0430\u0431\u043B\u043E\u043D\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B</h3>\r\n                    <p>\u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438</p>\r\n                `;\r\n                document.querySelector('.templates-grid')?.appendChild(message);\r\n                setTimeout(() => message.classList.add('visible'), 100);\r\n            }\r\n        } else if (noResultsMessage) {\r\n            noResultsMessage.remove();\r\n        }\r\n    }\r\n    \r\n    // Event listeners for filters\r\n    if (subjectFilter) subjectFilter.addEventListener('change', filterTemplates);\r\n    if (difficultyFilter) difficultyFilter.addEventListener('change', filterTemplates);\r\n    if (typeFilter) typeFilter.addEventListener('change', filterTemplates);\r\n    if (searchButton) searchButton.addEventListener('click', filterTemplates);\r\n    if (searchInput) {\r\n        searchInput.addEventListener('keyup', function(event) {\r\n            if (event.key === 'Enter') {\r\n                filterTemplates();\r\n            }\r\n        });\r\n    }\r\n    \r\n    // Initial filter\r\n    setTimeout(filterTemplates, 100);\r\n}\r\n\r\nfunction initTemplatePreviewModal() {\r\n    const previewModal = document.getElementById('preview-modal');\r\n    const previewClose = document.getElementById('preview-close');\r\n    const previewCancel = document.getElementById('preview-cancel');\r\n    const previewButtons = document.querySelectorAll('.preview-template');\r\n    \r\n    if (!previewModal) return;\r\n    \r\n    const templateData = {\r\n        1: {\r\n            title: \"\u0420\u0435\u0448\u0435\u043D\u0438\u0435 \u043A\u0432\u0430\u0434\u0440\u0430\u0442\u043D\u044B\u0445 \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0439\",\r\n            description: `\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u0437\u0430\u043A\u0440\u0435\u043F\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u0432\u044B\u043A\u043E\u0432 \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u043A\u0432\u0430\u0434\u0440\u0430\u0442\u043D\u044B\u0445 \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0439 \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u043C\u0438 \u043C\u0435\u0442\u043E\u0434\u0430\u043C\u0438. \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u0440\u0435\u0448\u0438\u0442\u044C \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u0435 \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F, \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043F\u043E\u043B\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0438 \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043D\u044B\u0435 \u043A\u043E\u0440\u043D\u0438.`,\r\n            requirements: `1. \u0420\u0435\u0448\u0438\u0442\u0435 10 \u043A\u0432\u0430\u0434\u0440\u0430\u0442\u043D\u044B\u0445 \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0439, \u043F\u0440\u0438\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0445 \u043D\u0438\u0436\u0435\\n2. \u0414\u043B\u044F \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F \u0443\u043A\u0430\u0436\u0438\u0442\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u043C\u0435\u0442\u043E\u0434 \u0440\u0435\u0448\u0435\u043D\u0438\u044F\\n3. \u041F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u043F\u043E\u043B\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0441 \u043F\u043E\u044F\u0441\u043D\u0435\u043D\u0438\u044F\u043C\u0438 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0448\u0430\u0433\u0430\\n4. \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043A\u043E\u0440\u043D\u0438, \u043F\u043E\u0434\u0441\u0442\u0430\u0432\u0438\u0432 \u0438\u0445 \u0432 \u0438\u0441\u0445\u043E\u0434\u043D\u043E\u0435 \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0435\\n5. \u041E\u0444\u043E\u0440\u043C\u0438\u0442\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u0430\u043A\u043A\u0443\u0440\u0430\u0442\u043D\u043E \u0438 \u0440\u0430\u0437\u0431\u043E\u0440\u0447\u0438\u0432\u043E`,\r\n            criteria: `\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0431\u0430\u043B\u043B: 10\\n\\n\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u043E\u0446\u0435\u043D\u043A\u0438:\\n- \u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u0443\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0439 (5 \u0431\u0430\u043B\u043B\u043E\u0432)\\n- \u041F\u043E\u043B\u043D\u043E\u0442\u0430 \u043E\u0431\u044A\u044F\u0441\u043D\u0435\u043D\u0438\u0439 (3 \u0431\u0430\u043B\u043B\u0430)\\n- \u0410\u043A\u043A\u0443\u0440\u0430\u0442\u043D\u043E\u0441\u0442\u044C \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F (2 \u0431\u0430\u043B\u043B\u0430)`\r\n        },\r\n        2: {\r\n            title: \"\u0417\u0430\u043A\u043E\u043D\u044B \u041D\u044C\u044E\u0442\u043E\u043D\u0430\",\r\n            description: `\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u043F\u043E\u043D\u0438\u043C\u0430\u043D\u0438\u0435 \u0438 \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u043E\u043D\u043E\u0432 \u041D\u044C\u044E\u0442\u043E\u043D\u0430 \u0434\u043B\u044F \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0437\u0430\u0434\u0430\u0447. \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u043F\u0440\u043E\u0430\u043D\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u0435 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438 \u0438 \u043F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u0437\u0430\u043A\u043E\u043D\u044B.`,\r\n            requirements: `1. \u0418\u0437\u0443\u0447\u0438\u0442\u0435 \u0442\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B \u043F\u043E \u0437\u0430\u043A\u043E\u043D\u0430\u043C \u041D\u044C\u044E\u0442\u043E\u043D\u0430\\n2. \u0420\u0435\u0448\u0438\u0442\u0435 8 \u0437\u0430\u0434\u0430\u0447 \u043D\u0430 \u043F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043A\u043E\u043D\u043E\u0432 \u041D\u044C\u044E\u0442\u043E\u043D\u0430\\n3. \u041E\u0442\u0432\u0435\u0442\u044C\u0442\u0435 \u043D\u0430 5 \u0432\u043E\u043F\u0440\u043E\u0441\u043E\u0432 \u0434\u043B\u044F \u0441\u0430\u043C\u043E\u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438\\n4. \u0421\u0444\u043E\u0440\u043C\u0443\u043B\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u044B\u0432\u043E\u0434\u044B \u043F\u043E \u043F\u0440\u043E\u0434\u0435\u043B\u0430\u043D\u043D\u043E\u0439 \u0440\u0430\u0431\u043E\u0442\u0435`,\r\n            criteria: `\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0431\u0430\u043B\u043B: 10\\n\\n\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u043E\u0446\u0435\u043D\u043A\u0438:\\n- \u041F\u043E\u043D\u0438\u043C\u0430\u043D\u0438\u0435 \u0442\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u0430 (3 \u0431\u0430\u043B\u043B\u0430)\\n- \u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0440\u0435\u0448\u0435\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u0447 (4 \u0431\u0430\u043B\u043B\u0430)\\n- \u041F\u043E\u043B\u043D\u043E\u0442\u0430 \u043E\u0442\u0432\u0435\u0442\u043E\u0432 \u043D\u0430 \u0432\u043E\u043F\u0440\u043E\u0441\u044B (2 \u0431\u0430\u043B\u043B\u0430)\\n- \u041A\u0430\u0447\u0435\u0441\u0442\u0432\u043E \u0432\u044B\u0432\u043E\u0434\u043E\u0432 (1 \u0431\u0430\u043B\u043B)`\r\n        },\r\n        3: {\r\n            title: \"\u0410\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u044B \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438\",\r\n            description: `\u0417\u0430\u0434\u0430\u043D\u0438\u0435 \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u043F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0441\u0432\u043E\u0435\u043D\u0438\u0435 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u043E\u0432 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u0438 \u0438\u0445 \u0440\u0435\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044E \u043D\u0430 \u044F\u0437\u044B\u043A\u0435 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F Python. \u0421\u0442\u0443\u0434\u0435\u043D\u0442\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u0440\u0435\u0430\u043B\u0438\u0437\u043E\u0432\u0430\u0442\u044C \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u043E\u0432 \u0438 \u043F\u0440\u043E\u0430\u043D\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0438\u0445 \u044D\u0444\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C.`,\r\n            requirements: `1. \u0420\u0435\u0430\u043B\u0438\u0437\u0443\u0439\u0442\u0435 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u044B \u043F\u0443\u0437\u044B\u0440\u044C\u043A\u043E\u0432\u043E\u0439 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438, \u0431\u044B\u0441\u0442\u0440\u043E\u0439 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u0438 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 \u0441\u043B\u0438\u044F\u043D\u0438\u0435\u043C\\n2. \u041F\u0440\u043E\u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u044B \u043D\u0430 \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u0445 \u043D\u0430\u0431\u043E\u0440\u0430\u0445 \u0434\u0430\u043D\u043D\u044B\u0445\\n3. \u0421\u0440\u0430\u0432\u043D\u0438\u0442\u0435 \u044D\u0444\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u043E\u0432 \u043F\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F\\n4. \u041F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u044C\u0442\u0435 \u043E\u0442\u0447\u0435\u0442 \u0441 \u0430\u043D\u0430\u043B\u0438\u0437\u043E\u043C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432`,\r\n            criteria: `\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0431\u0430\u043B\u043B: 10\\n\\n\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u043E\u0446\u0435\u043D\u043A\u0438:\\n- \u041A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E\u0441\u0442\u044C \u0440\u0435\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u0438 \u0430\u043B\u0433\u043E\u0440\u0438\u0442\u043C\u043E\u0432 (4 \u0431\u0430\u043B\u043B\u0430)\\n- \u041A\u0430\u0447\u0435\u0441\u0442\u0432\u043E \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F (3 \u0431\u0430\u043B\u043B\u0430)\\n- \u0410\u043D\u0430\u043B\u0438\u0437 \u044D\u0444\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438 (2 \u0431\u0430\u043B\u043B\u0430)\\n- \u041E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435 \u043E\u0442\u0447\u0435\u0442\u0430 (1 \u0431\u0430\u043B\u043B)`\r\n        }\r\n    };\r\n    \r\n    // Current template ID\r\n    let currentTemplateId = null;\r\n    \r\n    // Open preview modal\r\n    previewButtons.forEach(button => {\r\n        button.addEventListener('click', function() {\r\n            const templateId = this.getAttribute('data-template');\r\n            currentTemplateId = templateId;\r\n            \r\n            const template = templateData[templateId];\r\n            if (template) {\r\n                const previewModalTitle = document.getElementById('preview-modal-title');\r\n                const previewDescriptionContent = document.getElementById('preview-description-content');\r\n                const previewRequirementsContent = document.getElementById('preview-requirements-content');\r\n                const previewCriteriaContent = document.getElementById('preview-criteria-content');\r\n                \r\n                if (previewModalTitle) previewModalTitle.textContent = template.title;\r\n                if (previewDescriptionContent) previewDescriptionContent.textContent = template.description;\r\n                if (previewRequirementsContent) previewRequirementsContent.textContent = template.requirements;\r\n                if (previewCriteriaContent) previewCriteriaContent.textContent = template.criteria;\r\n                \r\n                previewModal.classList.add('active');\r\n                document.body.style.overflow = 'hidden';\r\n            }\r\n        });\r\n    });\r\n    \r\n    // Close preview modal\r\n    function closePreviewModal() {\r\n        previewModal.classList.remove('active');\r\n        document.body.style.overflow = '';\r\n    }\r\n    \r\n    if (previewClose) previewClose.addEventListener('click', closePreviewModal);\r\n    if (previewCancel) previewCancel.addEventListener('click', closePreviewModal);\r\n    \r\n    // Close modal on overlay click\r\n    previewModal.addEventListener('click', function(e) {\r\n        if (e.target === previewModal) {\r\n            closePreviewModal();\r\n        }\r\n    });\r\n    \r\n    // Close on Escape key\r\n    document.addEventListener('keydown', function(e) {\r\n        if (e.key === 'Escape' && previewModal.classList.contains('active')) {\r\n            closePreviewModal();\r\n        }\r\n    });\r\n}\r\n\r\nfunction initTemplateUsage() {\r\n    const useButtons = document.querySelectorAll('.use-template');\r\n    const previewUse = document.getElementById('preview-use');\r\n    \r\n    useButtons.forEach(button => {\r\n        button.addEventListener('click', function() {\r\n            const templateId = this.getAttribute('data-template');\r\n            showAlert(`\u0428\u0430\u0431\u043B\u043E\u043D \"${templateId}\" \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044F...`, 'info');\r\n            setTimeout(() => {\r\n                window.location.href = `/frontend/templates/homework/homework-create.html?template=${templateId}`;\r\n            }, 1000);\r\n        });\r\n    });\r\n    \r\n    if (previewUse) {\r\n        previewUse.addEventListener('click', function() {\r\n            const previewModal = document.getElementById('preview-modal');\r\n            if (previewModal) {\r\n                previewModal.classList.remove('active');\r\n                document.body.style.overflow = '';\r\n            }\r\n            \r\n            if (currentTemplateId) {\r\n                showAlert(`\u0428\u0430\u0431\u043B\u043E\u043D \"${currentTemplateId}\" \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044F...`, 'info');\r\n                setTimeout(() => {\r\n                    window.location.href = `/frontend/templates/homework/homework-create.html?template=${currentTemplateId}`;\r\n                }, 1000);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction initTemplateCardInteractions() {\r\n    const templateCards = document.querySelectorAll('.template-card');\r\n    \r\n    templateCards.forEach(card => {\r\n        // \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u043D\u0430\u0432\u0435\u0434\u0435\u043D\u0438\u0438\r\n        card.addEventListener('mouseenter', function() {\r\n            this.style.transform = 'translateY(-8px) scale(1.02)';\r\n            this.style.boxShadow = '0 12px 30px rgba(0,0,0,0.15)';\r\n        });\r\n        \r\n        card.addEventListener('mouseleave', function() {\r\n            this.style.transform = 'translateY(0) scale(1)';\r\n            this.style.boxShadow = '';\r\n        });\r\n        \r\n        // \u041A\u043B\u0438\u043A \u043F\u043E \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0435 (\u043A\u0440\u043E\u043C\u0435 \u043A\u043D\u043E\u043F\u043E\u043A)\r\n        card.addEventListener('click', function(e) {\r\n            if (!e.target.closest('.btn')) {\r\n                const previewBtn = this.querySelector('.preview-template');\r\n                if (previewBtn) {\r\n                    previewBtn.click();\r\n                }\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n// \u042D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u0443\u0435\u043C \u0432\u0441\u0435 \u0444\u0443\u043D\u043A\u0446\u0438\u0438 \u0434\u043B\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0432 main.js\r\nexport {\r\n    initHomeworkListPage,\r\n    initHomeworkCreatePage,\r\n    initHomeworkDetailPage,\r\n    initHomeworkResultsPage,\r\n    initHomeworkReviewPage,\r\n    initHomeworkTemplatesPage\r\n};\r\n\r\n// \u0414\u043B\u044F \u043E\u0431\u0440\u0430\u0442\u043D\u043E\u0439 \u0441\u043E\u0432\u043C\u0435\u0441\u0442\u0438\u043C\u043E\u0441\u0442\u0438\r\nwindow.initHomeworkPages = initHomeworkPages;", "function initTestTaking() {\n    let timeLeft = 20 * 60;\n    const timerElement = document.getElementById('timer');\n    const sidebarTimerElement = document.getElementById('sidebar-timer');\n    \n    let timerInterval;\n    \n    function updateTimer() {\n        const minutes = Math.floor(timeLeft / 60);\n        const seconds = timeLeft % 60;\n        const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n        \n        if (timerElement) timerElement.textContent = timeString;\n        if (sidebarTimerElement) sidebarTimerElement.textContent = timeString;\n        \n        if (timeLeft <= 0) {\n            clearInterval(timerInterval);\n            finishTest();\n        } else {\n            timeLeft--;\n        }\n    }\n    \n    if (timerElement) {\n        timerInterval = setInterval(updateTimer, 1000);\n    }\n    \n    const optionItems = document.querySelectorAll('.option-item');\n    \n    optionItems.forEach(item => {\n        item.addEventListener('click', function() {\n            optionItems.forEach(opt => opt.classList.remove('selected'));\n            this.classList.add('selected');\n        });\n    });\n    \n    const questionNavItems = document.querySelectorAll('.question-nav-item');\n    const currentQuestionElement = document.getElementById('current-question');\n    const progressFillElement = document.getElementById('progress-fill');\n    const progressPercentElement = document.getElementById('progress-percent');\n    const totalQuestions = 15;\n    \n    if (questionNavItems.length > 0) {\n        questionNavItems.forEach((item, index) => {\n            item.addEventListener('click', function() {\n                const questionNumber = index + 1;\n                if (currentQuestionElement) {\n                    currentQuestionElement.textContent = questionNumber;\n                }\n                \n                const progressPercent = Math.round((questionNumber / totalQuestions) * 100);\n                if (progressFillElement) {\n                    progressFillElement.style.width = `${progressPercent}%`;\n                }\n                if (progressPercentElement) {\n                    progressPercentElement.textContent = `${progressPercent}%`;\n                }\n\n                questionNavItems.forEach(nav => nav.classList.remove('current'));\n                this.classList.add('current');\n                \n                // \u0417\u0434\u0435\u0441\u044C \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043B\u043E\u0433\u0438\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u0430\n                console.log(`\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0432\u043E\u043F\u0440\u043E\u0441 ${questionNumber}`);\n            });\n        });\n    }\n    \n    const nextQuestionBtn = document.getElementById('next-question-btn');\n    \n    if (nextQuestionBtn) {\n        nextQuestionBtn.addEventListener('click', function() {\n            const currentQuestion = parseInt(currentQuestionElement.textContent);\n            if (currentQuestion < totalQuestions) {\n                const nextQuestion = currentQuestion + 1;\n                if (currentQuestionElement) {\n                    currentQuestionElement.textContent = nextQuestion;\n                }\n                \n                const progressPercent = Math.round((nextQuestion / totalQuestions) * 100);\n                if (progressFillElement) {\n                    progressFillElement.style.width = `${progressPercent}%`;\n                }\n                if (progressPercentElement) {\n                    progressPercentElement.textContent = `${progressPercent}%`;\n                }\n                \n                questionNavItems.forEach(nav => nav.classList.remove('current'));\n                questionNavItems[nextQuestion - 1].classList.add('current');\n                \n                questionNavItems[currentQuestion - 1].classList.add('answered');\n                \n                console.log(`\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C \u0432\u043E\u043F\u0440\u043E\u0441 ${nextQuestion}`);\n            } else {\n                finishTest();\n            }\n        });\n    }\n    \n    // \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u0435 \u0442\u0435\u0441\u0442\u0430\n    function finishTest() {\n        clearInterval(timerInterval);\n        window.location.href = '/frontend/templates/test/test-result.html';\n    }\n    \n    const finishTestBtn = document.querySelector('.btn-danger');\n    if (finishTestBtn) {\n        finishTestBtn.addEventListener('click', function() {\n            if (confirm('\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0442\u0435\u0441\u0442? \u041F\u043E\u0441\u043B\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F \u0432\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B.')) {\n                finishTest();\n            }\n        });\n    }\n}\n\nfunction initTestResults() {\n    const detailsTabs = document.querySelectorAll('.details-tab');\n    const detailsPanels = document.querySelectorAll('.details-panel');\n    \n    if (detailsTabs.length > 0) {\n        detailsTabs.forEach(tab => {\n            tab.addEventListener('click', function() {\n                const tabId = this.getAttribute('data-tab');\n                \n                detailsTabs.forEach(t => t.classList.remove('active'));\n                detailsPanels.forEach(p => p.classList.remove('active'));\n                \n                this.classList.add('active');\n                const panel = document.getElementById(`${tabId}-panel`);\n                if (panel) panel.classList.add('active');\n            });\n        });\n    }\n}\n\nfunction initTestsList() {\n    const levelFilters = document.querySelectorAll('input[type=\"checkbox\"]');\n    \n    if (levelFilters.length > 0) {\n        levelFilters.forEach(filter => {\n            filter.addEventListener('change', function() {\n                // \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0437\u0434\u0435\u0441\u044C \u0431\u0443\u0434\u0435\u0442 \u043B\u043E\u0433\u0438\u043A\u0430 \u0444\u0438\u043B\u044C\u0442\u0440\u0430\u0446\u0438\u0438\n                console.log('\u0424\u0438\u043B\u044C\u0442\u0440 \u0438\u0437\u043C\u0435\u043D\u0435\u043D:', this.id, this.checked);\n            });\n        });\n    }\n}\n\nfunction initTestResultsPage() {\n    const fadeElements = document.querySelectorAll('.fade-in');\n    \n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('visible');\n            }\n        });\n    }, {\n        threshold: 0.1\n    });\n    \n    fadeElements.forEach(element => {\n        observer.observe(element);\n    });\n\n    window.addEventListener('scroll', function() {\n        const header = document.querySelector('header');\n        if (window.scrollY > 50) {\n            header.classList.add('scrolled');\n        } else {\n            header.classList.remove('scrolled');\n        }\n    });\n\n    const detailsTabs = document.querySelectorAll('.details-tab');\n    const detailsPanels = document.querySelectorAll('.details-panel');\n    \n    if (detailsTabs.length > 0) {\n        detailsTabs.forEach(tab => {\n            tab.addEventListener('click', function() {\n                const tabId = this.getAttribute('data-tab');\n                \n                detailsTabs.forEach(t => t.classList.remove('active'));\n                detailsPanels.forEach(p => p.classList.remove('active'));\n                \n                this.classList.add('active');\n                const panel = document.getElementById(`${tabId}-panel`);\n                if (panel) panel.classList.add('active');\n            });\n        });\n    }\n\n    const watchDetailsBtn = document.querySelector('a[href=\"#results\"]');\n    if (watchDetailsBtn) {\n        watchDetailsBtn.addEventListener('click', function(e) {\n            e.preventDefault();\n            const resultsSection = document.getElementById('results');\n            if (resultsSection) {\n                const headerHeight = document.querySelector('header').offsetHeight;\n                const targetPosition = resultsSection.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n                \n                window.scrollTo({\n                    top: targetPosition,\n                    behavior: 'smooth'\n                });\n            }\n        });\n    }\n\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            const href = this.getAttribute('href');\n            \n            if (href === '#') return;\n            \n            e.preventDefault();\n            const targetElement = document.querySelector(href);\n            \n            if (targetElement) {\n                const headerHeight = document.querySelector('header').offsetHeight;\n                const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n                \n                window.scrollTo({\n                    top: targetPosition,\n                    behavior: 'smooth'\n                });\n            }\n        });\n    });\n}\n\nexport { \n    initTestTaking, \n    initTestResults, \n    initTestsList,\n    initTestResultsPage,\n};", "import { initMobileMenu } from './modules/mobile-menu.js';\nimport { initScrollAnimations, initHeaderScrollEffect } from './modules/animations.js';\nimport { initThemeSwitcher } from './modules/theme-switcher.js';\nimport { initSmoothScroll, initParticles } from './modules/ui.js';\nimport { initAuth } from './modules/auth.js';\nimport { initAttendancePage, initProgressPage, initStatisticsPage } from './pages/analitics-page.js';\nimport { initMap, initFAQ, initContactForm } from './pages/contact-pages.js';\nimport { initTeachersFilter } from './pages/teachers-pages.js';\nimport { initPlatformUsers } from './pages/admin/platform-users.js';\nimport { initRoleManagement } from './pages/admin/role-management.js';\nimport { initSubjectManagement } from './pages/admin/subject-management.js';\nimport { initMaterialCreation } from './pages/material-creation.js';\nimport { initMaterialBrowser } from './pages/material-browser.js';\nimport { initSchedulePage, initScheduleCreatePage } from './pages/schedule-pages.js';\nimport { initProgress as initProgressModule } from './modules/progress.js';\n// import { initExport } from './modules/export.js';\nimport { initChat, quickAction } from './modules/chat.js';\nimport { initDashboard } from './pages/dashboard.js';\nimport { Utils } from './lib/utils.js';\n\nimport { initCourseManagement } from './modules/course-management.js';\nimport { initCoursesModule } from './pages/course-pages.js';\nimport { initPracticePage } from './pages/practic-pages.js';\nimport { initCreateTestPage } from './pages/test-pages.js';\nimport { initHomeworkPages } from './pages/homework-pages.js';\n\nimport { initTestTaking, initTestResultsPage } from './modules/tests.js';\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const currentPath = window.location.pathname;\n\n    \n    initHomeworkPages(currentPath);\n    initPracticePage();\n    initMobileMenu();\n    initScrollAnimations();\n    initHeaderScrollEffect();\n    initThemeSwitcher();\n    initSmoothScroll();\n    initParticles();\n    initAuth();\n    initCoursesModule();\n    initAnalyticsPages(currentPath);\n    initPageSpecificModules(currentPath);\n    initNewModules(currentPath);\n    initJournalPages(currentPath);\n    initSmoothAnchorScroll();\n\n    if (document.querySelector('.test-creation')) {\n        initCreateTestPage();\n    }\n    \n    if (document.querySelector('.test-taking')) {\n        initTestTaking();\n    }\n    \n    if (document.querySelector('.test-results')) {\n        initTestResultsPage();\n    }\n});\n\nfunction initAnalyticsPages(currentPath) {\n    if (currentPath.includes('attendance.html')) {\n        initAttendancePage();\n    } else if (currentPath.includes('progress.html')) {\n        initProgressPage();\n    } else if (currentPath.includes('statistics.html')) {\n        initStatisticsPage();\n    }\n}\n\nfunction initPageSpecificModules(currentPath) {\n    if (document.getElementById('contactForm') || document.getElementById('map')) {\n        if (document.getElementById('map') && typeof ymaps === 'undefined') {\n            loadYandexMaps().then(() => {\n                initMap();\n                initFAQ();\n                initContactForm();\n            });\n        } else {\n            initFAQ();\n            initContactForm();\n            if (document.getElementById('map')) {\n                initMap();\n            }\n        }\n    }\n    \n    if (document.querySelector('.teachers-filters')) {\n        initTeachersFilter();\n    }\n    \n    if (document.querySelector('.users-header')) {\n        initPlatformUsers();\n    }\n    \n    if (document.querySelector('.roles-header')) {\n        initRoleManagement();\n    }\n    \n    if (document.querySelector('.subjects-header')) {\n        initSubjectManagement();\n    }\n    \n    if (document.getElementById('material-form')) {\n        initMaterialCreation();\n    }\n    \n    if (document.querySelector('.material-card')) {\n        initMaterialBrowser();\n    }\n}\n\nfunction initNewModules(currentPath) {\n    if (currentPath.includes('chat-interface.html')) {\n        initChat();\n    }\n    \n    if (currentPath.includes('dashboard.html') || currentPath.includes('teacher-dashboard.html')) {\n        initDashboard();\n    }\n\n    if (currentPath.includes('registration') || \n        currentPath.includes('/authorization/') || \n        window.location.pathname === '/authorization/' || \n        window.location.pathname === '/authorization') {\n        console.log('Initializing registration module...');\n        initAuth();\n    }\n\n    if (currentPath.includes('practic-detail.html')) {\n        console.log('\u041F\u0440\u044F\u043C\u0430\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u0434\u0430\u043D\u0438\u044F');\n        import('./modules/practic-execution.js').then(module => {\n            module.initPracticExecution();\n        });\n    }\n    \n    if (currentPath.includes('test-generation.html')) {\n        initTestGeneration();\n    }\n\n    if (currentPath.includes('homework')) {\n        initHomeworkPages(currentPath);\n    }\n    \n    if (currentPath.includes('create-tests.html')) {\n        initCreateTestPage();\n    } else if (currentPath.includes('tests-detail.html')) {\n        initTestTaking();\n    } else if (currentPath.includes('test-result.html')) {\n        initTestResultsPage();\n    } else if (currentPath.includes('tests-list.html')) {\n        initTestsList();\n    } else if (currentPath.includes('tests.html')) {\n        initCommonAnimations();\n    }\n}\n\nfunction initSmoothAnchorScroll() {\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            const href = this.getAttribute('href');\n            \n            if (href === '#' || href === '#!' || this.getAttribute('data-toggle')) {\n                return;\n            }\n            \n            e.preventDefault();\n            \n            const targetElement = document.querySelector(href);\n            if (targetElement) {\n                const headerHeight = document.querySelector('header')?.offsetHeight || 80;\n                const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n                \n                window.scrollTo({\n                    top: targetPosition,\n                    behavior: 'smooth'\n                });\n            }\n        });\n    });\n}\n\nfunction initCommonAnimations() {\n    const fadeElements = document.querySelectorAll('.fade-in');\n    \n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('visible');\n            }\n        });\n    }, {\n        threshold: 0.1\n    });\n    \n    fadeElements.forEach(element => {\n        observer.observe(element);\n    });\n}\n\nfunction loadYandexMaps() {\n    return new Promise((resolve, reject) => {\n        if (typeof ymaps !== 'undefined') {\n            resolve();\n            return;\n        }\n        \n        const script = document.createElement('script');\n        script.src = 'https://api-maps.yandex.ru/2.1/?apikey=d6033963-5910-4384-8a9b-ca0e6600b444&lang=ru_RU';\n        script.type = 'text/javascript';\n        \n        script.onload = () => resolve();\n        script.onerror = () => reject(new Error('Failed to load Yandex Maps'));\n        \n        document.head.appendChild(script);\n    });\n}\n\nfunction initPracticeModules(currentPath) {\n    if (currentPath.includes('create-practic.html')) {\n        initPracticeCreation();\n    }\n    \n    else if (currentPath.includes('practic-detail.html')) {\n        initPracticExecution(); \n    }\n    \n    else if (currentPath.includes('practic-check.html')) {\n        initPracticeReview();\n    }\n    \n    else if (currentPath.includes('practic.html') || currentPath.includes('practic-list.html')) {\n        initCommonPracticeAnimations();\n    }\n}\n\nfunction initJournalPages(currentPath) {\n    if (currentPath.includes('journal.html')) {\n        initJournalPage();\n    } else if (currentPath.includes('progress.html')) {\n        initProgressModule();\n    } else if (currentPath.includes('grades.html') || currentPath.includes('classes.html')) {\n        initDashboard();\n    } else if (currentPath.includes('schedule.html')) {\n        initSchedulePage();\n    } else if (currentPath.includes('schedule-create.html')) {\n        initScheduleCreatePage();\n    }\n}\n\nfunction initCommonPracticeAnimations() {\n    const fadeElements = document.querySelectorAll('.fade-in');\n    \n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('visible');\n            }\n        });\n    }, {\n        threshold: 0.1\n    });\n    \n    fadeElements.forEach(element => {\n        observer.observe(element);\n    });\n\n    const subjectCards = document.querySelectorAll('.subject-card');\n    \n    subjectCards.forEach(card => {\n        card.addEventListener('mouseenter', function() {\n            this.style.transform = 'translateY(-10px) scale(1.02)';\n        });\n        \n        card.addEventListener('mouseleave', function() {\n            this.style.transform = 'translateY(0) scale(1)';\n        });\n    });\n\n    const topicCards = document.querySelectorAll('.topic-card');\n    \n    topicCards.forEach(card => {\n        card.addEventListener('click', function(e) {\n            if (!e.target.classList.contains('btn')) {\n                const link = this.querySelector('.btn-practice');\n                if (link) {\n                    window.location.href = link.getAttribute('href');\n                }\n            }\n        });\n    });\n}\n\nfunction initJournalPage() {\n    const journalTable = document.querySelector('.journal-table');\n    if (journalTable) {\n        initJournalTable();\n    }\n}\n\nfunction initJournalTable() {\n    const tableRows = document.querySelectorAll('.journal-table tbody tr');\n    tableRows.forEach(row => {\n        row.addEventListener('click', function() {\n            this.classList.toggle('selected');\n        });\n    });\n}\n\nwindow.Utils = Utils;\nwindow.quickAction = quickAction;\nwindow.removeQuestion = removeQuestion;\nwindow.initJournalPage = initJournalPage;\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = {\n        initMobileMenu,\n        initScrollAnimations,\n        initHeaderScrollEffect,\n        initThemeSwitcher,\n        initSmoothScroll,\n        initParticles,\n        initAuth,\n        initAnalyticsPages,\n        initPageSpecificModules,\n        initNewModules,\n        initPracticeModules,\n        initJournalPages,\n        initSmoothAnchorScroll,\n        initCommonAnimations,\n        loadYandexMaps,\n        initCommonPracticeAnimations,\n        initJournalPage\n    };\n}"],
  "mappings": "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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqaf,MAAI,C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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmYpB,IAAM,eAAe,SAAS,cAAc,OAAO;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",
  "names": ["strength", "requirements", "termsCheckbox", "resetForm", "userName", "userName", "currentDate", "userName", "userName", "userName", "userEmail", "userName", "initializeCharts", "userName", "initializeCharts", "userName", "currentDate", "currentView", "updatePreview", "validateForm", "getStudentName", "showToast", "toastContainer", "showToast", "e", "showToast", "initPreview", "initFormSubmission", "initToastSystem", "toastContainer", "showToast", "hideToast", "e", "file", "updateProgress", "validateForm", "resetForm", "loadDraft", "e", "initToastSystem", "showToast", "initPracticExecution", "showToast", "handleDrop", "showToast", "codeBtn", "initToastSystem", "initPracticExecution", "initToastSystem", "toastContainer", "showToast", "removeQuestion", "questionType", "showAlert", "alert", "initFormSubmission", "updatePreview", "formatDate", "formatFileSize", "validateForm", "calculateTotalScore", "currentTemplateId", "module", "initCommonAnimations"]
}
